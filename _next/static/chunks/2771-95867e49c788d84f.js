(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2771],{56679:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var o,a,l=n(57437),r=n(2265);n(26679);var i=n(4810),d=n.n(i),s=n(94746);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var u=function(e){return s.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),o||(o=s.createElement("g",{clipPath:"url(#icon-close_svg__a)"},s.createElement("path",{fill:"#666",d:"m5.637 3.938.055.05 6.795 6.796 6.545-6.545a1 1 0 0 1 1.465 1.36l-.05.055-6.546 6.544 6.545 6.544a1 1 0 0 1-1.36 1.466l-.054-.051-6.545-6.545-6.795 6.796a1 1 0 0 1-1.465-1.36l.05-.054 6.796-6.796-6.795-6.795a1 1 0 0 1 1.359-1.465"}))),a||(a=s.createElement("defs",null,s.createElement("clipPath",{id:"icon-close_svg__a"},s.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))},m=n(72790),f=n(11340),p=n(53335),v=n(65435);function N(e){let{title:t,showCloseButton:n,children:o,className:a,onRequestClose:i,controls:s,tipText:c,size:N="normal",...x}=e,h=(0,r.useRef)(null);n=null!=n&&n;let g={active:"flex-1 h-[50px] bg-gradient-to-r from-[#E700E6] to-[#4B4BDF] text-white font-semibold rounded-[8px]",normal:"flex-1 h-[50px] bg-[#111111] text-white font-semibold rounded-[8px]",disabled:"flex-1 h-[50px] bg-[#111111] border border-[#30251d] text-white font-semibold rounded-[8px]"};return(0,l.jsx)("div",{ref:h,className:"react-modal-contain flex justify-center items-center",children:(0,l.jsxs)(d(),{overlayClassName:"react-modal-overlay flex flex-col justify-center",onRequestClose:null!=i?i:null,className:"react-modal-content size-".concat(N," ").concat(null!=a?a:""),...x,children:[t||n?(0,l.jsxs)(m.Z,{className:"top-nav",horizontalArrangement:n?f.cV.SpaceBetween:f.cV.Center,verticalAlignment:f.v2.Center,children:[(0,l.jsx)("h1",{className:"text-[18px] font-medium modal-title",children:t}),n?(0,l.jsx)(u,{className:"cursor-pointer",onClick:()=>null==i?void 0:i()}):""]}):null,(0,l.jsx)("div",{className:"content",children:o}),(null==s?void 0:s.buttons.length)||c?(0,l.jsxs)("div",{className:"bottom flex flex-col mt-[20px] gap-[20px]",children:[(null==s?void 0:s.buttons.length)?(0,l.jsx)("div",{className:"flex justify-end gap-4 mt-[20px]",children:s.buttons.map((e,t)=>(0,l.jsx)(v.ZP,{status:v.Dv.None,className:(0,p.m6)(g[e.type],e.className),waitForClick:!0,onClick:e.onClick,children:e.text},t))}):null,c?(0,l.jsx)("p",{className:"text-[12px] text-white font-medium text-center",children:c}):null]}):null]})})}},32223:function(e,t,n){"use strict";n.d(t,{L:function(){return a},Z:function(){return d}});var o,a,l=n(57437),r=n(53335);n(61940);var i=n(2265);function d(e){var t,n;let[o,a]=(0,i.useState)(null!==(t=e.activeIndex)&&void 0!==t?t:0),d=null!==(n=e.displayType)&&void 0!==n?n:"default";return(0,i.useEffect)(()=>{void 0!==e.activeIndex&&e.activeIndex!==o&&a(e.activeIndex)},[e.activeIndex]),(0,l.jsxs)("div",{className:(0,r.m6)("tab-list-v2 flex flex-col items-stretch ".concat(d),e.className),children:[(0,l.jsxs)("ul",{className:(0,r.m6)("list tab-list-title flex flex-row items-center",e.tabListTitleClassName),children:[e.title?(0,l.jsx)("li",{className:(0,r.m6)("item tab-list-title-item bold transition-fast no-active text-[12px] md:text-[14px]",e.tabList.length>3?"flex-1 md:flex-none":"",e.titleClassName),children:(0,l.jsx)("span",{className:"flex justify-center items-center title cursor-pointer hover transition-fast",children:e.title})},-1):null,e.tabList.map((t,n)=>{var i,s;return(0,l.jsx)("li",{className:(0,r.m6)("item tab-list-title-item bold transition-fast text-[12px] md:text-[14px] ".concat(o==n?"in-active":"no-active"),e.tabList.length>3?"flex-1 md:flex-none":"",null===(i=e.tabItemClassName)||void 0===i?void 0:i.call(e,o===n)),children:(0,l.jsx)("span",{onClick:()=>{a(n),e.onClick(e.tabList[n].url)},className:(0,r.m6)("flex justify-center items-center title cursor-pointer hover transition-fast w-full",null===(s=e.tabItemTitleClassName)||void 0===s?void 0:s.call(e,o===n)),children:(0,l.jsx)("i",{className:o==n&&("default"===d||"border-gradient"===d)?"text-gradient":"text-secondary",children:t.title})})},n)})]}),e.children?(0,l.jsx)("ul",{className:"list tab-list-content",children:e.children}):""]})}(o=a||(a={})).Default="default",o.BorderGradient="border-gradient",o.BgGradient="bg-gradient"},12628:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var o=n(57437),a=n(32223),l=n(43949),r=n(89769),i=n(99376),d=n(53335),s=n(95665);function c(e){let t=(0,i.useRouter)(),{t:n}=(0,l.$G)(["dao"]),c=[{title:n("TabVote"),url:"/dao/node",target:r.r.VotingTabEnum.VOTE},{title:n("TabEWV"),url:"/dao/ewv",target:r.r.VotingTabEnum.EWV},{title:n("TabNode"),url:"/dao/user",target:r.r.VotingTabEnum.NODE}];return(0,o.jsx)("div",{className:"flex flex-col items-stretch md:items-center",children:(0,o.jsx)(a.Z,{className:(0,d.m6)("mb-10",e.className),tabItemClassName:()=>"w-[33%] md:w-[180px]",tabItemTitleClassName:()=>"w-full",displayType:a.L.BgGradient,activeIndex:c.findIndex(t=>t.target===e.activeTarget),tabList:c,onClick:e=>{let n=new URLSearchParams(location.search);if(!n.has(s.Z.Params.DAO_ADDRESS))return t.push(e);let o=new URL(e,location.origin),a=new URLSearchParams(o.search);a.set(s.Z.Params.DAO_ADDRESS,n.get(s.Z.Params.DAO_ADDRESS)),o.search=a.toString(),t.push("".concat(o.origin).concat(o.pathname,"?").concat(a.toString()))}})})}},50544:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var o=n(2265),a=n(89769),l=n(43949),r=n(6178),i=n(21707),d=n(40366),s=n(3682),c=n(10433),u=n(95665),m=n(81939);function f(){var e,t,n,f,p,v,N,x,h,g,C,b,w,y,E,I,T,A,j,S;let D=(0,r.T)(),{t:L,i18n:R}=(0,l.$G)(["dao"]),k=(0,r.C)(e=>e.dao),P="/images/dao/",Z=new Map([[a.r.NodeType.NONE,{color1:"#000",color2:"#fff",title:L("notNode.title"),description:L("notNode.description"),image:"".concat(P,"not-node.png"),upgradeInfo:{userNodeCount:0n,requiredNodeCount:0n,ethPrice:0n}}],[a.r.NodeType.CANDIDATE,{color1:"#E700E6",color2:"#4B4BDF",title:L("candidateNode.title"),description:L("candidateNode.description",{title:L("candidateNode.title").toLocaleLowerCase(),token:k.tokenInfo.symbol,value:m.Z.wei2eth(null!==(C=null===(e=k.daoContractInfo)||void 0===e?void 0:e.applyCandidateEthAmount)&&void 0!==C?C:0n)}),image:"".concat(P,"candidate-node.png"),upgradeInfo:{userNodeCount:0n,requiredNodeCount:0n,ethPrice:null!==(b=null===(t=k.daoContractInfo)||void 0===t?void 0:t.applyCandidateEthAmount)&&void 0!==b?b:0n}}],[a.r.NodeType.MASTER,{color1:"#EA7D01",color2:"#B06D00",title:L("mainNode.title"),description:L("mainNode.description",{prevTitle:L("candidateNode.title").toLocaleLowerCase(),title:L("mainNode.title").toLocaleLowerCase(),nodeCount:String(null!==(w=null===(n=k.daoContractInfo)||void 0===n?void 0:n.votesForMaster)&&void 0!==w?w:0n)}),image:"".concat(P,"main-node.png"),upgradeInfo:{userNodeCount:null!==(y=null===(f=k.userInfo)||void 0===f?void 0:f.userInfo.sonCount)&&void 0!==y?y:0n,requiredNodeCount:null!==(E=null===(p=k.daoContractInfo)||void 0===p?void 0:p.votesForMaster)&&void 0!==E?E:0n,ethPrice:0n}}],[a.r.NodeType.SUPER,{color1:"#00E7D4",color2:"#4B4BDF",title:L("superNode.title"),description:L("superNode.description",{prevTitle:L("mainNode.title").toLocaleLowerCase(),title:L("superNode.title").toLocaleLowerCase(),token:k.tokenInfo.symbol,value:m.Z.wei2eth(null!==(I=null===(v=k.daoContractInfo)||void 0===v?void 0:v.applySuperEthAmount)&&void 0!==I?I:0n),nodeCount:String(null!==(T=null===(N=k.daoContractInfo)||void 0===N?void 0:N.masterForSuper)&&void 0!==T?T:0n)}),image:"".concat(P,"super-node.png"),upgradeInfo:{userNodeCount:null!==(A=null===(x=k.userInfo)||void 0===x?void 0:x.userInfo.sonMasterNodeCount)&&void 0!==A?A:0n,requiredNodeCount:null!==(j=null===(h=k.daoContractInfo)||void 0===h?void 0:h.masterForSuper)&&void 0!==j?j:0n,ethPrice:null!==(S=null===(g=k.daoContractInfo)||void 0===g?void 0:g.applySuperEthAmount)&&void 0!==S?S:0n}}]]),B=Array.from(Z.entries()),_=new Map;B.forEach((e,t)=>{let n=e[0],o=B[t+1];_.set(n,{nextKey:o?Number(o[0]):void 0,nextValue:o?o[1]:void 0})});let O=new Map(k.nodesCurrentRoundInfo.map(e=>["".concat(e.daoAddress,",").concat(e.nodeAddress),e])),M=o.useCallback(async(e,t)=>{if(0===e.length)return[];let n=new i.C(t.daoAddress,d.K),o=e.map(e=>n.promotions(t.currentRoundNO,e)),a=s.Q.getDefaultProvider(),l=new i.z(s.Q.getTargetNet().chainId,a),r=await l.all(o),u=e.map((e,n)=>({nodeAddress:e,daoAddress:t.daoAddress,promotionInfo:r[n]}));return c.Z.I("getNodeCurrentRoundSimpleInfo",u),u},[]),V=o.useCallback(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!(t=null!=t?t:k.daoContractInfo))throw Error("daoAddress and currentRoundNO can't be empty");let n=await M([e,k.nodes.data.map(e=>e.walletAddress)].flat(),t);D(u.Z.slice.actions.updateNodesCurrentRoundInfo(n))},[D,k.daoContractInfo,k.nodes.data,M]),F=o.useCallback(async(e,t)=>{var n;let o=null!=t?t:null===(n=k.daoContractInfo)||void 0===n?void 0:n.daoAddress;if(!o)throw Error("daoAddress can't be empty");try{let t=new i.C(o,d.K),n=s.Q.getDefaultProvider(),a=new i.z(s.Q.getTargetNet().chainId,n),l=t.users(e),r=await a.all([l]),u=Number(r[0].nodeType);return c.Z.I("getNodeTypeByAddress",{nodeAddress:e,nodeType:u}),u}catch(e){return c.Z.E("getNodeTypeByAddress error",e),a.r.NodeType.NONE}},[k.daoContractInfo]);return o.useEffect(()=>{Z.set(a.r.NodeType.MASTER,{...Z.get(a.r.NodeType.MASTER),title:L("mainNode.title")}),Z.set(a.r.NodeType.SUPER,{...Z.get(a.r.NodeType.SUPER),title:L("superNode.title")})},[R.language]),{nodeMap:Z,nodeToNextMap:_,getNodeCurrentRoundSimpleInfo:M,updateNodeCurrentRoundInfoSimpleInfo:V,nodeCurrentRoundSimpleInfoMap:O,getNodeTypeByAddress:F}}},26679:function(){},61940:function(){}}]);