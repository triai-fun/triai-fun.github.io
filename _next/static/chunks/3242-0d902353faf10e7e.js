(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3242],{41525:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(57437);n(2265),n(34159);var i=n(22448),r=n(10867),s=n(3682);function o(e){let{chainId:t,hash:n,text:o,children:u,className:l,...d}=e,p=(0,a.jsx)(i.Z,{children:n}),y=new s.Q(t).getTXUrl(n);return(0,a.jsx)(r.Z,{placement:"top",speaker:p,trigger:"hover",children:(0,a.jsx)("a",{className:"component-chain-hash-link pointer hover underline ".concat(null!=l?l:""),href:y,target:"_blank",...d,children:null!=o?o:n})})}},97644:function(e,t,n){"use strict";n.d(t,{ZP:function(){return m}});var a=n(57437),i=n(2265),r=n(63671),s=n(10433),o=n(74439),u=n(72525),l=n(72790),d=n(11340),p=n(52926),y=n(20605);n(83123),n(66917),n(41849),n(43949);var c=n(53335);function m(e){var t,n;let m=null!==(t=e.needRelocationAfterUpdate)&&void 0!==t&&t,f=null!==(n=e.offsetY)&&void 0!==n?n:-70,w=i.useRef(null),[g,T]=i.useState((0,r.ki)(e.pageInfo)),[k,b]=i.useTransition(),v=e.pageInfo.page||1,h=e.pageInfo.totalPage||0,I=i.useRef({isLoading:e.isLoading,emptyText:e.emptyText,loadingText:e.loadingText,onPaginationChange:e.onPaginationChange});function A(t){console.log("changePagination called with page:",t);let n=e=>{};return I.current.isLoading||g.isLoading?console.log("Loading, cannot change page"):(T({...g,isLoading:!0,isError:!1}),b(async()=>{console.log("Starting page change transition to page:",t);try{let a=I.current.onPaginationChange({page:t});if(n=a.cancel,await a.promise.catch(e=>{if(y.Z.canBeIgnore(e))return Promise.resolve();s.Z.E(JSON.stringify(e)),T({...g,isLoading:!1,isError:!0})}),console.log("Page change completed successfully"),T({...g,isLoading:!1,isError:!1}),!(null==w?void 0:w.current)||0===e.pageInfo.page||!m)return;o.Z.sleepForAnimationFrame(16).promise.then(()=>{if(!w.current)return;let e=o.Z.getOffsetTop(w.current)+f;s.Z.I("scroll to y: ",e),o.Z.scrollTo({y:e})})}catch(e){console.error("Error in page change:",e)}})),n}i.useEffect(()=>{I.current={isLoading:e.isLoading,emptyText:e.emptyText,loadingText:e.loadingText,onPaginationChange:e.onPaginationChange}},[e.isLoading,e.emptyText,e.loadingText,e.onPaginationChange]),i.useEffect(()=>{let t=o.Z.sleepForAnimationFrame();return t.promise.then(()=>{var t;A(null!==(t=e.pageInfo.page)&&void 0!==t?t:1)}),()=>t.cancel("useEffect callback")},[]);let S=i.useMemo(()=>{if(h<=5)return Array.from({length:h},(e,t)=>t+1);let e=1;return e=v<=3?1:v>=h-2?h-4:v-2,Array.from({length:5},(t,n)=>e+n)},[v,h]),{showLeftEllipsis:C,showRightEllipsis:R}=i.useMemo(()=>({showLeftEllipsis:h>5&&v>3,showRightEllipsis:h>5&&v<h-2}),[v,h]),M=e=>{console.log("Clicked on page ".concat(e,", current page is ").concat(v)),A(e)};return(0,a.jsxs)(u.Z,{className:(0,c.m6)("paginate-table-container",e.className),children:[(0,a.jsxs)(u.Z,{className:"paginate-wrapper w-full",children:[(0,a.jsx)("div",{className:"paginate-content w-full",ref:w,children:e.children}),(0,a.jsx)("div",{className:"h-[40px] flex justify-center items-center",children:(0,a.jsxs)(l.Z,{horizontalArrangement:d.cV.Center,verticalAlignment:d.v2.Center,className:"status-contain",children:[k||I.current.isLoading||g.isLoading?(0,a.jsx)(p.Z,{children:I.current.loadingText}):"",I.current.isLoading||g.isLoading||0!==h||!I.current.emptyText?"":(0,a.jsx)("div",{className:"paginate-table-placeholder",children:I.current.emptyText})]})})]}),h>0&&(0,a.jsx)("div",{className:"paginate-contain",children:(0,a.jsx)("div",{className:"pagination-custom",children:(0,a.jsxs)("ul",{className:"flex items-center",children:[(0,a.jsx)("li",{className:"previous ".concat(v<=1?"disabled":""),children:(0,a.jsx)("a",{onClick:()=>A(Math.max(1,v-1)),children:"<"})}),h<=5?(0,a.jsx)(a.Fragment,{children:Array.from({length:h},(e,t)=>{let n=t+1;return(0,a.jsx)("li",{className:n===v?"selected":"",children:(0,a.jsx)("a",{onClick:()=>M(n),children:n})},n)})}):S.map(e=>(0,a.jsx)("li",{className:e===v?"selected":"",children:(0,a.jsx)("a",{onClick:()=>M(e),children:e})},e)),(0,a.jsx)("li",{className:"pagination-break ".concat(R&&h>5?"":"opacity-0"),children:(0,a.jsx)("a",{className:"pagination-break-link",children:"..."})}),(0,a.jsx)("li",{className:"next ".concat(v>=h?"disabled":""),children:(0,a.jsx)("a",{onClick:()=>A(Math.min(h,v+1)),children:">"})})]})})})]})}},41849:function(e,t,n){"use strict";var a=n(57437),i=n(2265),r=n(53335);t.Z=i.forwardRef(function(e,t){var n,i;return(0,a.jsxs)("p",{ref:t,className:(0,r.m6)("my-5 text-tip flex justify-center items-center gap-2 component-text-tip",null!==(n=e.className)&&void 0!==n?n:""),children:[null!==(i=e.text)&&void 0!==i?i:"There‘s nothing more left",e.children]})})},7797:function(e,t,n){"use strict";n.d(t,{Z:function(){return f},d:function(){return w}});var a=n(59868),i=n(10433),r=n(3682),s=n(21707),o=n(32773),u=n(81939),l=n(2265),d=n(6178),p=n(13965),y=n(72300),c=n(74439),m=n(13167);function f(e){let t=(0,d.T)(),n=(0,d.C)(e=>e.user),o=(0,d.C)(e=>e.token),[c,f]=l.useState(0n);async function w(t){if(!(t=t||e))throw Error("Can't found tokenAddress!");let n=r.Q.getDefaultProvider(),a=new s.z(r.Q.getTargetNet().chainId,n),i=new s.C(t,m.TrinityTokenAbi),[o,u,l,d]=await a.all([i.name(),i.symbol(),i.decimals(),i.creator()]);return{creator:d,name:o,symbol:u,decimals:Number(l)}}async function g(e){let n=await w(e);return t(y.Z.slice.actions.updateTokenContractDetail({...o.tokenContractDetail,...n})),n}async function T(t){if(!t&&!n.ethInfo.walletAddress)throw Error("Can't found walletAddress");if(!e)throw Error("Can't found tokenAddress");if(!(t=null!=t?t:n.ethInfo.walletAddress))return 0n;let i=p.r.getInstance();return new a.CH(e,m.TrinityTokenAbi,u.Z.getInstance(i.getProvider()).browserProvider).balanceOf(t)}async function k(e){let t=await T(e);return f(t),t}async function b(t,r,s){let o=new a.CH(e,m.TrinityTokenAbi,s),u=await o.allowance(n.ethInfo.walletAddress,t);if(i.Z.D("allowance:".concat(u)),u<r){let e=await o.approve(t,r);i.Z.D("approveResult:".concat(e.hash)),await e.wait(),i.Z.D("approveResult is confirm!")}}async function v(){let t=r.Q.getTargetNet(),n=p.r.getInstance(),i=u.Z.getInstance(n.getProvider(),t.chainId),s=new a.CH(e,m.TrinityTokenAbi,await i.getSigner()),o=await s.setStartTime(Math.floor(Date.now()/1e3));return await o.wait()}return l.useEffect(()=>{e&&n.ethInfo.walletAddress&&k().catch(e=>{i.Z.E(e)})},[e,n.ethInfo.walletAddress]),{balance:c,getUserTokenBalance:T,updateUserTokenBalance:k,getInfo:w,updateInfo:g,approve:b,setEnd:v}}function w(e,t){let n=(0,d.T)();function i(n,a){if(n=n||e,a=a||t,!n)throw Error("Can't found tokenStakingRewardsAddress!");let i=new s.C(n,o.v);return[i.balanceOf(a),i.earned(a)]}async function l(n,a){if(n=n||e,a=a||t,!n)throw Error("Can't found tokenStakingRewardsAddress!");let u=r.Q.getDefaultProvider(),l=new s.z(r.Q.getTargetNet().chainId,u),d=new s.C(n,o.v),[p,y,c,m,f,w,g,T,k]=await l.all([l.getEthBalance(n),d.rewardsToken(),d.stakingToken(),d.lastUpdateTime(),d.rewardPerTokenStored(),d.totalSupply(),d.balanceOf(n),...t?i(n,t):[]]);return{ethBalance:p,rewardsToken:y,stakingToken:c,lastUpdateTime:Number(m),rewardPerTokenStored:f,totalSupply:w,tokenBalance:g,stakedAmount:null!=T?T:0n,earned:null!=k?k:0n}}async function m(e,a){let i=await l(e,t);return n(y.Z.slice.actions.updateStakingRewardsContractDetail({...i,stakingRewardsAddress:e})),c.Z.sleepForAnimationFrame(16).promise}async function f(e,t){let n=i(e,t),a=r.Q.getDefaultProvider(),o=new s.z(r.Q.getTargetNet().chainId,a),[u,l]=await o.all(n);return{stakedAmount:u,earned:l}}return{buildAccountInfoCall:i,getInfo:l,updateInfo:m,getAccountInfo:f,withdrawRewards:async function(t){if(!e)throw Error("Can't found tokenStakingRewardsAddress!");let n=r.Q.getTargetNet(),i=p.r.getInstance(),s=u.Z.getInstance(i.getProvider(),n.chainId);await s.getChain()!==n.chainId&&await s.switchToChain(n.chainId);let l=await s.getSigner(),d=new a.CH(e,o.v,l),y=await d.withdraw(t);return await y.wait()},getRewards:async function(){if(!e)throw Error("Can't found tokenStakingRewardsAddress!");let t=r.Q.getTargetNet(),n=p.r.getInstance(),i=u.Z.getInstance(n.getProvider(),t.chainId);await i.getChain()!==t.chainId&&await i.switchToChain(t.chainId);let s=await i.getSigner();return new a.CH(e,o.v,s).getReward()}}}},71002:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var a=n(3682),i=n(6178),r=n(94552),s=n(59868),o=n(81939),u=n(21707),l=n(13965),d=n(10433),p=n(72300),y=n(13167),c=n(45556),m=n(70042);let f=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token0",type:"address"},{indexed:!0,internalType:"address",name:"token1",type:"address"},{indexed:!1,internalType:"address",name:"pair",type:"address"},{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"PairCreated",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allPairs",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"allPairsLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"burnRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"address",name:"WETH",type:"address"}],name:"createPair",outputs:[{internalType:"address",name:"pair",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"feeTo",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeToSetter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getPair",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"pair",type:"address"}],name:"getTokens",outputs:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_feeToSetter",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_burnRate",type:"uint256"}],name:"setBurnRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_feeTo",type:"address"}],name:"setFeeTo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_feeToSetter",type:"address"}],name:"setFeeToSetter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_router",type:"address"}],name:"setRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"tokenPairs",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1n,t=(0,i.T)(),n=(0,i.C)(e=>e.token),w=(0,i.C)(e=>e.user);function g(){let e="0x4Cd906AEF43aB89BB5714391B024b3C49bC76617";if(!e)throw Error("Can't found tokenSwapAddress!");return e}async function T(e){let t=g();e=null!=e?e:n.tokenDetail.tokenAddress;let i=a.Q.getDefaultProvider(),s=new u.z(a.Q.getTargetNet().chainId,i),o=new u.C(t,c.R),[l,d,p,y,m]=await s.all([o.COMMON_FEE(),o.router02(),o.priceConsumerV3(),o.stakingRewardsFactory(),...e?[o.tokenSwapFee(e)]:[]]);return{defaultUsdFee:Number(l),usdFee:Number(m||l)/100,router02:d,priceConsumerV3:p,uniswapV2Factory:r.N,stakingRewardsFactory:y}}async function k(e){let n=await T(e);return t(p.Z.slice.actions.updateTokenSwapInfo(n)),n}async function b(e,t,n){let i=a.Q.getDefaultProvider(),r=new u.z(a.Q.getTargetNet().chainId,i);if(!(n=null!=n?n:"0x4200000000000000000000000000000000000006"))throw Error("Can't found NEXT_PUBLIC_WETH_ADDRESS!");let s=new u.C(e,f),[o,l,p]=await r.all([s.getPair(t,n),s.feeTo(),s.feeToSetter()]);return d.Z.I("pairAddress",o),{pairAddress:o,feeTo:l,feeToSetter:p}}async function v(e,n,a){let i=await b(e,n,a);return t(p.Z.slice.actions.updateUniswapV2FactoryInfo(i)),i}async function h(e){let t=g();if(!(e=null!=e?e:"0x4200000000000000000000000000000000000006"))throw Error("Can't found WETH_ADDRESS!");let n=a.Q.getTargetNet(),i=l.r.getInstance(),r=o.Z.getInstance(i.getProvider(),n.chainId);await r.getChain()!==n.chainId&&await r.switchToChain(n.chainId);let s=await r.getSigner();return{ethersProvider:r,WETH_ADDRESS:e,signer:s,tokenSwapAddress:t}}async function I(e,t,n,a){let i=new s.CH(e,y.TrinityTokenAbi,a),r=await i.allowance(w.ethInfo.walletAddress,t);if(d.Z.D("allowance:".concat(r)),r<n){let e=await i.approve(t,n);d.Z.D("approveResult:".concat(e.hash)),await e.wait(),d.Z.D("approveResult is confirm!")}}return{getInfo:T,updateInfo:k,getSwapFactory:async function(){let e=g(),t=a.Q.getDefaultProvider(),n=new u.z(a.Q.getTargetNet().chainId,t),i=new u.C(e,c.R),[r,s]=await n.tryAll([i.trinityswapV2Factory(),i.uniswapV2Factory()]);return null!=r?r:s},getUniswapV2FactoryInfo:b,updateUniswapV2FactoryInfo:v,buy:async function(e){var t;let{ethersProvider:n,WETH_ADDRESS:a,signer:i,tokenSwapAddress:r}=await h(e.wethAddress),s=m.Ro.connect(r,i),o=[e.amountIn,e.amountOut,[a,e.tokenAddress],w.ethInfo.walletAddress,e.deadline,{value:(null!==(t=e.value)&&void 0!==t?t:0n)+e.amountIn}];return d.Z.I("swapExactETHForTokens",o),s.swapExactETHForTokens(...o)},simulateBuy:async function(e){var t;let{ethersProvider:n,WETH_ADDRESS:a,signer:i,tokenSwapAddress:r}=await h(e.wethAddress),o=new s.CH(r,c.R,i),u=[e.amountOut,[a,e.tokenAddress],w.ethInfo.walletAddress,e.deadline,{value:(null!==(t=e.value)&&void 0!==t?t:0n)+e.amountIn}];try{let e=await o.swapExactETHForTokens.estimateGas(...u);d.Z.I("Estimated gas:",e);let t=await o.swapExactETHForTokens.staticCall(...u,{gasLimit:e});return d.Z.I("Simulation successful:",t),{success:!0,gasEstimate:e,simulation:t}}catch(e){return d.Z.E("Simulation failed:",e),{success:!1,error:e}}},sell:async function(e){var t;let{ethersProvider:n,WETH_ADDRESS:a,signer:i,tokenSwapAddress:r}=await h(e.wethAddress);await I(e.tokenAddress,r,e.amountIn,i);let o=new s.CH(r,c.R,i),u=[e.amountIn,e.amountOut,[e.tokenAddress,a],w.ethInfo.walletAddress,e.deadline,{value:null!==(t=e.value)&&void 0!==t?t:0n}];return d.Z.I("sswapExactTokensForETHell",u),o.swapExactTokensForETH(...u)},getAmountOut:async function(e,t,n){if(0n===e||0n===t||0n===n)return 0n;let i=g(),r=a.Q.getDefaultProvider();return new s.CH(i,c.R,r).getAmountOut(e,t,n)},getAmountIn:async function(e,t,n){if(0n===e||0n===t||0n===n)return 0n;let i=g(),r=a.Q.getDefaultProvider();return new s.CH(i,c.R,r).getAmountIn(e,t,n)},getAmountOutLocal:function(t,n,a){if(0n===t||0n===n)return 0n;let i=t*e;return i*a/(n*e+i)},getAmountOutLocalWithoutFee:function(e,t,n){return 0n===e||0n===t?0n:e*n/t},getAmountInLocal:function(t,n,a){if(0n===t||0n===n||0n===a)return 0n;let i=t*e,r=a*e-i;return(i*n+r-e)/r},getAmountInLocalWithoutFee:function(e,t,n){return 0n===e||0n===t?0n:e*t/n},getLiquidityAmountOutLocal:function(e,t,n){return 0n===e||0n===t?0n:e*n/t},getLiquidityAmountInLocal:function(e,t,n){return 0n===e||0n===n?0n:e*t/n},addLiquidity:async function(e,t,n,a,i,r,o){let{ethersProvider:u,WETH_ADDRESS:l,signer:d,tokenSwapAddress:p}=await h();return await I(e,p,t,d),new s.CH(p,c.R,d).addLiquidityETH(e,t,n,i,r,o,{value:a})}}}},24731:function(e,t,n){"use strict";n.d(t,{ZP:function(){return w},Ox:function(){return g}});var a=n(3682),i=n(7797),r=n(21707);let s=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"stakingToken",type:"address"},{internalType:"address",name:"rewardsToken",type:"address"},{internalType:"address",name:"trinityswapV2Router",type:"address"},{internalType:"address",name:"_trinityswapV2Factory",type:"address"}],name:"deploy",outputs:[{internalType:"address",name:"stakingRewardsAddress",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"stakingToken",type:"address"}],name:"getStakingRewardsInfoByStakingToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_stakingRewardsGenesis",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"stakingToken",type:"address"}],name:"notifyRewardAmount",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_stakingRewardsEvent",type:"address"}],name:"setStakingRewardsEvent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_trinityswap",type:"address"}],name:"setTrinityswap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingRewardsGenesis",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];var o=n(6178),u=n(74439),l=n(72300);n(2265);var d=n(54881),p=n(10433),y=n(32773),c=n(68651),m=n(13167),f=n(45532);function w(e){let t=(0,o.T)(),n=(0,i.d)(null!=e?e:""),d="0x4200000000000000000000000000000000000006";async function y(e){let t=a.Q.getDefaultProvider(),n=new r.z(a.Q.getTargetNet().chainId,t),i=new r.C(e,f._),[s,o,u,l,y,c,w,g]=await n.all([i.factory(),i.token0(),i.token1(),i.getReserves(),i.totalSupply(),i.balanceOf(e),n.getEthBalance(e),...d?[new r.C(d,m.TrinityTokenAbi).balanceOf(e)]:[]]),[T,k,b]=l;return p.Z.I("useUniswapV2Pair updateInfo",{pairAddress:e,wethAddress:d,factory:s,token0:o.toString(),token1:u.toString(),reserve0:T.toString(),reserve1:k.toString(),timestamp:b.toString(),totalSupply:y.toString(),balance:c.toString(),ethBalance:w.toString(),pairWethBalance:(null!=g?g:0n).toString()}),{pairAddress:e,tradingEnable:!0,factory:s,token0:o,token1:u,reserve0:T,reserve1:k,timestamp:Number(b),totalSupply:y,balance:c,ethBalance:w,pairWethBalance:null!=g?g:0n}}async function c(e){let n=await y(e);return t(l.Z.slice.actions.updateUniswapV2PairInfo(n)),u.Z.sleepForAnimationFrame(16).promise}async function w(t,i){let o=a.Q.getDefaultProvider(),u=new r.z(a.Q.getTargetNet().chainId,o),l=e;if(!l){let e="0x651d2F3Cb9d40C4945f87Be01cC7FcdaD8F167Ec";if(!e)throw Error("Can't found NEXT_PUBLIC_STAKE_REWARDS_FACTORY_CONTRACT_ADDRESS!");let n=new r.C(e,s),[a]=await u.all([n.getStakingRewardsInfoByStakingToken(t)]);l=a}let d=await n.getInfo(l,i);return{stakingRewardsAddress:l,...d}}async function g(e,n){let a=await w(e,n);return t(l.Z.slice.actions.updateStakingRewardsContractDetail({...a})),u.Z.sleepForAnimationFrame(16).promise}return{getInfo:y,updateInfo:c,getStakingRewardsInfoByPair:w,updateStakingRewardsInfoByPair:g}}function g(e){let t=(0,o.T)(),n=(0,o.C)(e=>e.token),i=(0,o.C)(e=>e.user),s=n.userLiquidityInfo,u=new c.Z(0n===s.pairTotalSupply?0:n.stakingRewardsContractDetail.stakedAmount.toString()),w=0n===s.nftRewardTotalSupply?new c.Z(0):new c.Z(s.userNftRewardBalance.toString()).multipliedBy(s.liquidityRate.toString()),g=w.plus(u).div(s.pairTotalSupply.toString());async function T(t,n,s){s=null!=s?s:i.ethInfo.walletAddress;let o=a.Q.getDefaultProvider(),u=new r.z(a.Q.getTargetNet().chainId,o),l=new r.C(e,f._),c=new r.C(t,y.v),m=new r.C(n,d.M),[w,g,T,k,b,v,h,I]=await u.all([c.balanceOf(n),m.balanceOf(e),l.balanceOf(n),l.balanceOf(s),l.totalSupply(),m.balanceOf(s),m.liquidityRate(),m.totalSupply()]);return p.Z.I("getLiquidityInfo","pairContract",e,"userAddress",s,"value:",w,g,T,k,b,v,I),{tokenRewardNFTRewardBalance:w,nftRewardPairBalance:g,pairNFTRewardBalance:T,userPairBalance:k,pairTotalSupply:b,userNftRewardBalance:v,liquidityRate:h,nftRewardTotalSupply:I}}async function k(e,n,a){let i=await T(e,n,a);t(l.Z.slice.actions.updateUserLiquidityInfo(i))}return{userLpAmount:u,initialLpAmount:w,userInLPPoolPercentage:g,updatePairBalance:async function(n,s){s=null!=s?s:i.ethInfo.walletAddress;let o=a.Q.getDefaultProvider(),u=new r.z(a.Q.getTargetNet().chainId,o),d="0x4200000000000000000000000000000000000006";if(!d)throw Error("Can't found NEXT_PUBLIC_WETH_ADDRESS!");let p=new r.C(n,m.TrinityTokenAbi),y=new r.C(d,m.TrinityTokenAbi),c=new r.C(e,f._),[w,g,T]=await u.all([p.balanceOf(e),y.balanceOf(e),c.balanceOf(s)]);t(l.Z.slice.actions.updateUniswapV2PairWithdrawInfo({tokenBalanceForLP:w,wethBalanceForLP:g,userPairTokenBalance:T}))},getUserLiquidityInfo:T,updateUserLiquidityInfo:k}}},54881:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});let a=[{inputs:[{internalType:"address",name:"_stakingToken",type:"address"},{internalType:"address",name:"_factory",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardPaid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"liquidityRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"sendBack",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_liquidityRate",type:"uint256"}],name:"setLiquidityRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_stakingReward",type:"address"}],name:"setStakingReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"stakeFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingRewards",outputs:[{internalType:"contract IStakingRewards",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stakingToken",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"nftAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]},32773:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});let a=[{inputs:[{internalType:"address",name:"_rewardsDistribution",type:"address"},{internalType:"address",name:"_rewardsToken",type:"address"},{internalType:"address",name:"_stakingToken",type:"address"},{internalType:"address",name:"_trinityswapV2Router",type:"address"},{internalType:"address",name:"_trinityswapV2Factory",type:"address"},{internalType:"address",name:"_stakingRewardsEvent",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nft",type:"address"},{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"nftUnLock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"notifyRewardAmount",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardsDistribution",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardsToken",outputs:[{internalType:"contract IWETH",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"stakeFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"trinityswapV2Factory",outputs:[{internalType:"contract ITrinityswapV2Factory",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"trinityswapV2Router",outputs:[{internalType:"contract ITrinityV2Router02",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]},46493:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var a=n(3682),i=n(81939),r=n(13965),s=n(74439),o=n(83123),u=n(45650),l=n(49481),d=n(7797),p=n(71002),y=n(13167),c=n(6178),m=n(69356),f=n(68651),w=n(64798),g=n.n(w),T=n(2265),k=n(43949),b=n(59868);let v=null;function h(){var e;let{t}=(0,k.$G)(["common"]),n=(0,c.T)(),w=(0,c.C)(e=>e.token),h=(0,c.C)(e=>e.user),I=a.Q.getTargetNet(),A=(0,l.Z)(h.ethInfo.walletAddress),S=(0,d.Z)(null!==(e=w.tokenSwapPage.tokenAddress)&&void 0!==e?e:""),C=(0,p.Z)(),R=V(),M=T.useMemo(()=>{if(w.tokenDetail.tokenAddress&&w.tokenDetail.tokenSymbol){var e;return{tokenId:null!==(e=w.tokenDetail.tokenId)&&void 0!==e?e:"",tokenImage:w.tokenDetail.tokenImage||"/images/default-token.svg",tokenName:w.tokenDetail.tokenName||"Unknown Token",tokenSymbol:w.tokenDetail.tokenSymbol,tokenAddress:w.tokenDetail.tokenAddress}}return R},[]),[x,Z]=T.useState({tokenIn:R,amountIn:"",tokenOut:M,amountOut:""});T.useEffect(()=>{if(w.tokenDetail.tokenAddress&&w.tokenDetail.tokenSymbol){var e;let t={tokenId:null!==(e=w.tokenDetail.tokenId)&&void 0!==e?e:"",tokenImage:w.tokenDetail.tokenImage||"/images/default-token.svg",tokenName:w.tokenDetail.tokenName||"Unknown Token",tokenSymbol:w.tokenDetail.tokenSymbol,tokenAddress:w.tokenDetail.tokenAddress};("ETH"===x.tokenOut.tokenSymbol||x.tokenOut.tokenAddress!==w.tokenDetail.tokenAddress)&&Z(e=>({...e,tokenOut:t}))}},[w.tokenDetail.tokenAddress,w.tokenDetail.tokenSymbol]);let N=h.tokenBalances.find(e=>e.symbol===x.tokenIn.tokenSymbol),D=h.tokenBalances.find(e=>e.symbol===x.tokenOut.tokenSymbol),E=Math.pow(10,I.nativeCurrency.decimals);async function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(!h.ethInfo.walletAddress){n(m.Z.slice.actions.clearTokenBalances());return}null==v||v.cancel(),v=s.Z.sleepForAnimationFrame(e),await v.promise;try{var t,a;let[e,s]=await Promise.all([A.getETHBalance(),S.updateUserTokenBalance()]),o=i.Z.wei2eth(e),u=i.Z.wei2eth(s),l=w.tokenDetail.tokenSymbol,d=w.tokenDetail.tokenName,p=w.tokenDetail.tokenImage,c=null!==(t=w.tokenSwapPage.tokenAddress)&&void 0!==t?t:w.tokenDetail.tokenAddress;if(!l||!d){let e=r.r.getInstance().getProvider(),t=i.Z.getInstance(e),n=await t.getSigner(),a=new b.CH(c,y.TrinityTokenAbi,n);if(!l)try{l=await a.symbol()}catch(e){console.error("获取代币符号失败:",e),l="Unknown"}if(!d)try{d=await a.name()}catch(e){console.error("获取代币名称失败:",e),d="Unknown Token"}}p||(p="/images/default-token.svg"),n(m.Z.slice.actions.updateETHWalletBalance(o));let f=[{icon:p,chainId:I.chainId,name:d,address:c,decimals:I.nativeCurrency.decimals,symbol:l,balance:u},{icon:R.tokenImage,chainId:I.chainId,name:R.tokenName,address:R.tokenAddress,decimals:null!==(a=R.tokenDecimals)&&void 0!==a?a:I.nativeCurrency.decimals,symbol:R.tokenSymbol,balance:o}];n(m.Z.slice.actions.updateTokenBalances(f));let g=x.tokenIn,T=x.tokenOut;g.tokenSymbol!==l&&g.tokenAddress.toLowerCase()===c.toLowerCase()?Z({...x,tokenIn:{...g,tokenSymbol:l,tokenName:d,tokenImage:p}}):T.tokenSymbol!==l&&T.tokenAddress.toLowerCase()===c.toLowerCase()&&Z({...x,tokenOut:{...T,tokenSymbol:l,tokenName:d,tokenImage:p}})}catch(e){console.error("更新余额失败:",e)}}function O(){return x.tokenIn.tokenSymbol.toUpperCase()===I.nativeCurrency.symbol.toUpperCase()}function F(){return x.tokenIn.tokenSymbol.toUpperCase()===R.tokenSymbol.toUpperCase()}function B(e){let[t,n]=w.uniswapV2PairInfo.token0===R.tokenAddress?[w.uniswapV2PairInfo.reserve0,w.uniswapV2PairInfo.reserve1]:[w.uniswapV2PairInfo.reserve1,w.uniswapV2PairInfo.reserve0];return(null!=e?e:O())?[t,n]:[n,t]}function L(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{roundingMode:n=f.Z.ROUND_DOWN,isBuy:a,floarFix:i=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(""===e)return"";let r=new f.Z(E).multipliedBy(e),[s,o]=B(a),u=(t?C.getAmountOutLocal(BigInt(r.toFixed(0,n)),s,o):C.getAmountOutLocalWithoutFee(BigInt(r.toFixed(0,n)),s,o)).toString();return new f.Z(u).div(E).multipliedBy(i).toFixed(w.swapKeepDecimals,n)}function _(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{roundingMode:n=f.Z.ROUND_DOWN,isBuy:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(""===e)return"";let i=new f.Z(E).multipliedBy(e),[r,s]=B(a);return new f.Z(t?C.getAmountInLocal(BigInt(i.toFixed(0,n)),r,s).toString():C.getAmountInLocalWithoutFee(BigInt(i.toFixed(0,n)),r,s).toString()).div(E).toFixed(w.swapKeepDecimals,n)}let U=g()(async e=>{if(I.nativeCurrency.decimals,""!==(e=e.replaceAll(",",""))){var t,n,a;let i=new f.Z(Math.min(Number(null!==(n=null===(t=h.tokenBalances.find(e=>e.symbol===x.tokenIn.tokenSymbol))||void 0===t?void 0:t.balance)&&void 0!==n?n:0),Number.MAX_VALUE)),r=new f.Z(e);if(r.isNaN()){Z({...x,amountIn:"",amountOut:""});return}if(r.isZero()){Z({...x,amountIn:e,amountOut:""});return}r.gt(i)&&(r=i),e=(null!==(a=r.decimalPlaces())&&void 0!==a?a:0)>w.swapKeepDecimals?r.toFixed(w.swapKeepDecimals,f.Z.ROUND_DOWN):r.toString()}Z({...x,amountIn:e}),(0,T.startTransition)(()=>{if(""===e){Z({...x,amountIn:e,amountOut:""});return}let t=L(e);Z({...x,amountIn:e,amountOut:t})})},16),H=g()(async e=>{if(""!==(e=e.replaceAll(",",""))){var n;let a=new f.Z(Number.MAX_VALUE),i=new f.Z(e);if(i.isNaN()){Z({...x,amountOut:""});return}if(i.isZero()){Z({...x,amountOut:e});return}i.gt(a)&&(i=a),e=(null!==(n=i.decimalPlaces())&&void 0!==n?n:0)>w.swapKeepDecimals?i.toFixed(w.swapKeepDecimals,f.Z.ROUND_DOWN):i.toString();let[r,s]=B(),u=new f.Z(E).multipliedBy(e);u.gt(s.toString())&&(e=(u=new f.Z(s.toString()).div(E)).toFixed(w.swapKeepDecimals,f.Z.ROUND_DOWN),(0,o.L6)(t("Insufficient liquidity",{value:"".concat(e," ").concat(x.tokenOut.tokenSymbol)})))}Z({...x,amountOut:e}),(0,T.startTransition)(()=>{if(""===e){Z({...x,amountIn:"",amountOut:""});return}let t=_(e);Z({...x,amountIn:t,amountOut:e})})},16),Q=Number("0.18");function V(){let e=new u.Sp,t=new u.iM;return{tokenId:"0",tokenImage:t.icon,tokenName:e.name,tokenSymbol:e.symbol,tokenAddress:t.address}}return{LAMP:E,TOKEN_SWAP_MAX_PERCENT:Q,swapTransferInfo:x,setSwapTransferInfo:Z,updateTransactionBalance:P,tokenInBalanceInfo:N,tokenOutBalanceInfo:D,isSwapSelectBuy:O,isAddLPFirstIsETH:F,getReserves:B,getLPStoreKeys:function(){return F()?["amountETHMin","amountTokenMin"]:["amountTokenMin","amountETHMin"]},getAmountOutByAmountIn:L,getAmountInByAmountOut:_,onAmountInChange:U,onAmountOutChange:H,getMaxBuyTokenAmount:function(){let e=w.uniswapV2PairInfo.token0===R.tokenAddress?w.uniswapV2PairInfo.reserve1:w.uniswapV2PairInfo.reserve0;return new f.Z(e.toString()).multipliedBy(Q)},initWETHTokenSimpleInfo:V}}},34159:function(){}}]);