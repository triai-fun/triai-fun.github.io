(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1817],{75926:function(e,t,n){"use strict";var a=n(58078),i=n(65521);t.Z=function(e){let{t,i18n:n}=(0,i.$G)(e),[r,s]=a.useState(!1);return a.useEffect(()=>{s(!0)},[]),{t:a.useCallback((e,a)=>{let i=r?t(e,a):n.t(e,{...a||{},lng:"en"});return"string"==typeof i?i:String(i)},[r,t,n]),isHydrated:r,rawT:t,i18n:n}}},6677:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var a,i,r=n(37821),s=n(58078);n(68379);var o=n(753),l=n.n(o),d=n(29223);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var p=function(e){return d.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),a||(a=d.createElement("g",{clipPath:"url(#icon-close_svg__a)"},d.createElement("path",{fill:"#666",d:"m5.637 3.938.055.05 6.795 6.796 6.545-6.545a1 1 0 0 1 1.465 1.36l-.05.055-6.546 6.544 6.545 6.544a1 1 0 0 1-1.36 1.466l-.054-.051-6.545-6.545-6.795 6.796a1 1 0 0 1-1.465-1.36l.05-.054 6.796-6.796-6.795-6.795a1 1 0 0 1 1.359-1.465"}))),i||(i=d.createElement("defs",null,d.createElement("clipPath",{id:"icon-close_svg__a"},d.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))},c=n(50239),y=n(40794),m=n(31638),f=n(98018);function v(e){let{title:t,showCloseButton:n,children:a,className:i,onRequestClose:o,controls:d,tipText:u,size:v="normal",...h}=e,T=(0,s.useRef)(null);n=null!=n&&n;let g={active:"flex-1 h-[50px] bg-gradient-to-r from-[#E700E6] to-[#4B4BDF] text-white font-semibold rounded-[8px]",normal:"flex-1 h-[50px] bg-[#111111] text-white font-semibold rounded-[8px]",disabled:"flex-1 h-[50px] bg-[#111111] border border-[#30251d] text-white font-semibold rounded-[8px]"};return(0,r.jsx)("div",{ref:T,className:"react-modal-contain flex justify-center items-center",children:(0,r.jsxs)(l(),{overlayClassName:"react-modal-overlay flex flex-col justify-center",onRequestClose:null!=o?o:null,className:"react-modal-content size-".concat(v," ").concat(null!=i?i:""),...h,children:[t||n?(0,r.jsxs)(c.Z,{className:"top-nav",horizontalArrangement:n?y.cV.SpaceBetween:y.cV.Center,verticalAlignment:y.v2.Center,children:[(0,r.jsx)("h1",{className:"text-[18px] font-medium modal-title",children:t}),n?(0,r.jsx)(p,{className:"cursor-pointer",onClick:()=>null==o?void 0:o()}):""]}):null,(0,r.jsx)("div",{className:"content",children:a}),(null==d?void 0:d.buttons.length)||u?(0,r.jsxs)("div",{className:"bottom flex flex-col mt-[20px] gap-[20px]",children:[(null==d?void 0:d.buttons.length)?(0,r.jsx)("div",{className:"flex justify-end gap-4 mt-[20px]",children:d.buttons.map((e,t)=>(0,r.jsx)(f.ZP,{status:f.Dv.None,className:(0,m.m6)(g[e.type],e.className),waitForClick:!0,onClick:e.onClick,children:e.text},t))}):null,u?(0,r.jsx)("p",{className:"text-[12px] text-white font-medium text-center",children:u}):null]}):null]})})}},74215:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(37821),i=n(58078);n(52284);var r=n(40812),s=n(12514);function o(e){let t=e.isEnd||!1,n=i.useRef(null),o=i.useRef(null),[l,d]=i.useState(!1);return i.useEffect(()=>{if(!o.current||!n.current)return;let t=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(e.onScrollBottom().finally(()=>{d(!1)}),d(!0))})},{root:n.current,threshold:.1});return t.observe(o.current),()=>{t.disconnect()}},[n,o]),(0,a.jsxs)("div",{className:"flex flex-col scroll-layout ".concat(e.className||""),children:[(0,a.jsx)("div",{ref:n,className:"scroll-wrapper",children:e.children}),e.loading||l?(0,a.jsx)(r.Z,{}):null,e.loading||l||t?null:(0,a.jsx)(s.Z,{ref:o,text:"Load More"})]})}},6746:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});let a=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amountToken",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountETH",type:"uint256"},{indexed:!1,internalType:"uint256",name:"liquidity",type:"uint256"}],name:"AddLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountOut",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reserveA",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reserveB",type:"uint256"},{indexed:!1,internalType:"uint256",name:"ts",type:"uint256"}],name:"Swap",type:"event"},{inputs:[],name:"COMMON_FEE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountTokenDesired",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"addWhiteList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"developerOperator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountIn",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountOut",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_router02",type:"address"},{internalType:"address",name:"_priceConsumerV3",type:"address"},{internalType:"address",name:"_trinityswapV2Factory",type:"address"},{internalType:"address payable",name:"_stakingRewardsFactory",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceConsumerV3",outputs:[{internalType:"contract PriceConsumerV3",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"router02",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addWhiteUser",type:"address"}],name:"setAddWhiteUser",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_dao",type:"address"}],name:"setDao",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_developer",type:"address"}],name:"setDeveloper",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_operator",type:"address"}],name:"setDeveloperOperator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_router02",type:"address"}],name:"setRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"fee",type:"uint256"}],name:"setTokenSwapFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_operator",type:"address"}],name:"setTokenSwapFeeOperator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingRewardsFactory",outputs:[{internalType:"contract IStakingRewardsFactory",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"inputAmount",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapETHForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"inputAmount",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactETHForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenSwapFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenSwapFeeOperator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"trinityswapV2Factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"usedAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whiteList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}]},64436:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var a=n(37821),i=n(58078),r=n(75286),s=n(75926),o=n(52650),l=n(58504),d=n(31638),u=n(21441),p=n(5038),c=n(38279),y=n(98018),m=n(61825),f=n(56091),v=n.n(f),h=n(15256),T=n(79819),g=n(60616),x=n(54482),w=n(23792),b=n(50239),N=n(40794),C=n(55070);n(36680);var E=n(74215),I=n(6677),k=n(65521),S=n(36051),A=n(25890),j=n(74795);n(71885),n(97554),n(60450);var M=n(73946),O=n(42132),Z=n(55952),D=n(66773);n(6746),n(12648);var L=n(67869),R=n(48616),F=n(19379);function P(e){var t,n;let{t:r}=(0,k.$G)(["dao"]);(0,p.T)(),(0,p.C)(e=>e.token),(0,p.C)(e=>e.user);let s=null!==(t=e.showResultAfterFocus)&&void 0!==t&&t,o=i.useRef(null),[l,u]=i.useState(""),[c,f]=i.useState((0,m.ki)({pageSize:100})),[I,P]=i.useState({}),[_,B]=i.useState(!1),z=i.useRef(c);i.useEffect(()=>{z.current=c},[c]);let[V,q]=i.useState(!1),U=S.Q.getTargetNet(),H=v()(function(e){u(e)});function G(t){var n;let a=null!==(n=t.silence)&&void 0!==n&&n,i=new AbortController;new h.Z;let r=Promise.resolve("");function s(e){i.abort(e)}if(c.isLoading||1!==t.page&&c.isEnd)return{promise:r,cancel:s};let o=t.page;return a||f({...c,isLoading:!0,data:[]}),{promise:r=new Z.Z().getDaoListForNodeListFilter({page:o,pageSize:c.pageSize,keyword:l,abortController:i}).then(t=>{var n,a;if(l!=l)return;if(t.hasError())return Promise.reject(t.getError());let i=z.current,r=null!==(a=t.getData())&&void 0!==a?a:[],s=[...1===o?[]:i.data,...r],d=0===t.getTotalPage()||0===r.length||r.length<i.pageSize;f({...i,pageIndex:o,isLoading:!1,isEnd:d,data:s}),null===(n=e.onTokensUpdated)||void 0===n||n.call(e,s)}).catch(e=>{T.Z.canBeIgnore(e)||(g.Z.E(e),f({...z.current,isLoading:!1}))}),cancel:s}}return i.useEffect(()=>{if(c.isLoading)return;let e=new AbortController,t={promise:Promise.resolve(0),cancel:e=>{}};return(t=O.Z.sleepForAnimationFrame(160)).promise.then(()=>{t=G({page:1})}),()=>{t.cancel(T.Z.ReactError.useEffectDestroy().asString()),e.abort(T.Z.ReactError.useEffectDestroy().asString())}},[l]),i.useEffect(()=>{function t(t){if(o.current&&!o.current.contains(t.target)){var n;u(""),null===(n=e.onRequestClose)||void 0===n||n.call(e)}}return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]),i.useEffect(()=>{async function e(){if(!c.data.length)return;B(!0);let e=new A.r6(U.rpcUrl),t=new M.z(U.chainId,e),n={},a=[];for(let e of c.data){let t=new M.C(e.address,L.K);a.push(t.currentRoundNO())}try{let e=await t.all(a),i=[];for(let t=0;t<c.data.length;t++){let n=c.data[t],a=e[t],r=new M.C(n.address,L.K);i.push(r.totalVoteAmount(a),r.totalEthDone(a))}let r=await t.all(i);for(let e=0;e<c.data.length;e++){let t=c.data[e],a=r[2*e],i=r[2*e+1],s=new F.Z("0.1"),o=new F.Z(R.Z.wei2eth(a)),l=new F.Z(R.Z.wei2eth((null!=i?i:0n)/BigInt(j.fi("0.1"))*BigInt(j.fi("0.1")))),d=o.plus(l);n[t.id]=Math.floor(d.div(s).toNumber())}P(n)}catch(e){g.Z.E(e)}finally{B(!1)}}(async()=>{await e()})()},[c.data,U.rpcUrl,U.chainId]),(0,a.jsxs)("div",{className:"dao-search-contain text-secondary ".concat(null!==(n=e.className)&&void 0!==n?n:""," ").concat(s?"show-result-after-focus":""," ").concat(V?"focus-fixed":""),ref:o,children:[(0,a.jsx)(x.ZP,{className:"h-[50px] leading-[50px] search-token-bar",placeHolder:r("SearchByDAOName"),value:l,onInputChange:H,onClick:()=>q(!0),searchButton:!1}),(0,a.jsxs)(E.Z,{className:"search-result-contain",loading:c.isLoading,isEnd:c.isEnd,onScrollBottom:()=>c.isEnd||c.isLoading?Promise.reject("Loading"):G({page:c.pageIndex+1}).promise,children:[(0,a.jsx)("div",{className:"search-result-wrapper",children:c.data.length?(0,a.jsxs)("div",{className:"search-result",children:[(0,a.jsx)(w.Z,{className:"search-result-table",children:(0,a.jsx)(w.Z,{className:"table-body",children:c.data.map((t,n)=>{var i;return(0,a.jsxs)(b.Z,{horizontalArrangement:N.cV.SpaceBetween,verticalAlignment:N.v2.Center,onClick:()=>{if(q(!1),e.onTokenClick){e.onTokenClick(t,n);return}},className:(0,d.m6)("cursor-pointer hover table-row",e.tokenId===t.id?"active":null),children:[(0,a.jsx)("span",{className:"main",children:(0,a.jsxs)(b.Z,{horizontalArrangement:N.cV.SpaceBetween,verticalAlignment:N.v2.Center,className:"main-contain",children:[(0,a.jsx)(C.LazyLoadImage,{src:t.icon,alt:"",className:"logo"}),(0,a.jsx)(w.Z,{horizontalAlignment:N.v2.Start,children:(0,a.jsx)("p",{className:"title",children:t.symbol})})]})}),(0,a.jsx)("div",{className:"flex items-center gap-2 balance",children:_?(0,a.jsx)("span",{className:"text-gray-400",children:"Loading..."}):(0,a.jsx)(D.eO,{value:null!==(i=I[t.id])&&void 0!==i?i:0})})]},t.id)})})}),0===c.data.length?(0,a.jsx)("div",{className:"tips text-center",children:r("NoData")}):null]}):null}),s?(0,a.jsx)(y.ZP,{className:"w-full btn-close",status:y.Dv.Active,onClick:()=>{var t;q(!1),null==e||null===(t=e.onRequestClose)||void 0===t||t.call(e)},children:"Close"}):null]})]})}function _(e){let{isOpen:t,onRequestClose:n,onSelect:i,tokenId:r,className:s,tokenAddress:o}=e,{t:l}=(0,k.$G)(["dao"]);return(0,a.jsx)(I.Z,{className:(0,d.m6)("",s),isOpen:t,onRequestClose:n,title:l("SelectDAOTitle"),showCloseButton:!0,size:"small",children:(0,a.jsx)(P,{tokenId:r,onTokenClick:e=>{i(e),n()},onRequestClose:n,tokenAddress:o})})}function B(e){var t,n,m,f,v,h;let T=(0,l.useRouter)(),{t:g}=(0,s.Z)(["dao"]),x=(0,p.T)(),w=(0,p.C)(e=>e.dao),[b,N]=i.useState(!1),C=[{title:g("TabVote"),url:"/dao/node",target:o.r.VotingTabEnum.VOTE},{title:g("TabEWV"),url:"/dao/ewv",target:o.r.VotingTabEnum.EWV},{title:g("TabNode"),url:"/dao/user",target:o.r.VotingTabEnum.NODE},{title:g("TabGovernance",{ns:"dao"}),url:"/dao/governance",target:o.r.VotingTabEnum.GOVERNANCE}];return(0,a.jsxs)("div",{className:"flex flex-col items-stretch md:items-center",children:[(0,a.jsx)(r.Z,{className:(0,d.m6)("mb-10",e.className),tabItemClassName:()=>"w-[25%] md:w-[180px]",tabItemTitleClassName:()=>"w-full",displayType:r.L.BgGradient,activeIndex:C.findIndex(t=>t.target===e.activeTarget),tabList:C,onClick:e=>{let t=new URLSearchParams(location.search);if(!t.has(u.Z.Params.DAO_ADDRESS))return T.push(e);let n=new URL(e,location.origin),a=new URLSearchParams(n.search);a.set(u.Z.Params.DAO_ADDRESS,t.get(u.Z.Params.DAO_ADDRESS)),n.search=a.toString(),T.push("".concat(n.origin).concat(n.pathname,"?").concat(a.toString()))},children:(0,a.jsx)("li",{className:"item w-full",children:(0,a.jsxs)(c.ZP,{autoBorder:!0,autoMargin:!1,autoPadding:!1,className:"w-full md:w-[385px] mx-auto mt-6 p-[7px_10px] flex justify-between items-center text-[14px] font-medium cursor-pointer hover:opacity-90",onClick:()=>N(!0),children:[(0,a.jsx)("span",{className:"text-[#999]",children:g("SelectDAOTitle")}),(0,a.jsxs)(y.ZP,{size:y.qE.Customize,status:y.Dv.None,className:"flex items-center gap-2 pointer-events-none",children:[(0,a.jsx)("img",{src:null===(t=w.nodeListFilters.selectedDao)||void 0===t?void 0:t.icon,alt:"",width:25,height:25,className:"w-[25px] h-[25px] object-cover rounded-full"}),(0,a.jsx)("span",{className:"font-medium",children:null===(n=w.nodeListFilters.selectedDao)||void 0===n?void 0:n.symbol}),(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})})}),(0,a.jsx)(_,{className:"token-detail-token-search-view",isOpen:b,tokenId:null!==(v=null===(m=w.nodeListFilters.selectedDao)||void 0===m?void 0:m.id)&&void 0!==v?v:null,onRequestClose:()=>N(!1),onSelect:e=>{x(u.Z.slice.actions.updateSelectedDao(e));let t=new URLSearchParams(location.search);t.set(u.Z.Params.DAO_ADDRESS,e.address),T.push("".concat(location.pathname,"?").concat(t.toString()))},tokenAddress:null!==(h=null===(f=w.nodeListFilters.selectedDao)||void 0===f?void 0:f.address)&&void 0!==h?h:null})]})}},88390:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var a=n(58078),i=n(52650),r=n(65521),s=n(5038),o=n(73946),l=n(67869),d=n(36051),u=n(60616),p=n(21441),c=n(48616);function y(){var e,t,n,y,m,f,v,h,T,g,x,w,b,N,C,E,I,k,S,A;let j=(0,s.T)(),{t:M,i18n:O}=(0,r.$G)(["dao"]),Z=(0,s.C)(e=>e.dao),D="/images/dao/",L=new Map([[i.r.NodeType.NONE,{color1:"#000",color2:"#fff",title:M("notNode.title"),description:M("notNode.description"),image:"".concat(D,"not-node.png"),upgradeInfo:{userNodeCount:0n,requiredNodeCount:0n,ethPrice:0n}}],[i.r.NodeType.CANDIDATE,{color1:"#E700E6",color2:"#4B4BDF",title:M("candidateNode.title"),description:M("candidateNode.description",{title:M("candidateNode.title").toLocaleLowerCase(),token:Z.tokenInfo.symbol,value:c.Z.wei2eth(null!==(x=null===(e=Z.daoContractInfo)||void 0===e?void 0:e.applyCandidateEthAmount)&&void 0!==x?x:0n)}),image:"".concat(D,"candidate-node.png"),upgradeInfo:{userNodeCount:0n,requiredNodeCount:0n,ethPrice:null!==(w=null===(t=Z.daoContractInfo)||void 0===t?void 0:t.applyCandidateEthAmount)&&void 0!==w?w:0n}}],[i.r.NodeType.MASTER,{color1:"#EA7D01",color2:"#B06D00",title:M("mainNode.title"),description:M("mainNode.description",{prevTitle:M("candidateNode.title").toLocaleLowerCase(),title:M("mainNode.title").toLocaleLowerCase(),nodeCount:String(null!==(b=null===(n=Z.daoContractInfo)||void 0===n?void 0:n.votesForMaster)&&void 0!==b?b:0n)}),image:"".concat(D,"main-node.png"),upgradeInfo:{userNodeCount:null!==(N=null===(y=Z.userInfo)||void 0===y?void 0:y.userInfo.sonCount)&&void 0!==N?N:0n,requiredNodeCount:null!==(C=null===(m=Z.daoContractInfo)||void 0===m?void 0:m.votesForMaster)&&void 0!==C?C:0n,ethPrice:0n}}],[i.r.NodeType.SUPER,{color1:"#00E7D4",color2:"#4B4BDF",title:M("superNode.title"),description:M("superNode.description",{prevTitle:M("mainNode.title").toLocaleLowerCase(),title:M("superNode.title").toLocaleLowerCase(),token:Z.tokenInfo.symbol,value:c.Z.wei2eth(null!==(E=null===(f=Z.daoContractInfo)||void 0===f?void 0:f.applySuperEthAmount)&&void 0!==E?E:0n),nodeCount:String(null!==(I=null===(v=Z.daoContractInfo)||void 0===v?void 0:v.masterForSuper)&&void 0!==I?I:0n)}),image:"".concat(D,"super-node.png"),upgradeInfo:{userNodeCount:null!==(k=null===(h=Z.userInfo)||void 0===h?void 0:h.userInfo.sonMasterNodeCount)&&void 0!==k?k:0n,requiredNodeCount:null!==(S=null===(T=Z.daoContractInfo)||void 0===T?void 0:T.masterForSuper)&&void 0!==S?S:0n,ethPrice:null!==(A=null===(g=Z.daoContractInfo)||void 0===g?void 0:g.applySuperEthAmount)&&void 0!==A?A:0n}}]]),R=Array.from(L.entries()),F=new Map;R.forEach((e,t)=>{let n=e[0],a=R[t+1];F.set(n,{nextKey:a?Number(a[0]):void 0,nextValue:a?a[1]:void 0})});let P=new Map(Z.nodesCurrentRoundInfo.map(e=>["".concat(e.daoAddress,",").concat(e.nodeAddress),e])),_=a.useCallback(async(e,t)=>{if(0===e.length)return[];let n=new o.C(t.daoAddress,l.K),a=e.map(e=>n.promotions(t.currentRoundNO,e)),i=d.Q.getDefaultProvider(),r=new o.z(d.Q.getTargetNet().chainId,i),s=await r.all(a),p=e.map((e,n)=>({nodeAddress:e,daoAddress:t.daoAddress,promotionInfo:s[n]}));return u.Z.I("getNodeCurrentRoundSimpleInfo",p),p},[]),B=a.useCallback(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!(t=null!=t?t:Z.daoContractInfo)){u.Z.I("updateNodeCurrentRoundInfoSimpleInfo skipped: daoAddress/currentRoundNO not ready");return}let n=await _([e,Z.nodes.data.map(e=>e.walletAddress)].flat(),t);j(p.Z.slice.actions.updateNodesCurrentRoundInfo(n))},[j,Z.daoContractInfo,Z.nodes.data,_]),z=a.useCallback(async(e,t)=>{var n;let a=null!=t?t:null===(n=Z.daoContractInfo)||void 0===n?void 0:n.daoAddress;if(!a)throw Error("daoAddress can't be empty");try{let t=new o.C(a,l.K),n=d.Q.getDefaultProvider(),i=new o.z(d.Q.getTargetNet().chainId,n),r=t.users(e),s=await i.all([r]),p=Number(s[0].nodeType);return u.Z.I("getNodeTypeByAddress",{nodeAddress:e,nodeType:p}),p}catch(e){return u.Z.E("getNodeTypeByAddress error",e),i.r.NodeType.NONE}},[Z.daoContractInfo]);return a.useEffect(()=>{L.set(i.r.NodeType.MASTER,{...L.get(i.r.NodeType.MASTER),title:M("mainNode.title")}),L.set(i.r.NodeType.SUPER,{...L.get(i.r.NodeType.SUPER),title:M("superNode.title")})},[O.language]),{nodeMap:L,nodeToNextMap:F,getNodeCurrentRoundSimpleInfo:_,updateNodeCurrentRoundInfoSimpleInfo:B,nodeCurrentRoundSimpleInfoMap:P,getNodeTypeByAddress:z}}},68379:function(){},52284:function(){},36680:function(){}}]);