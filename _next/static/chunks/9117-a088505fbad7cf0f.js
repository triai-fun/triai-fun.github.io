(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9117],{48423:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var a=n(57437);n(2265),n(53953);var i=n(22448),r=n(10867),s=n(3682),u=n(53335);function d(t){let{chainId:e,address:n,text:d,children:o,className:p,...l}=t,y=(0,a.jsx)(i.Z,{children:n}),c=new s.Q(e).getAddressUrl(n);return(0,a.jsx)(r.Z,{placement:"top",speaker:y,trigger:"hover",children:(0,a.jsx)("a",{className:(0,u.m6)("component-chain-address-link pointer hover underline",p),href:c,target:"_blank",...l,children:null!=d?d:n})})}},5664:function(t,e,n){"use strict";n.d(e,{Dp:function(){return k},ZP:function(){return T},we:function(){return h}});var a=n(3682),i=n(21707),r=n(59868),s=n(33082),u=n(54881),d=n(81939),o=n(13965),p=n(2265),l=n(6178),y=n(76211),c=n(83123),w=n(43949),f=n(10433),m=n(43009),g=n(97887);function T(t){let{t:e}=(0,w.$G)(["common"]),n=(0,l.C)(t=>t.global),[s,u]=p.useState({cap:0n,price:0n,startTs:0,endTs:0,nftStakingRewards:"",walletMaxSupply:0n,creator:"",imageAddress:"",externalLink:"",totalSupply:0n,maxMintAmount:0});async function y(e){if(!(e=e||t))throw Error("Can't found nftAddress!");let n=new i.C(e,g.n),r=a.Q.getDefaultProvider(),s=new i.z(a.Q.getTargetNet().chainId,r),[u,d,o,p,l,y,c,w,f]=await s.all([n.cap(),n.price(),n.startTs(),n.endTs(),n.stakingRewards(),n.creator(),n.imageAddress(),n.externalLink(),n.totalSupply()]),T=BigInt("1000");return{cap:u,price:d,startTs:m.Z.Time.fromTimestamp(o).toJSTime(),endTs:m.Z.Time.fromTimestamp(p).toJSTime(),nftStakingRewards:l,walletMaxSupply:T,creator:y,imageAddress:c,externalLink:w,totalSupply:f,maxMintAmount:1e3}}async function T(t){u(await y(t))}async function h(e,i){if(!(i=i||t))throw Error("Can't found nftAddress!");e=null!=e?e:Math.floor(n.currentTime/1e3);let s=o.r.getInstance(),u=a.Q.getTargetNet(),p=d.Z.getInstance(s.getProvider(),u.chainId),l=await p.getSigner(),y=new r.CH(i,g.n,l),c=await y.setEndTs(e);return await c.wait()}class k extends c.HU{asToastMessage(){let t=super.asToastMessage();if(f.Z.I("message",t),"string"!=typeof t)return t;let n=e("TrinityNFT"),[a,...i]=t.split(":");return(null==i?void 0:i.length)>0?[n,...i].join(":"):t}}return{nftInfo:s,setNftInfo:u,getInfo:y,updateInfo:T,setEnd:h,NFTToastMessageWrapper:k,refund:async function(e,n){if(!(n=n||t))throw Error("Can't found nftAddress!");let i=o.r.getInstance(),s=a.Q.getTargetNet(),u=d.Z.getInstance(i.getProvider(),s.chainId),p=await u.getSigner(),l=new r.CH(n,g.n,p),y=await l.refund(BigInt(e));return await y.wait()},refundAll:async function(e){if(!(e=e||t))throw Error("Can't found nftAddress!");let n=o.r.getInstance(),i=a.Q.getTargetNet(),s=d.Z.getInstance(n.getProvider(),i.chainId),u=await s.getSigner(),p=new r.CH(e,g.n,u),l=await p.refundAll();return await l.wait()}}}function h(t,e){function n(n,a){if(n=n||t,a=a||e,!n)throw Error("Can't found nftStakingRewardsAddress!");let r=new i.C(n,u.M);return[r.userRewardPerTokenPaid(a),r.rewards(a),r.balanceOf(a),r.earned(a)]}async function s(r,s){if(r=r||t,s=s||e,!r)throw Error("Can't found nftStakingRewardsAddress!");let d=new i.C(r,u.M),o=new i.z(a.Q.getTargetNet().chainId,a.Q.getDefaultProvider()),[p,l,y,c,w,f,m,g,T,h,k]=await o.all([o.getEthBalance(t),d.stakingToken(),d.stakingRewards(),d.factory(),d.lastUpdateTime(),d.rewardPerTokenStored(),d.liquidityRate(),...s?n(r,e):[]]);return{ethBalance:p,stakingToken:l,stakingRewards:y,factory:c,lastUpdateTime:w,rewardPerTokenStored:f,liquidityRate:m,userRewardPerTokenPaid:null!=g?g:0n,rewards:null!=T?T:0n,stakedAmount:null!=h?h:0n,earned:null!=k?k:0n}}async function p(t,e){let r=n(t,e),s=a.Q.getDefaultProvider(),u=new i.z(a.Q.getTargetNet().chainId,s),[d,o]=await u.all(r);return{stakedAmount:d,earned:o}}return{buildAccountInfoCall:n,getInfo:s,getAccountInfo:p,withdrawRewards:async function(e){if(!t)throw Error("Can't found nftStakingRewardsAddress!");let n=a.Q.getTargetNet(),i=o.r.getInstance(),s=d.Z.getInstance(i.getProvider(),n.chainId);await s.getChain()!==n.chainId&&await s.switchToChain(n.chainId);let p=await s.getSigner(),l=new r.CH(t,u.M,p),y=await l.withdraw(e);return await y.wait()},getRewards:async function(e){if(!(e=e||t))throw Error("Can't found nftStakingRewardsAddress!");let n=a.Q.getTargetNet(),i=o.r.getInstance(),s=d.Z.getInstance(i.getProvider(),n.chainId);await s.getChain()!==n.chainId&&await s.switchToChain(n.chainId);let p=await s.getSigner();return new r.CH(t,u.M,p).getReward()}}}function k(t){let e=(0,l.T)();async function n(e){if(!(e=null!=e?e:t))throw Error("Can't found symbol!");let n=a.Q.getNftFactoryContractAddress();if(!n)throw Error("Can't found nftFactoryAddress!");let r=new i.C(n,s.h),u=new i.z(a.Q.getTargetNet().chainId,a.Q.getDefaultProvider()),[d,o]=await u.all([r.nftInfoBySymbol(e),r.tokenInfoBySymbol(e)]);return{nftAddress:d,tokenAddress:o}}async function r(t){let a=await n(t);return e(y.Z.slice.actions.updateSymbolInfo(a)),a}return{getInfo:n,updateInfo:r}}},54881:function(t,e,n){"use strict";n.d(e,{M:function(){return a}});let a=[{inputs:[{internalType:"address",name:"_stakingToken",type:"address"},{internalType:"address",name:"_factory",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardPaid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"liquidityRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"sendBack",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_timestamp",type:"uint256"}],name:"setInitTimestamps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_liquidityRate",type:"uint256"}],name:"setLiquidityRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_stakingReward",type:"address"}],name:"setStakingReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"stakeFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingRewards",outputs:[{internalType:"contract IStakingRewards",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stakingToken",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"nftAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]},53953:function(){}}]);