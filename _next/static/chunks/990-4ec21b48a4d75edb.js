(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[990],{61247:function(e,t,n){"use strict";var a=n(2265),i=n(43949);t.Z=function(e){let{t,i18n:n}=(0,i.$G)(e),[s,r]=a.useState(!1);return a.useEffect(()=>{r(!0)},[]),{t:a.useCallback((e,a)=>{let i=s?t(e,a):n.t(e,{...a||{},lng:"en"});return"string"==typeof i?i:String(i)},[s,t,n]),isHydrated:s,rawT:t,i18n:n}}},56679:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var a,i,s=n(57437),r=n(2265);n(26679);var l=n(4810),u=n.n(l),o=n(94746);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var p=function(e){return o.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),a||(a=o.createElement("g",{clipPath:"url(#icon-close_svg__a)"},o.createElement("path",{fill:"#666",d:"m5.637 3.938.055.05 6.795 6.796 6.545-6.545a1 1 0 0 1 1.465 1.36l-.05.055-6.546 6.544 6.545 6.544a1 1 0 0 1-1.36 1.466l-.054-.051-6.545-6.545-6.795 6.796a1 1 0 0 1-1.465-1.36l.05-.054 6.796-6.796-6.795-6.795a1 1 0 0 1 1.359-1.465"}))),i||(i=o.createElement("defs",null,o.createElement("clipPath",{id:"icon-close_svg__a"},o.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))},c=n(72790),y=n(11340),m=n(53335),f=n(65435);function h(e){let{title:t,showCloseButton:n,children:a,className:i,onRequestClose:l,controls:o,tipText:d,size:h="normal",...T}=e,v=(0,r.useRef)(null);n=null!=n&&n;let x={active:"flex-1 h-[50px] bg-gradient-to-r from-[#E700E6] to-[#4B4BDF] text-white font-semibold rounded-[8px]",normal:"flex-1 h-[50px] bg-[#111111] text-white font-semibold rounded-[8px]",disabled:"flex-1 h-[50px] bg-[#111111] border border-[#30251d] text-white font-semibold rounded-[8px]"};return(0,s.jsx)("div",{ref:v,className:"react-modal-contain flex justify-center items-center",children:(0,s.jsxs)(u(),{overlayClassName:"react-modal-overlay flex flex-col justify-center",onRequestClose:null!=l?l:null,className:"react-modal-content size-".concat(h," ").concat(null!=i?i:""),...T,children:[t||n?(0,s.jsxs)(c.Z,{className:"top-nav",horizontalArrangement:n?y.cV.SpaceBetween:y.cV.Center,verticalAlignment:y.v2.Center,children:[(0,s.jsx)("h1",{className:"text-[18px] font-medium modal-title",children:t}),n?(0,s.jsx)(p,{className:"cursor-pointer",onClick:()=>null==l?void 0:l()}):""]}):null,(0,s.jsx)("div",{className:"content",children:a}),(null==o?void 0:o.buttons.length)||d?(0,s.jsxs)("div",{className:"bottom flex flex-col mt-[20px] gap-[20px]",children:[(null==o?void 0:o.buttons.length)?(0,s.jsx)("div",{className:"flex justify-end gap-4 mt-[20px]",children:o.buttons.map((e,t)=>(0,s.jsx)(f.ZP,{status:f.Dv.None,className:(0,m.m6)(x[e.type],e.className),waitForClick:!0,onClick:e.onClick,children:e.text},t))}):null,d?(0,s.jsx)("p",{className:"text-[12px] text-white font-medium text-center",children:d}):null]}):null]})})}},69787:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(57437),i=n(2265);n(76360);var s=n(52926),r=n(66917);function l(e){let t=e.isEnd||!1,n=i.useRef(null),l=i.useRef(null),[u,o]=i.useState(!1);return i.useEffect(()=>{if(!l.current||!n.current)return;let t=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(e.onScrollBottom().finally(()=>{o(!1)}),o(!0))})},{root:n.current,threshold:.1});return t.observe(l.current),()=>{t.disconnect()}},[n,l]),(0,a.jsxs)("div",{className:"flex flex-col scroll-layout ".concat(e.className||""),children:[(0,a.jsx)("div",{ref:n,className:"scroll-wrapper",children:e.children}),e.loading||u?(0,a.jsx)(s.Z,{}):null,e.loading||u||t?null:(0,a.jsx)(r.Z,{ref:l,text:"Load More"})]})}},45556:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});let a=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amountToken",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountETH",type:"uint256"},{indexed:!1,internalType:"uint256",name:"liquidity",type:"uint256"}],name:"AddLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amountIn",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amountOut",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reserveA",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reserveB",type:"uint256"},{indexed:!1,internalType:"uint256",name:"ts",type:"uint256"}],name:"Swap",type:"event"},{inputs:[],name:"COMMON_FEE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountTokenDesired",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"addWhiteList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"developerOperator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountIn",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountOut",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_router02",type:"address"},{internalType:"address",name:"_priceConsumerV3",type:"address"},{internalType:"address",name:"_trinityswapV2Factory",type:"address"},{internalType:"address payable",name:"_stakingRewardsFactory",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceConsumerV3",outputs:[{internalType:"contract PriceConsumerV3",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"router02",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addWhiteUser",type:"address"}],name:"setAddWhiteUser",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_dao",type:"address"}],name:"setDao",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_developer",type:"address"}],name:"setDeveloper",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_operator",type:"address"}],name:"setDeveloperOperator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_router02",type:"address"}],name:"setRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"fee",type:"uint256"}],name:"setTokenSwapFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_operator",type:"address"}],name:"setTokenSwapFeeOperator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingRewardsFactory",outputs:[{internalType:"contract IStakingRewardsFactory",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"inputAmount",type:"uint256"},{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapETHForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"inputAmount",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactETHForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenSwapFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenSwapFeeOperator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"trinityswapV2Factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"usedAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"whiteList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}]},10990:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});var a=n(57437),i=n(2265),s=n(32223),r=n(61247),l=n(89769),u=n(99376),o=n(53335),d=n(95665),p=n(6178),c=n(68071),y=n(65435),m=n(63671),f=n(64798),h=n.n(f),T=n(88847),v=n(20605),x=n(10433),g=n(30648),b=n(72525),w=n(72790),E=n(11340),N=n(87072);n(31785);var k=n(69787),j=n(56679),S=n(43949),C=n(3682),M=n(73507),O=n(41662);n(33082),n(8113),n(79294);var Z=n(21707),A=n(74439),D=n(22928),L=n(54740);n(45556),n(97887);var I=n(40366),R=n(81939),_=n(68651);function F(e){var t,n;let{t:s}=(0,S.$G)(["dao"]);(0,p.T)(),(0,p.C)(e=>e.token),(0,p.C)(e=>e.user);let r=null!==(t=e.showResultAfterFocus)&&void 0!==t&&t,l=i.useRef(null),[u,d]=i.useState(""),[c,f]=i.useState((0,m.ki)({pageSize:100})),[j,F]=i.useState({}),[P,z]=i.useState(!1),V=i.useRef(c);i.useEffect(()=>{V.current=c},[c]);let[B,q]=i.useState(!1),H=C.Q.getTargetNet(),U=h()(function(e){d(e)});function G(t){var n;let a=null!==(n=t.silence)&&void 0!==n&&n,i=new AbortController;new T.Z;let s=Promise.resolve("");function r(e){i.abort(e)}if(c.isLoading||1!==t.page&&c.isEnd)return{promise:s,cancel:r};let l=t.page;return a||f({...c,isLoading:!0,data:[]}),{promise:s=new D.Z().getDaoListForNodeListFilter({page:l,pageSize:c.pageSize,keyword:u,abortController:i}).then(t=>{var n,a;if(u!=u)return;if(t.hasError())return Promise.reject(t.getError());let i=V.current,s=null!==(a=t.getData())&&void 0!==a?a:[],r=[...1===l?[]:i.data,...s],o=0===t.getTotalPage()||0===s.length||s.length<i.pageSize;f({...i,pageIndex:l,isLoading:!1,isEnd:o,data:r}),null===(n=e.onTokensUpdated)||void 0===n||n.call(e,r)}).catch(e=>{v.Z.canBeIgnore(e)||(x.Z.E(e),f({...V.current,isLoading:!1}))}),cancel:r}}return i.useEffect(()=>{if(c.isLoading)return;let e=new AbortController,t={promise:Promise.resolve(0),cancel:e=>{}};return(t=A.Z.sleepForAnimationFrame(160)).promise.then(()=>{t=G({page:1})}),()=>{t.cancel(v.Z.ReactError.useEffectDestroy().asString()),e.abort(v.Z.ReactError.useEffectDestroy().asString())}},[u]),i.useEffect(()=>{function t(t){if(l.current&&!l.current.contains(t.target)){var n;d(""),null===(n=e.onRequestClose)||void 0===n||n.call(e)}}return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]),i.useEffect(()=>{async function e(){if(!c.data.length)return;z(!0);let e=new M.r6(H.rpcUrl),t=new Z.z(H.chainId,e),n={},a=[];for(let e of c.data){let t=new Z.C(e.address,I.K);a.push(t.currentRoundNO())}try{let e=await t.all(a),i=[];for(let t=0;t<c.data.length;t++){let n=c.data[t],a=e[t],s=new Z.C(n.address,I.K);i.push(s.totalVoteAmount(a),s.totalEthDone(a))}let s=await t.all(i);for(let e=0;e<c.data.length;e++){let t=c.data[e],a=s[2*e],i=s[2*e+1],r=new _.Z("0.1"),l=new _.Z(R.Z.wei2eth(a)),u=new _.Z(R.Z.wei2eth((null!=i?i:0n)/BigInt(O.fi("0.1"))*BigInt(O.fi("0.1")))),o=l.plus(u);n[t.id]=Math.floor(o.div(r).toNumber())}F(n)}catch(e){x.Z.E(e)}finally{z(!1)}}(async()=>{await e()})()},[c.data,H.rpcUrl,H.chainId]),(0,a.jsxs)("div",{className:"dao-search-contain text-secondary ".concat(null!==(n=e.className)&&void 0!==n?n:""," ").concat(r?"show-result-after-focus":""," ").concat(B?"focus-fixed":""),ref:l,children:[(0,a.jsx)(g.ZP,{className:"h-[50px] leading-[50px] search-token-bar",placeHolder:s("SearchByDAOName"),value:u,onInputChange:U,onClick:()=>q(!0),searchButton:!1}),(0,a.jsxs)(k.Z,{className:"search-result-contain",loading:c.isLoading,isEnd:c.isEnd,onScrollBottom:()=>c.isEnd||c.isLoading?Promise.reject("Loading"):G({page:c.pageIndex+1}).promise,children:[(0,a.jsx)("div",{className:"search-result-wrapper",children:c.data.length?(0,a.jsxs)("div",{className:"search-result",children:[(0,a.jsx)(b.Z,{className:"search-result-table",children:(0,a.jsx)(b.Z,{className:"table-body",children:c.data.map((t,n)=>{var i;return(0,a.jsxs)(w.Z,{horizontalArrangement:E.cV.SpaceBetween,verticalAlignment:E.v2.Center,onClick:()=>{if(q(!1),e.onTokenClick){e.onTokenClick(t,n);return}},className:(0,o.m6)("cursor-pointer hover table-row",e.tokenId===t.id?"active":null),children:[(0,a.jsx)("span",{className:"main",children:(0,a.jsxs)(w.Z,{horizontalArrangement:E.cV.SpaceBetween,verticalAlignment:E.v2.Center,className:"main-contain",children:[(0,a.jsx)(N.LazyLoadImage,{src:t.icon,alt:"",className:"logo"}),(0,a.jsx)(b.Z,{horizontalAlignment:E.v2.Start,children:(0,a.jsx)("p",{className:"title",children:t.symbol})})]})}),(0,a.jsx)("div",{className:"flex items-center gap-2 balance",children:P?(0,a.jsx)("span",{className:"text-gray-400",children:"Loading..."}):(0,a.jsx)(L.eO,{value:null!==(i=j[t.id])&&void 0!==i?i:0})})]},t.id)})})}),0===c.data.length?(0,a.jsx)("div",{className:"tips text-center",children:s("NoData")}):null]}):null}),r?(0,a.jsx)(y.ZP,{className:"w-full btn-close",status:y.Dv.Active,onClick:()=>{var t;q(!1),null==e||null===(t=e.onRequestClose)||void 0===t||t.call(e)},children:"Close"}):null]})]})}function P(e){let{isOpen:t,onRequestClose:n,onSelect:i,tokenId:s,className:r,tokenAddress:l}=e,{t:u}=(0,S.$G)(["dao"]);return(0,a.jsx)(j.Z,{className:(0,o.m6)("",r),isOpen:t,onRequestClose:n,title:u("SelectDAOTitle"),showCloseButton:!0,size:"small",children:(0,a.jsx)(F,{tokenId:s,onTokenClick:e=>{i(e),n()},onRequestClose:n,tokenAddress:l})})}function z(e){var t,n,m,f,h,T;let v=(0,u.useRouter)(),{t:x}=(0,r.Z)(["dao"]),g=(0,p.T)(),b=(0,p.C)(e=>e.dao),[w,E]=i.useState(!1),N=[{title:x("TabVote"),url:"/dao/node",target:l.r.VotingTabEnum.VOTE},{title:x("TabEWV"),url:"/dao/ewv",target:l.r.VotingTabEnum.EWV},{title:x("TabNode"),url:"/dao/user",target:l.r.VotingTabEnum.NODE},{title:x("TabGovernance",{ns:"dao"}),url:"/dao/governance",target:l.r.VotingTabEnum.GOVERNANCE}];return(0,a.jsxs)("div",{className:"flex flex-col items-stretch md:items-center",children:[(0,a.jsx)(s.Z,{className:(0,o.m6)("mb-10",e.className),tabItemClassName:()=>"w-[25%] md:w-[180px]",tabItemTitleClassName:()=>"w-full",displayType:s.L.BgGradient,activeIndex:N.findIndex(t=>t.target===e.activeTarget),tabList:N,onClick:e=>{let t=new URLSearchParams(location.search);if(!t.has(d.Z.Params.DAO_ADDRESS))return v.push(e);let n=new URL(e,location.origin),a=new URLSearchParams(n.search);a.set(d.Z.Params.DAO_ADDRESS,t.get(d.Z.Params.DAO_ADDRESS)),n.search=a.toString(),v.push("".concat(n.origin).concat(n.pathname,"?").concat(a.toString()))},children:(0,a.jsx)("li",{className:"item w-full",children:(0,a.jsxs)(c.ZP,{autoBorder:!0,autoMargin:!1,autoPadding:!1,className:"w-full md:w-[385px] mx-auto mt-6 p-[7px_10px] flex justify-between items-center text-[14px] font-medium cursor-pointer hover:opacity-90",onClick:()=>E(!0),children:[(0,a.jsx)("span",{className:"text-[#999]",children:x("SelectDAOTitle")}),(0,a.jsxs)(y.ZP,{size:y.qE.Customize,status:y.Dv.None,className:"flex items-center gap-2 pointer-events-none",children:[(0,a.jsx)("img",{src:null===(t=b.nodeListFilters.selectedDao)||void 0===t?void 0:t.icon,alt:"",width:25,height:25,className:"w-[25px] h-[25px] object-cover rounded-full"}),(0,a.jsx)("span",{className:"font-medium",children:null===(n=b.nodeListFilters.selectedDao)||void 0===n?void 0:n.symbol}),(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]})})}),(0,a.jsx)(P,{className:"token-detail-token-search-view",isOpen:w,tokenId:null!==(h=null===(m=b.nodeListFilters.selectedDao)||void 0===m?void 0:m.id)&&void 0!==h?h:null,onRequestClose:()=>E(!1),onSelect:e=>{g(d.Z.slice.actions.updateSelectedDao(e));let t=new URLSearchParams(location.search);t.set(d.Z.Params.DAO_ADDRESS,e.address),v.push("".concat(location.pathname,"?").concat(t.toString()))},tokenAddress:null!==(T=null===(f=b.nodeListFilters.selectedDao)||void 0===f?void 0:f.address)&&void 0!==T?T:null})]})}},26679:function(){},76360:function(){},31785:function(){}}]);