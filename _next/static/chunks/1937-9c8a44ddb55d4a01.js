(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1937],{59365:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437);function i(e){var t,n;return(0,a.jsx)("img",{src:"/images/icon-eth.svg",width:null!==(t=e.width)&&void 0!==t?t:20,height:null!==(n=e.height)&&void 0!==n?n:20,alt:"ETH",className:e.className})}},40066:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437);function i(e){var t,n;let i=null!==(t=e.defsPrexId)&&void 0!==t?t:"paint0";return(0,a.jsxs)("svg",{viewBox:"0 0 12 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:null!==(n=e.className)&&void 0!==n?n:"",children:[(0,a.jsx)("path",{d:"M3.99681 6.00318H1.99045V3.66242C1.99045 3.15287 2.0913 2.67781 2.29299 2.23726C2.49469 1.79671 2.77335 1.40924 3.12898 1.07484C3.48461 0.740446 3.90393 0.477707 4.38694 0.286624C4.86996 0.0955414 5.39809 -1.03773e-08 5.97134 0C6.48089 0 6.97187 0.0955414 7.44427 0.286624C7.91667 0.477707 8.33599 0.740446 8.70223 1.07484C9.06847 1.40924 9.3604 1.79671 9.57802 2.23726C9.79565 2.67781 9.90446 3.15287 9.90446 3.66242V6.00318H7.97771V4.10828C7.97771 3.43949 7.79193 2.92197 7.42038 2.55573C7.04883 2.18949 6.54459 2.00637 5.90764 2.00637C5.33439 2.00637 4.87261 2.18949 4.52229 2.55573C4.17197 2.92197 3.99681 3.43949 3.99681 4.10828V6.00318ZM10.8599 6.9586C11.1465 6.9586 11.3933 7.0621 11.6003 7.26911C11.8073 7.47611 11.9108 7.72293 11.9108 8.00955V12.9459C11.9108 13.2325 11.8604 13.5005 11.7596 13.75C11.6587 13.9995 11.5207 14.2171 11.3455 14.4029C11.1704 14.5886 10.9634 14.7346 10.7245 14.8408C10.4857 14.9469 10.2229 15 9.93631 15H1.8949C1.60828 15 1.3482 14.9469 1.11465 14.8408C0.881104 14.7346 0.682059 14.5939 0.517516 14.4188C0.352972 14.2436 0.225584 14.0393 0.13535 13.8057C0.0451166 13.5722 0 13.3227 0 13.0573V8.00955C0 7.72293 0.100849 7.47611 0.302548 7.26911C0.504246 7.0621 0.748407 6.9586 1.03503 6.9586H1.99045H3.99681H7.97771H9.90446H10.8599Z",fill:"url(#".concat(i,"_linear_20_507)")}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"".concat(i,"_linear_20_507"),x1:"-0.000176537",y1:"7.49995",x2:"11.9108",y2:"7.49995",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#E700E6"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#4B4BDF"})]})})]})}},41525:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(57437);n(2265),n(34159);var i=n(22448),s=n(10867),r=n(3682);function u(e){let{chainId:t,hash:n,text:u,children:o,className:l,...p}=e,d=(0,a.jsx)(i.Z,{children:n}),y=new r.Q(t).getTXUrl(n);return(0,a.jsx)(s.Z,{placement:"top",speaker:d,trigger:"hover",children:(0,a.jsx)("a",{className:"component-chain-hash-link pointer hover underline ".concat(null!=l?l:""),href:y,target:"_blank",...p,children:null!=u?u:n})})}},97644:function(e,t,n){"use strict";n.d(t,{ZP:function(){return m}});var a=n(57437),i=n(2265),s=n(63671),r=n(10433),u=n(74439),o=n(72525),l=n(72790),p=n(11340),d=n(52926),y=n(20605);n(83123),n(66917),n(41849),n(43949);var c=n(53335);function m(e){var t,n;let m=null!==(t=e.needRelocationAfterUpdate)&&void 0!==t&&t,f=null!==(n=e.offsetY)&&void 0!==n?n:-70,w=i.useRef(null),[T,g]=i.useState((0,s.ki)(e.pageInfo)),[k,b]=i.useTransition(),v=e.pageInfo.page||1,h=e.pageInfo.totalPage||0,I=i.useRef({isLoading:e.isLoading,emptyText:e.emptyText,loadingText:e.loadingText,onPaginationChange:e.onPaginationChange});function C(t){r.Z.L("changePagination called with page:",t);let n=e=>{};return I.current.isLoading||T.isLoading?r.Z.L("Loading, cannot change page"):(g({...T,isLoading:!0,isError:!1}),b(async()=>{r.Z.L("Starting page change transition to page:",t);try{let a=I.current.onPaginationChange({page:t});if(n=a.cancel,await a.promise.catch(e=>{if(y.Z.canBeIgnore(e))return Promise.resolve();r.Z.E(JSON.stringify(e)),g({...T,isLoading:!1,isError:!0})}),r.Z.L("Page change completed successfully"),g({...T,isLoading:!1,isError:!1}),!(null==w?void 0:w.current)||0===e.pageInfo.page||!m)return;u.Z.sleepForAnimationFrame(16).promise.then(()=>{if(!w.current)return;let e=u.Z.getOffsetTop(w.current)+f;r.Z.I("scroll to y: ",e),u.Z.scrollTo({y:e})})}catch(e){r.Z.E("Error in page change:",e)}})),n}i.useEffect(()=>{I.current={isLoading:e.isLoading,emptyText:e.emptyText,loadingText:e.loadingText,onPaginationChange:e.onPaginationChange}},[e.isLoading,e.emptyText,e.loadingText,e.onPaginationChange]),i.useEffect(()=>{let t=u.Z.sleepForAnimationFrame();return t.promise.then(()=>{var t;C(null!==(t=e.pageInfo.page)&&void 0!==t?t:1)}),()=>t.cancel("useEffect callback")},[]);let M=i.useMemo(()=>{if(h<=5)return Array.from({length:h},(e,t)=>t+1);let e=1;return e=v<=3?1:v>=h-2?h-4:v-2,Array.from({length:5},(t,n)=>e+n)},[v,h]),{showLeftEllipsis:S,showRightEllipsis:x}=i.useMemo(()=>({showLeftEllipsis:h>5&&v>3,showRightEllipsis:h>5&&v<h-2}),[v,h]),A=e=>{r.Z.L("Clicked on page ".concat(e,", current page is ").concat(v)),C(e)};return(0,a.jsxs)(o.Z,{className:(0,c.m6)("paginate-table-container",e.className),children:[(0,a.jsxs)(o.Z,{className:"paginate-wrapper w-full",children:[(0,a.jsx)("div",{className:"paginate-content w-full",ref:w,children:e.children}),(0,a.jsx)("div",{className:"h-[40px] flex justify-center items-center",children:(0,a.jsxs)(l.Z,{horizontalArrangement:p.cV.Center,verticalAlignment:p.v2.Center,className:"status-contain",children:[k||I.current.isLoading||T.isLoading?(0,a.jsx)(d.Z,{children:I.current.loadingText}):"",I.current.isLoading||T.isLoading||0!==h||!I.current.emptyText?"":(0,a.jsx)("div",{className:"paginate-table-placeholder",children:I.current.emptyText})]})})]}),h>0&&(0,a.jsx)("div",{className:"paginate-contain",children:(0,a.jsx)("div",{className:"pagination-custom",children:(0,a.jsxs)("ul",{className:"flex items-center",children:[(0,a.jsx)("li",{className:"previous ".concat(v<=1?"disabled":""),children:(0,a.jsx)("a",{onClick:()=>C(Math.max(1,v-1)),children:"<"})}),h<=5?(0,a.jsx)(a.Fragment,{children:Array.from({length:h},(e,t)=>{let n=t+1;return(0,a.jsx)("li",{className:n===v?"selected":"",children:(0,a.jsx)("a",{onClick:()=>A(n),children:n})},n)})}):M.map(e=>(0,a.jsx)("li",{className:e===v?"selected":"",children:(0,a.jsx)("a",{onClick:()=>A(e),children:e})},e)),(0,a.jsx)("li",{className:"pagination-break ".concat(x&&h>5?"":"opacity-0"),children:(0,a.jsx)("a",{className:"pagination-break-link",children:"..."})}),(0,a.jsx)("li",{className:"next ".concat(v>=h?"disabled":""),children:(0,a.jsx)("a",{onClick:()=>C(Math.min(h,v+1)),children:">"})})]})})})]})}},41849:function(e,t,n){"use strict";var a=n(57437),i=n(2265),s=n(53335);t.Z=i.forwardRef(function(e,t){var n,i;return(0,a.jsxs)("p",{ref:t,className:(0,s.m6)("my-5 text-tip flex justify-center items-center gap-2 component-text-tip",null!==(n=e.className)&&void 0!==n?n:""),children:[null!==(i=e.text)&&void 0!==i?i:"There‘s nothing more left",e.children]})})},7797:function(e,t,n){"use strict";n.d(t,{Z:function(){return f},d:function(){return w}});var a=n(59868),i=n(10433),s=n(3682),r=n(21707),u=n(32773),o=n(81939),l=n(2265),p=n(6178),d=n(13965),y=n(72300),c=n(74439),m=n(13167);function f(e){let t=(0,p.T)(),n=(0,p.C)(e=>e.user),u=(0,p.C)(e=>e.token),[c,f]=l.useState(0n);async function w(t){if(!(t=t||e))throw Error("Can't found tokenAddress!");let n=s.Q.getDefaultProvider(),a=new r.z(s.Q.getTargetNet().chainId,n),i=new r.C(t,m.R),[u,o,l,p]=await a.all([i.name(),i.symbol(),i.decimals(),i.creator()]);return{creator:p,name:u,symbol:o,decimals:Number(l)}}async function T(e){let n=await w(e);return t(y.Z.slice.actions.updateTokenContractDetail({...u.tokenContractDetail,...n})),n}async function g(t){if(!t&&!n.ethInfo.walletAddress)throw Error("Can't found walletAddress");if(!e)throw Error("Can't found tokenAddress");if(!(t=null!=t?t:n.ethInfo.walletAddress))return 0n;let i=d.r.getInstance();return new a.CH(e,m.R,o.Z.getInstance(i.getProvider()).browserProvider).balanceOf(t)}async function k(e){let t=await g(e);return f(t),t}async function b(t,s,r){let u=new a.CH(e,m.R,r),o=await u.allowance(n.ethInfo.walletAddress,t);if(i.Z.D("allowance:".concat(o)),o<s){let e=await u.approve(t,s);i.Z.D("approveResult:".concat(e.hash)),await e.wait(),i.Z.D("approveResult is confirm!")}}async function v(){let t=s.Q.getTargetNet(),n=d.r.getInstance(),i=o.Z.getInstance(n.getProvider(),t.chainId),r=new a.CH(e,m.R,await i.getSigner()),u=await r.setStartTime(Math.floor(Date.now()/1e3));return await u.wait()}return l.useEffect(()=>{e&&n.ethInfo.walletAddress&&k().catch(e=>{i.Z.E(e)})},[e,n.ethInfo.walletAddress]),{balance:c,getUserTokenBalance:g,updateUserTokenBalance:k,getInfo:w,updateInfo:T,approve:b,setEnd:v}}function w(e,t){let n=(0,p.T)();function i(n,a){if(n=n||e,a=a||t,!n)throw Error("Can't found tokenStakingRewardsAddress!");let i=new r.C(n,u.v);return[i.balanceOf(a),i.earned(a)]}async function l(n,a){if(n=n||e,a=a||t,!n)throw Error("Can't found tokenStakingRewardsAddress!");let o=s.Q.getDefaultProvider(),l=new r.z(s.Q.getTargetNet().chainId,o),p=new r.C(n,u.v),[d,y,c,m,f,w,T,g,k]=await l.all([l.getEthBalance(n),p.rewardsToken(),p.stakingToken(),p.lastUpdateTime(),p.rewardPerTokenStored(),p.totalSupply(),p.balanceOf(n),...t?i(n,t):[]]);return{ethBalance:d,rewardsToken:y,stakingToken:c,lastUpdateTime:Number(m),rewardPerTokenStored:f,totalSupply:w,tokenBalance:T,stakedAmount:null!=g?g:0n,earned:null!=k?k:0n}}async function m(e,a){let i=await l(e,t);return n(y.Z.slice.actions.updateStakingRewardsContractDetail({...i,stakingRewardsAddress:e})),c.Z.sleepForAnimationFrame(16).promise}async function f(e,t){let n=i(e,t),a=s.Q.getDefaultProvider(),u=new r.z(s.Q.getTargetNet().chainId,a),[o,l]=await u.all(n);return{stakedAmount:o,earned:l}}return{buildAccountInfoCall:i,getInfo:l,updateInfo:m,getAccountInfo:f,withdrawRewards:async function(t){if(!e)throw Error("Can't found tokenStakingRewardsAddress!");let n=s.Q.getTargetNet(),i=d.r.getInstance(),r=o.Z.getInstance(i.getProvider(),n.chainId);await r.getChain()!==n.chainId&&await r.switchToChain(n.chainId);let l=await r.getSigner(),p=new a.CH(e,u.v,l),y=await p.withdraw(t);return await y.wait()},getRewards:async function(){if(!e)throw Error("Can't found tokenStakingRewardsAddress!");let t=s.Q.getTargetNet(),n=d.r.getInstance(),i=o.Z.getInstance(n.getProvider(),t.chainId);await i.getChain()!==t.chainId&&await i.switchToChain(t.chainId);let r=await i.getSigner();return new a.CH(e,u.v,r).getReward()}}}},71002:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var a=n(3682),i=n(6178),s=n(94552),r=n(59868),u=n(81939),o=n(21707),l=n(13965),p=n(10433),d=n(72300),y=n(13167),c=n(45556),m=n(70042);let f=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token0",type:"address"},{indexed:!0,internalType:"address",name:"token1",type:"address"},{indexed:!1,internalType:"address",name:"pair",type:"address"},{indexed:!1,internalType:"uint256",name:"",type:"uint256"}],name:"PairCreated",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allPairs",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"allPairsLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"burnRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"address",name:"WETH",type:"address"}],name:"createPair",outputs:[{internalType:"address",name:"pair",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"feeTo",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeToSetter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"getPair",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"pair",type:"address"}],name:"getTokens",outputs:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_feeToSetter",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_burnRate",type:"uint256"}],name:"setBurnRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_feeTo",type:"address"}],name:"setFeeTo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_feeToSetter",type:"address"}],name:"setFeeToSetter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_router",type:"address"}],name:"setRouter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"tokenPairs",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1n,t=(0,i.T)(),n=(0,i.C)(e=>e.token),w=(0,i.C)(e=>e.user);function T(){let e="0x4Cd906AEF43aB89BB5714391B024b3C49bC76617";if(!e)throw Error("Can't found tokenSwapAddress!");return e}async function g(e){let t=T();e=null!=e?e:n.tokenDetail.tokenAddress;let i=a.Q.getDefaultProvider(),r=new o.z(a.Q.getTargetNet().chainId,i),u=new o.C(t,c.R),[l,p,d,y,m]=await r.all([u.COMMON_FEE(),u.router02(),u.priceConsumerV3(),u.stakingRewardsFactory(),...e?[u.tokenSwapFee(e)]:[]]);return{defaultUsdFee:Number(l),usdFee:Number(m||l)/100,router02:p,priceConsumerV3:d,uniswapV2Factory:s.N,stakingRewardsFactory:y}}async function k(e){let n=await g(e);return t(d.Z.slice.actions.updateTokenSwapInfo(n)),n}async function b(e,t,n){let i=a.Q.getDefaultProvider(),s=new o.z(a.Q.getTargetNet().chainId,i);if(!(n=null!=n?n:"0x4200000000000000000000000000000000000006"))throw Error("Can't found NEXT_PUBLIC_WETH_ADDRESS!");let r=new o.C(e,f),[u,l,d]=await s.all([r.getPair(t,n),r.feeTo(),r.feeToSetter()]);return p.Z.I("pairAddress",u),{pairAddress:u,feeTo:l,feeToSetter:d}}async function v(e,n,a){let i=await b(e,n,a);return t(d.Z.slice.actions.updateUniswapV2FactoryInfo(i)),i}async function h(e){let t=T();if(!(e=null!=e?e:"0x4200000000000000000000000000000000000006"))throw Error("Can't found WETH_ADDRESS!");let n=a.Q.getTargetNet(),i=l.r.getInstance(),s=u.Z.getInstance(i.getProvider(),n.chainId);await s.getChain()!==n.chainId&&await s.switchToChain(n.chainId);let r=await s.getSigner();return{ethersProvider:s,WETH_ADDRESS:e,signer:r,tokenSwapAddress:t}}async function I(e,t,n,a){let i=new r.CH(e,y.R,a),s=await i.allowance(w.ethInfo.walletAddress,t);if(p.Z.D("allowance:".concat(s)),s<n){let e=await i.approve(t,n);p.Z.D("approveResult:".concat(e.hash)),await e.wait(),p.Z.D("approveResult is confirm!")}}return{getInfo:g,updateInfo:k,getSwapFactory:async function(){let e=T(),t=a.Q.getDefaultProvider(),n=new o.z(a.Q.getTargetNet().chainId,t),i=new o.C(e,c.R),[s,r]=await n.tryAll([i.trinityswapV2Factory(),i.uniswapV2Factory()]);return null!=s?s:r},getUniswapV2FactoryInfo:b,updateUniswapV2FactoryInfo:v,buy:async function(e){var t;let{ethersProvider:n,WETH_ADDRESS:a,signer:i,tokenSwapAddress:s}=await h(e.wethAddress),r=m.Ro.connect(s,i),u=[e.amountIn,e.amountOut,[a,e.tokenAddress],w.ethInfo.walletAddress,e.deadline,{value:(null!==(t=e.value)&&void 0!==t?t:0n)+e.amountIn}];return p.Z.I("swapExactETHForTokens",u),r.swapExactETHForTokens(...u)},simulateBuy:async function(e){var t;let{ethersProvider:n,WETH_ADDRESS:a,signer:i,tokenSwapAddress:s}=await h(e.wethAddress),u=new r.CH(s,c.R,i),o=[e.amountOut,[a,e.tokenAddress],w.ethInfo.walletAddress,e.deadline,{value:(null!==(t=e.value)&&void 0!==t?t:0n)+e.amountIn}];try{let e=await u.swapExactETHForTokens.estimateGas(...o);p.Z.I("Estimated gas:",e);let t=await u.swapExactETHForTokens.staticCall(...o,{gasLimit:e});return p.Z.I("Simulation successful:",t),{success:!0,gasEstimate:e,simulation:t}}catch(e){return p.Z.E("Simulation failed:",e),{success:!1,error:e}}},sell:async function(e){var t;let{ethersProvider:n,WETH_ADDRESS:a,signer:i,tokenSwapAddress:s}=await h(e.wethAddress);await I(e.tokenAddress,s,e.amountIn,i);let u=new r.CH(s,c.R,i),o=[e.amountIn,e.amountOut,[e.tokenAddress,a],w.ethInfo.walletAddress,e.deadline,{value:null!==(t=e.value)&&void 0!==t?t:0n}];return p.Z.I("sswapExactTokensForETHell",o),u.swapExactTokensForETH(...o)},getAmountOut:async function(e,t,n){if(0n===e||0n===t||0n===n)return 0n;let i=T(),s=a.Q.getDefaultProvider();return new r.CH(i,c.R,s).getAmountOut(e,t,n)},getAmountIn:async function(e,t,n){if(0n===e||0n===t||0n===n)return 0n;let i=T(),s=a.Q.getDefaultProvider();return new r.CH(i,c.R,s).getAmountIn(e,t,n)},getAmountOutLocal:function(t,n,a){if(0n===t||0n===n)return 0n;let i=t*e;return i*a/(n*e+i)},getAmountOutLocalWithoutFee:function(e,t,n){return 0n===e||0n===t?0n:e*n/t},getAmountInLocal:function(t,n,a){if(0n===t||0n===n||0n===a)return 0n;let i=t*e,s=a*e-i;return(i*n+s-e)/s},getAmountInLocalWithoutFee:function(e,t,n){return 0n===e||0n===t?0n:e*t/n},getLiquidityAmountOutLocal:function(e,t,n){return 0n===e||0n===t?0n:e*n/t},getLiquidityAmountInLocal:function(e,t,n){return 0n===e||0n===n?0n:e*t/n},addLiquidity:async function(e,t,n,a,i,s,u){let{ethersProvider:o,WETH_ADDRESS:l,signer:p,tokenSwapAddress:d}=await h();return await I(e,d,t,p),new r.CH(d,c.R,p).addLiquidityETH(e,t,n,i,s,u,{value:a})}}}},78604:function(e,t,n){"use strict";n.d(t,{ZP:function(){return w},Ox:function(){return T}});var a=n(3682),i=n(7797),s=n(21707);let r=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"stakingToken",type:"address"},{internalType:"address",name:"rewardsToken",type:"address"},{internalType:"address",name:"trinityswapV2Router",type:"address"},{internalType:"address",name:"_trinityswapV2Factory",type:"address"}],name:"deploy",outputs:[{internalType:"address",name:"stakingRewardsAddress",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"stakingToken",type:"address"}],name:"getStakingRewardsInfoByStakingToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_stakingRewardsGenesis",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"stakingToken",type:"address"}],name:"notifyRewardAmount",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_stakingRewardsEvent",type:"address"}],name:"setStakingRewardsEvent",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_trinityswap",type:"address"}],name:"setTrinityswap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingRewardsGenesis",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];var u=n(6178),o=n(74439),l=n(72300);n(2265);var p=n(54881),d=n(10433),y=n(32773),c=n(68651),m=n(13167);let f=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0In",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1In",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount0Out",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1Out",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint112",name:"reserve0",type:"uint112"},{indexed:!1,internalType:"uint112",name:"reserve1",type:"uint112"}],name:"Sync",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINIMUM_LIQUIDITY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"burn",outputs:[{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReserves",outputs:[{internalType:"uint112",name:"_reserve0",type:"uint112"},{internalType:"uint112",name:"_reserve1",type:"uint112"},{internalType:"uint32",name:"_blockTimestampLast",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token0",type:"address"},{internalType:"address",name:"_token1",type:"address"},{internalType:"address",name:"_WETH",type:"address"},{internalType:"uint256",name:"_burnRate",type:"uint256"},{internalType:"address",name:"_router",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"kLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"price0CumulativeLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price1CumulativeLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"skim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount0Out",type:"uint256"},{internalType:"uint256",name:"amount1Out",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"sync",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token0",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token1",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];function w(e){let t=(0,u.T)(),n=(0,i.d)(null!=e?e:""),p="0x4200000000000000000000000000000000000006";async function y(e){let t=a.Q.getDefaultProvider(),n=new s.z(a.Q.getTargetNet().chainId,t),i=new s.C(e,f),[r,u,o,l,y,c,w,T]=await n.all([i.factory(),i.token0(),i.token1(),i.getReserves(),i.totalSupply(),i.balanceOf(e),n.getEthBalance(e),...p?[new s.C(p,m.R).balanceOf(e)]:[]]),[g,k,b]=l;return d.Z.I("useUniswapV2Pair updateInfo",{pairAddress:e,wethAddress:p,factory:r,token0:u.toString(),token1:o.toString(),reserve0:g.toString(),reserve1:k.toString(),timestamp:b.toString(),totalSupply:y.toString(),balance:c.toString(),ethBalance:w.toString(),pairWethBalance:(null!=T?T:0n).toString()}),{pairAddress:e,tradingEnable:!0,factory:r,token0:u,token1:o,reserve0:g,reserve1:k,timestamp:Number(b),totalSupply:y,balance:c,ethBalance:w,pairWethBalance:null!=T?T:0n}}async function c(e){let n=await y(e);return t(l.Z.slice.actions.updateUniswapV2PairInfo(n)),o.Z.sleepForAnimationFrame(16).promise}async function w(t,i){let u=a.Q.getDefaultProvider(),o=new s.z(a.Q.getTargetNet().chainId,u),l=e;if(!l){let e="0x651d2F3Cb9d40C4945f87Be01cC7FcdaD8F167Ec";if(!e)throw Error("Can't found NEXT_PUBLIC_STAKE_REWARDS_FACTORY_CONTRACT_ADDRESS!");let n=new s.C(e,r),[a]=await o.all([n.getStakingRewardsInfoByStakingToken(t)]);l=a}let p=await n.getInfo(l,i);return{stakingRewardsAddress:l,...p}}async function T(e,n){let a=await w(e,n);return t(l.Z.slice.actions.updateStakingRewardsContractDetail({...a})),o.Z.sleepForAnimationFrame(16).promise}return{getInfo:y,updateInfo:c,getStakingRewardsInfoByPair:w,updateStakingRewardsInfoByPair:T}}function T(e){let t=(0,u.T)(),n=(0,u.C)(e=>e.token),i=(0,u.C)(e=>e.user),r=n.userLiquidityInfo,o=new c.Z(0n===r.pairTotalSupply?0:n.stakingRewardsContractDetail.stakedAmount.toString()),w=0n===r.nftRewardTotalSupply?new c.Z(0):new c.Z(r.userNftRewardBalance.toString()).multipliedBy(r.liquidityRate.toString()),T=w.plus(o).div(r.pairTotalSupply.toString());async function g(t,n,r){r=null!=r?r:i.ethInfo.walletAddress;let u=a.Q.getDefaultProvider(),o=new s.z(a.Q.getTargetNet().chainId,u),l=new s.C(e,f),c=new s.C(t,y.v),m=new s.C(n,p.M),[w,T,g,k,b,v,h,I]=await o.all([c.balanceOf(n),m.balanceOf(e),l.balanceOf(n),l.balanceOf(r),l.totalSupply(),m.balanceOf(r),m.liquidityRate(),m.totalSupply()]);return d.Z.I("getLiquidityInfo","pairContract",e,"userAddress",r,"value:",w,T,g,k,b,v,I),{tokenRewardNFTRewardBalance:w,nftRewardPairBalance:T,pairNFTRewardBalance:g,userPairBalance:k,pairTotalSupply:b,userNftRewardBalance:v,liquidityRate:h,nftRewardTotalSupply:I}}async function k(e,n,a){let i=await g(e,n,a);t(l.Z.slice.actions.updateUserLiquidityInfo(i))}return{userLpAmount:o,initialLpAmount:w,userInLPPoolPercentage:T,updatePairBalance:async function(n,r){r=null!=r?r:i.ethInfo.walletAddress;let u=a.Q.getDefaultProvider(),o=new s.z(a.Q.getTargetNet().chainId,u),p="0x4200000000000000000000000000000000000006";if(!p)throw Error("Can't found NEXT_PUBLIC_WETH_ADDRESS!");let d=new s.C(n,m.R),y=new s.C(p,m.R),c=new s.C(e,f),[w,T,g]=await o.all([d.balanceOf(e),y.balanceOf(e),c.balanceOf(r)]);t(l.Z.slice.actions.updateUniswapV2PairWithdrawInfo({tokenBalanceForLP:w,wethBalanceForLP:T,userPairTokenBalance:g}))},getUserLiquidityInfo:g,updateUserLiquidityInfo:k}}},54881:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});let a=[{inputs:[{internalType:"address",name:"_stakingToken",type:"address"},{internalType:"address",name:"_factory",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardPaid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"liquidityRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"sendBack",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_liquidityRate",type:"uint256"}],name:"setLiquidityRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_stakingReward",type:"address"}],name:"setStakingReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"stakeFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingRewards",outputs:[{internalType:"contract IStakingRewards",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stakingToken",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"nftAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]},32773:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});let a=[{inputs:[{internalType:"address",name:"_rewardsDistribution",type:"address"},{internalType:"address",name:"_rewardsToken",type:"address"},{internalType:"address",name:"_stakingToken",type:"address"},{internalType:"address",name:"_trinityswapV2Router",type:"address"},{internalType:"address",name:"_trinityswapV2Factory",type:"address"},{internalType:"address",name:"_stakingRewardsEvent",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nft",type:"address"},{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"nftUnLock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"notifyRewardAmount",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardsDistribution",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardsToken",outputs:[{internalType:"contract IWETH",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"stakeFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"trinityswapV2Factory",outputs:[{internalType:"contract ITrinityswapV2Factory",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"trinityswapV2Router",outputs:[{internalType:"contract ITrinityV2Router02",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]},46493:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var a=n(3682),i=n(81939),s=n(13965),r=n(74439),u=n(83123),o=n(45650),l=n(49481),p=n(7797),d=n(71002),y=n(13167),c=n(6178),m=n(69356),f=n(68651),w=n(64798),T=n.n(w),g=n(2265),k=n(43949),b=n(59868),v=n(10433);let h=null;function I(){var e;let{t}=(0,k.$G)(["common"]),n=(0,c.T)(),w=(0,c.C)(e=>e.token),I=(0,c.C)(e=>e.user),C=a.Q.getTargetNet(),M=(0,l.Z)(I.ethInfo.walletAddress),S=(0,p.Z)(null!==(e=w.tokenSwapPage.tokenAddress)&&void 0!==e?e:""),x=(0,d.Z)(),A=Q(),R=g.useMemo(()=>{if(w.tokenDetail.tokenAddress&&w.tokenDetail.tokenSymbol){var e;return{tokenId:null!==(e=w.tokenDetail.tokenId)&&void 0!==e?e:"",tokenImage:w.tokenDetail.tokenImage||"/images/default-token.svg",tokenName:w.tokenDetail.tokenName||"Unknown Token",tokenSymbol:w.tokenDetail.tokenSymbol,tokenAddress:w.tokenDetail.tokenAddress}}return A},[]),[Z,E]=g.useState({tokenIn:A,amountIn:"",tokenOut:R,amountOut:""});g.useEffect(()=>{if(w.tokenDetail.tokenAddress&&w.tokenDetail.tokenSymbol){var e;let t={tokenId:null!==(e=w.tokenDetail.tokenId)&&void 0!==e?e:"",tokenImage:w.tokenDetail.tokenImage||"/images/default-token.svg",tokenName:w.tokenDetail.tokenName||"Unknown Token",tokenSymbol:w.tokenDetail.tokenSymbol,tokenAddress:w.tokenDetail.tokenAddress};("ETH"===Z.tokenOut.tokenSymbol||Z.tokenOut.tokenAddress!==w.tokenDetail.tokenAddress)&&E(e=>({...e,tokenOut:t}))}},[w.tokenDetail.tokenAddress,w.tokenDetail.tokenSymbol]);let N=I.tokenBalances.find(e=>e.symbol===Z.tokenIn.tokenSymbol),D=I.tokenBalances.find(e=>e.symbol===Z.tokenOut.tokenSymbol),O=Math.pow(10,C.nativeCurrency.decimals);async function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(!I.ethInfo.walletAddress){n(m.Z.slice.actions.clearTokenBalances());return}null==h||h.cancel(),h=r.Z.sleepForAnimationFrame(e),await h.promise;try{var t,a;let[e,r]=await Promise.all([M.getETHBalance(),S.updateUserTokenBalance()]),u=i.Z.wei2eth(e),o=i.Z.wei2eth(r),l=w.tokenDetail.tokenSymbol,p=w.tokenDetail.tokenName,d=w.tokenDetail.tokenImage,c=null!==(t=w.tokenSwapPage.tokenAddress)&&void 0!==t?t:w.tokenDetail.tokenAddress;if(!l||!p){let e=s.r.getInstance().getProvider(),t=i.Z.getInstance(e),n=await t.getSigner(),a=new b.CH(c,y.R,n);if(!l)try{l=await a.symbol()}catch(e){v.Z.E("获取代币符号失败:",e),l="Unknown"}if(!p)try{p=await a.name()}catch(e){v.Z.E("获取代币名称失败:",e),p="Unknown Token"}}d||(d="/images/default-token.svg"),n(m.Z.slice.actions.updateETHWalletBalance(u));let f=[{icon:d,chainId:C.chainId,name:p,address:c,decimals:C.nativeCurrency.decimals,symbol:l,balance:o},{icon:A.tokenImage,chainId:C.chainId,name:A.tokenName,address:A.tokenAddress,decimals:null!==(a=A.tokenDecimals)&&void 0!==a?a:C.nativeCurrency.decimals,symbol:A.tokenSymbol,balance:u}];n(m.Z.slice.actions.updateTokenBalances(f));let T=Z.tokenIn,g=Z.tokenOut;T.tokenSymbol!==l&&T.tokenAddress.toLowerCase()===c.toLowerCase()?E({...Z,tokenIn:{...T,tokenSymbol:l,tokenName:p,tokenImage:d}}):g.tokenSymbol!==l&&g.tokenAddress.toLowerCase()===c.toLowerCase()&&E({...Z,tokenOut:{...g,tokenSymbol:l,tokenName:p,tokenImage:d}})}catch(e){v.Z.E("更新余额失败:",e)}}function F(){return Z.tokenIn.tokenSymbol.toUpperCase()===C.nativeCurrency.symbol.toUpperCase()}function _(){return Z.tokenIn.tokenSymbol.toUpperCase()===A.tokenSymbol.toUpperCase()}function L(e){let[t,n]=w.uniswapV2PairInfo.token0===A.tokenAddress?[w.uniswapV2PairInfo.reserve0,w.uniswapV2PairInfo.reserve1]:[w.uniswapV2PairInfo.reserve1,w.uniswapV2PairInfo.reserve0];return(null!=e?e:F())?[t,n]:[n,t]}function B(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{roundingMode:n=f.Z.ROUND_DOWN,isBuy:a,floarFix:i=1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(""===e)return"";let s=new f.Z(O).multipliedBy(e),[r,u]=L(a),o=(t?x.getAmountOutLocal(BigInt(s.toFixed(0,n)),r,u):x.getAmountOutLocalWithoutFee(BigInt(s.toFixed(0,n)),r,u)).toString();return new f.Z(o).div(O).multipliedBy(i).toFixed(w.swapKeepDecimals,n)}function H(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{roundingMode:n=f.Z.ROUND_DOWN,isBuy:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(""===e)return"";let i=new f.Z(O).multipliedBy(e),[s,r]=L(a);return new f.Z(t?x.getAmountInLocal(BigInt(i.toFixed(0,n)),s,r).toString():x.getAmountInLocalWithoutFee(BigInt(i.toFixed(0,n)),s,r).toString()).div(O).toFixed(w.swapKeepDecimals,n)}let U=T()(async e=>{if(C.nativeCurrency.decimals,""!==(e=e.replaceAll(",",""))){var t,n,a;let i=new f.Z(Math.min(Number(null!==(n=null===(t=I.tokenBalances.find(e=>e.symbol===Z.tokenIn.tokenSymbol))||void 0===t?void 0:t.balance)&&void 0!==n?n:0),Number.MAX_VALUE)),s=new f.Z(e);if(s.isNaN()){E({...Z,amountIn:"",amountOut:""});return}if(s.isZero()){E({...Z,amountIn:e,amountOut:""});return}s.gt(i)&&(s=i),e=(null!==(a=s.decimalPlaces())&&void 0!==a?a:0)>w.swapKeepDecimals?s.toFixed(w.swapKeepDecimals,f.Z.ROUND_DOWN):s.toString()}E({...Z,amountIn:e}),(0,g.startTransition)(()=>{if(""===e){E({...Z,amountIn:e,amountOut:""});return}let t=B(e);E({...Z,amountIn:e,amountOut:t})})},16),j=T()(async e=>{if(""!==(e=e.replaceAll(",",""))){var n;let a=new f.Z(Number.MAX_VALUE),i=new f.Z(e);if(i.isNaN()){E({...Z,amountOut:""});return}if(i.isZero()){E({...Z,amountOut:e});return}i.gt(a)&&(i=a),e=(null!==(n=i.decimalPlaces())&&void 0!==n?n:0)>w.swapKeepDecimals?i.toFixed(w.swapKeepDecimals,f.Z.ROUND_DOWN):i.toString();let[s,r]=L(),o=new f.Z(O).multipliedBy(e);o.gt(r.toString())&&(e=(o=new f.Z(r.toString()).div(O)).toFixed(w.swapKeepDecimals,f.Z.ROUND_DOWN),(0,u.L6)(t("Insufficient liquidity",{value:"".concat(e," ").concat(Z.tokenOut.tokenSymbol)})))}E({...Z,amountOut:e}),(0,g.startTransition)(()=>{if(""===e){E({...Z,amountIn:"",amountOut:""});return}let t=H(e);E({...Z,amountIn:t,amountOut:e})})},16),V=Number("0.18");function Q(){let e=new o.Sp,t=new o.iM;return{tokenId:"0",tokenImage:t.icon,tokenName:e.name,tokenSymbol:e.symbol,tokenAddress:t.address}}return{LAMP:O,TOKEN_SWAP_MAX_PERCENT:V,swapTransferInfo:Z,setSwapTransferInfo:E,updateTransactionBalance:P,tokenInBalanceInfo:N,tokenOutBalanceInfo:D,isSwapSelectBuy:F,isAddLPFirstIsETH:_,getReserves:L,getLPStoreKeys:function(){return _()?["amountETHMin","amountTokenMin"]:["amountTokenMin","amountETHMin"]},getAmountOutByAmountIn:B,getAmountInByAmountOut:H,onAmountInChange:U,onAmountOutChange:j,getMaxBuyTokenAmount:function(){let e=w.uniswapV2PairInfo.token0===A.tokenAddress?w.uniswapV2PairInfo.reserve1:w.uniswapV2PairInfo.reserve0;return new f.Z(e.toString()).multipliedBy(V)},initWETHTokenSimpleInfo:Q}}},34159:function(){}}]);