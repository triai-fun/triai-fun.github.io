(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7986],{29959:function(e,t,l){Promise.resolve().then(l.bind(l,98839)),Promise.resolve().then(l.bind(l,44840))},98839:function(e,t,l){"use strict";l.d(t,{default:function(){return p}});var s=l(37821),i=l(58078),a=l(3061),r=l(97899),n=l(19586),d=l(46440),o=l(38279),c=l(98018),m=l(66773),x=l(40794),u=l(31638),v=l(65521),h=l(5038),b=l(23430),f=l(69967),g=l(75),N=l(58504);function w(e){return(0,s.jsxs)("div",{className:"flex-1 min-w-[160px] bg-[#0A0A0A] border border-[#1B1B1B] rounded-[10px] px-4 py-3",children:[(0,s.jsx)("div",{className:"text-[#9AA0A6] text-xs mb-1 whitespace-nowrap",children:e.title}),(0,s.jsx)("div",{className:"mt-1",children:e.value})]})}function p(e){var t,l,p,k,j,A,y,S,P,B,C,D,Z,E,M,F,T,O,R,z,W;let q=null!==(Z=e.id)&&void 0!==Z?Z:"",{t:I}=(0,v.$G)(["common"]),_=(0,N.useRouter)(),V=!!(0,h.C)(e=>e.user).ethInfo.walletAddress,{pool:L,loading:$,error:U,refresh:Y}=(0,b.JL)(q),[G,H]=i.useState(""),[J,K]=i.useState(""),[Q,X]=i.useState(null),ee=i.useMemo(()=>L?Math.floor(L.lockPeriodSeconds/86400):0,[L]),et=null!==(E=null==L?void 0:L.display.minFirstStake)&&void 0!==E?E:"--",el=null!==(M=null==L?void 0:null===(t=L.user)||void 0===t?void 0:t.metrics.staked)&&void 0!==M?M:new g.Z(0),es=null!==(F=null==L?void 0:null===(l=L.user)||void 0===l?void 0:l.metrics.earned)&&void 0!==F?F:new g.Z(0),ei=null===(T=null==L?void 0:null===(k=L.user)||void 0===k?void 0:null===(p=(j=k.metrics.earned).isZero)||void 0===p?void 0:p.call(j))||void 0===T||T,ea=null!==(O=null==L?void 0:null===(A=L.user)||void 0===A?void 0:A.display.walletBalance)&&void 0!==O?O:"--",er=async()=>{let e;if(L){if(!V){a.Am.error(I("Need connect wallet"));return}if(!G.trim()){a.Am.error(I("Invalid amount"));return}try{e=new g.Z(G)}catch(e){a.Am.error(I("Invalid amount"));return}if(e.isNaN()||e.lte(0)){a.Am.error(I("Invalid amount"));return}if(el.isZero()&&e.lt(L.metrics.minFirstStake)){a.Am.error(I("FirstStakeMinimumTip",{value:L.metrics.minFirstStake.toString()}));return}try{X("stake"),await (0,f.AP)({minerAddress:L.minerAddress,stakingTokenAddress:L.raw.stakingTokenAddress,stakingTokenDecimals:L.tokens.staking.decimals,amount:G}),a.Am.success(I("StakeAction")),H(""),await Y()}catch(e){a.Am.error(e instanceof Error?e.message:String(e))}finally{X(null)}}},en=async()=>{if(L){if(!V){a.Am.error(I("Need connect wallet"));return}if(!J.trim()){a.Am.error(I("Invalid amount"));return}try{X("withdraw"),await (0,f.TS)({minerAddress:L.minerAddress,stakingTokenDecimals:L.tokens.staking.decimals,amount:J}),a.Am.success(I("Unstake")),K(""),await Y()}catch(e){a.Am.error(e instanceof Error?e.message:String(e))}finally{X(null)}}},ed=async()=>{if(L){if(!V){a.Am.error(I("Need connect wallet"));return}try{X("claim"),await (0,f.yP)(L.minerAddress),a.Am.success(I("Claim")),await Y()}catch(e){a.Am.error(e instanceof Error?e.message:String(e))}finally{X(null)}}},eo=i.useCallback(e=>{var t,l;if(!e||"function"!=typeof e.toFixed||(null===(t=e.isNaN)||void 0===t?void 0:t.call(e))||!(null===(l=e.isFinite)||void 0===l?void 0:l.call(e)))return{text:"--",className:"text-lg"};let s=e.toFixed(2,g.Z.ROUND_DOWN);"-0.00"===s&&(s="0.00"),s.includes(".")&&(s=s.replace(/\.0+$/,"").replace(/(\.\d*?)0+$/,"$1")),"-0"===s&&(s="0");let i="".concat(s,"%"),a="text-lg";return i.length>20?a="text-xs":i.length>14?a="text-sm":i.length>10&&(a="text-base"),{text:i,className:a}},[]),ec=i.useMemo(()=>{if(!L)return[];let e=L.tokens.reward.symbol,t=L.tokens.staking.symbol,l=L.metrics.rewardReserve.toNumber(),i=L.metrics.totalStaked.toNumber(),a=L.metrics.rewardPerDay.toNumber(),r=eo(L.metrics.apyPercent);return[{title:I("PoolRewardReserveWithSymbol",{symbol:e}),value:(0,s.jsx)(m.eO,{value:l,keepDecimal:4,useSub:!0,className:"w-full justify-start text-white text-lg font-semibold break-all",horizontalArrangement:x.cV.Start,valueClassName:"text-white text-lg font-semibold text-left"})},{title:I("PoolTotalStakedWithSymbol",{symbol:t}),value:(0,s.jsx)(m.eO,{value:i,keepDecimal:4,useSub:!0,className:"w-full justify-start text-white text-lg font-semibold break-all",horizontalArrangement:x.cV.Start,valueClassName:"text-white text-lg font-semibold text-left"})},{title:I("Pool24hRewardsWithSymbol",{symbol:e}),value:(0,s.jsx)(m.eO,{value:a,keepDecimal:4,useSub:!0,className:"w-full justify-start text-white text-lg font-semibold break-all",horizontalArrangement:x.cV.Start,valueClassName:"text-white text-lg font-semibold text-left"})},{title:I("PoolEstimatedAPY"),value:(0,s.jsx)("span",{className:(0,u.m6)("text-white font-semibold whitespace-nowrap leading-tight",r.className),title:r.text,children:r.text})}]},[eo,L,I]);return(0,s.jsx)("div",{className:"relative overflow-x-hidden text-secondary bg-black",children:(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)(r.Z,{}),(0,s.jsx)(d.Z,{}),(0,s.jsxs)(o.ZP,{width:o.W7.Wrapper,background:o.nV.None,className:"mx-auto",children:[(0,s.jsxs)(o.ZP,{width:o.W7.ContentV2,background:o.nV.None,className:"mx-auto px-4",children:[$&&(0,s.jsx)("div",{className:"text-center text-[#C9C9C9] py-10",children:I("Loading")}),!$&&U&&(0,s.jsx)("div",{className:"text-center text-[#FE0308] py-10",children:U}),!$&&!U&&L&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mt-2 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative w-16 h-10 flex-shrink-0",children:[(0,s.jsx)("img",{src:"https://img.triai.fun/87609254038545369db6dcead1a3ae02",className:"absolute w-10 h-10 rounded-full",alt:"base"}),(0,s.jsx)("img",{src:L.quoteIcon,className:"absolute w-10 h-10 rounded-full left-6 border border-black",alt:"quote"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-white text-2xl md:text-3xl font-semibold",children:L.name}),(0,s.jsx)("div",{className:"text-xs text-[#7A7A7A] mt-1",children:I("PoolID",{id:(W=L.minerAddress)?"".concat(W.slice(0,6),"...").concat(W.slice(-4)):"--"})})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,s.jsxs)("div",{className:"text-[#9AA0A6] text-xs md:text-sm",children:[L.tokens.staking.symbol," → ",L.tokens.reward.symbol]}),(0,s.jsx)(c.ZP,{status:c.Dv.Active,size:c.qE.Small,round:c.DB.Middle,onClick:()=>_.push("/stake"),children:I("BackToStake")})]})]}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-5",children:[(0,s.jsxs)("div",{className:"flex-1 flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"bg-[#050505] border border-[#111111] rounded-[12px] p-5",children:[(0,s.jsx)("div",{className:"text-white font-semibold mb-4",children:I("MiningStatistics")}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-3",children:ec.map(e=>(0,s.jsx)(w,{title:e.title,value:e.value},e.title))})]}),(0,s.jsxs)("div",{className:"bg-[#050505] border border-[#111111] rounded-[12px] p-5",children:[(0,s.jsx)("div",{className:"text-white font-semibold mb-4",children:I("StartMining")}),(0,s.jsxs)("div",{className:"text-[#9AA0A6] text-xs mb-2",children:[(0,s.jsxs)("span",{children:[I("StakingAmount",{token:L.tokens.staking.symbol}),"："]}),(0,s.jsx)("span",{className:"ml-1 text-white",children:(null==L?void 0:L.user)?ea:"--"})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[(0,s.jsxs)("div",{className:"flex gap-2 w-full md:flex-1",children:[(0,s.jsx)("input",{inputMode:"decimal",value:G,onChange:e=>H(e.target.value),placeholder:I("PoolMinStake",{value:et}),className:(0,u.m6)("w-full h-[44px] bg-[#0A0A0A] border border-[#1B1B1B] rounded-[8px]","px-4 text-white placeholder:text-[#666] outline-none flex-1")}),(0,s.jsx)(c.ZP,{status:c.Dv.None,size:c.qE.Small,round:c.DB.Middle,className:"bg-[#050505] border border-[#1B1B1B] text-primary hover:bg-[#050505] hover:opacity-100 disabled:bg-[#050505] disabled:text-primary",onClick:()=>{var e,t;let l=null==L?void 0:null===(e=L.user)||void 0===e?void 0:e.metrics.walletBalance;!l||(null===(t=l.isZero)||void 0===t?void 0:t.call(l))||H(l.toFixed())},disabled:!(null==L?void 0:L.user)||null===(R=null==L?void 0:null===(P=L.user)||void 0===P?void 0:null===(S=P.metrics.walletBalance)||void 0===S?void 0:null===(y=S.isZero)||void 0===y?void 0:y.call(S))||void 0===R||R,children:I("Max")})]}),(0,s.jsx)(c.ZP,{status:c.Dv.Active,size:c.qE.Normal,round:c.DB.Big,disabled:"stake"===Q,onClick:er,className:"md:!h-[44px] md:!leading-[44px]",children:"stake"===Q?I("Processing"):I("StakeAction")})]}),(0,s.jsx)("div",{className:"text-[#9AA0A6] text-xs mt-2",children:I("PoolLockPeriodTip",{days:ee})})]}),(0,s.jsxs)("div",{className:"bg-[#050505] border border-[#111111] rounded-[12px] p-5",children:[(0,s.jsx)("div",{className:"text-white font-semibold mb-4",children:I("ETHMiningRecords")}),(0,s.jsx)("div",{className:"text-[#9AA0A6] text-sm",children:I("PoolRecordsPlaceholder")})]})]}),(0,s.jsxs)("div",{className:"w-full lg:w-[360px] bg-[#050505] border border-[#111111] rounded-[12px] p-5 h-max",children:[(0,s.jsx)("div",{className:"text-white font-semibold mb-4",children:I("YourMiningStatus")}),(0,s.jsx)("div",{className:"text-[#9AA0A6] text-sm",children:I("YourStaked",{token:L.tokens.staking.symbol})}),(0,s.jsx)(m.eO,{value:el.toNumber(),keepDecimal:4,useSub:!0,className:"justify-start text-white text-2xl font-semibold mb-4 break-all",valueClassName:"text-white text-2xl font-semibold"}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-[#9AA0A6]",children:[(0,s.jsx)("span",{children:I("ClaimableReward",{token:L.tokens.reward.symbol})}),(0,s.jsx)("div",{className:"flex items-baseline gap-1 text-white break-all",children:(0,s.jsx)(m.eO,{value:es.toNumber(),keepDecimal:4,useSub:!0,className:"justify-end text-white text-sm",valueClassName:"text-white text-sm"})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-[#9AA0A6] mt-2",children:[(0,s.jsx)("span",{children:I("PoolLockPeriod")}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-white",children:[(0,s.jsx)(m.eO,{value:ee,decimal:0,keepDecimal:0,className:"justify-end text-white text-sm",valueClassName:"text-white text-sm"}),(0,s.jsx)("span",{children:I("DaysUnit")})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex flex-col gap-3",children:[(0,s.jsx)(c.ZP,{status:c.Dv.Active,size:c.qE.Normal,round:c.DB.Big,disabled:"claim"===Q||ei&&V,onClick:ed,children:"claim"===Q?I("Processing"):I("ClaimRewards")}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{inputMode:"decimal",value:J,onChange:e=>K(e.target.value),placeholder:I("EnterAmount"),className:"flex-1 h-[44px] bg-[#0A0A0A] border border-[#1B1B1B] rounded-[8px] px-3 text-white placeholder:text-[#666] outline-none"}),(0,s.jsx)(c.ZP,{status:c.Dv.None,size:c.qE.Small,round:c.DB.Middle,className:"bg-[#050505] border border-[#1B1B1B] text-primary hover:bg-[#050505] hover:opacity-100 disabled:bg-[#050505] disabled:text-primary",onClick:()=>{var e,t;let l=null!==(t=null==L?void 0:null===(e=L.user)||void 0===e?void 0:e.metrics.staked)&&void 0!==t?t:new g.Z(0);l.isZero()||K(l.toFixed())},disabled:!(null==L?void 0:L.user)||null===(z=null==L?void 0:null===(C=L.user)||void 0===C?void 0:null===(B=(D=C.metrics.staked).isZero)||void 0===B?void 0:B.call(D))||void 0===z||z,children:I("Max")})]}),(0,s.jsx)(c.ZP,{status:c.Dv.Active,size:c.qE.Normal,round:c.DB.Big,disabled:"withdraw"===Q,onClick:en,children:"withdraw"===Q?I("Processing"):I("WithdrawStaked")})]}),(0,s.jsx)("div",{className:"text-[#9AA0A6] text-xs mt-3",children:I("PoolWithdrawTip")})]})]})]})]}),(0,s.jsx)(n.Z,{})]})]})})}}},function(e){e.O(0,[8570,7615,6326,9125,8113,3458,2035,1278,962,1898,7115,2364,1744],function(){return e(e.s=29959)}),_N_E=e.O()}]);