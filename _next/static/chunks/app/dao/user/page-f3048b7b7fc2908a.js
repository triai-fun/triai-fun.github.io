(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7064],{63200:function(e,t,a){Promise.resolve().then(a.bind(a,83664))},83664:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ep}});var n,r,l,s,o,i,d=a(57437),c=a(97235),u=a(68071),m=a(27635),p=a(38435),x=a(89769),f=a(53335),v=a(43949),h=a(2265),g=a(59365),w=a(54740),N=a(3682),y=a(65435),j=a(6178),b=a(81939),C=a(88263),I=a(68651),A=a(56679);function E(e){var t,a,n,r,l,s,o,i,c,u,m,p,x,f,h,N,y,C,E,R;let{t:T}=(0,v.$G)(["dao"]),Z=(0,j.C)(e=>e.dao),D={title:T("DAOReward"),reward:b.Z.wei2eth(null!==(m=null===(t=Z.userInfo)||void 0===t?void 0:t.voteAndAirDropReward.clairReward)&&void 0!==m?m:0n)},k=null!==(p=null===(a=Z.daoContractInfo)||void 0===a?void 0:a.votePrice)&&void 0!==p?p:1n,O=(null!==(x=null===(n=Z.userInfo)||void 0===n?void 0:n.voteInfo.ethDone)&&void 0!==x?x:0n)/k*k;return(0,d.jsx)(A.Z,{isOpen:e.isOpen,onClose:()=>e.requestClose(),className:"w-[420px] bg-[#050505] border border-[#111111] shadow-[0px_0px_50px_#000000] rounded-[8px] p-6",controls:{buttons:[{text:T("Back"),type:"normal",onClick:()=>e.requestClose()},...e.canClaim?[{text:T("Claim"),type:e.canClaim?"active":"disabled",onClick:()=>e.requestClaim()}]:[]]},children:(0,d.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,d.jsx)("h2",{className:"text-white text-[18px] font-semibold text-center",children:null==D?void 0:D.title}),(0,d.jsxs)("div",{className:"bg-black border border-[#111111] rounded-[8px] p-4",children:[(0,d.jsxs)("div",{className:"flex justify-center items-center gap-2 mb-4",children:[(0,d.jsx)("span",{className:"text-[14px] text-white",children:T("ClaimableReward")}),(0,d.jsx)("span",{className:"text-[18px] font-bold bg-gradient-to-r from-[#E700E6] to-[#4B4BDF] bg-clip-text text-transparent",children:(0,d.jsx)(w.eO,{value:Number(D.reward)})}),(0,d.jsx)(g.Z,{className:"w-5 h-5"})]}),(0,d.jsx)("div",{className:"text-[12px] flex flex-col gap-2",children:[{label:T("TotalVotes"),value:null!==(f=null===(r=Z.userInfo)||void 0===r?void 0:r.voteInfo.votedAmount)&&void 0!==f?f:0n},{label:T("MaxRewards"),value:new I.Z(((null!==(h=null===(l=Z.userInfo)||void 0===l?void 0:l.voteInfo.votedAmount)&&void 0!==h?h:0n)+O).toString()).multipliedBy(2.4).toString()},{label:T("VoteAirdrop"),value:(null!==(N=null===(s=Z.userInfo)||void 0===s?void 0:s.voteAndAirDropReward.airdropReward)&&void 0!==N?N:0n)+(null!==(y=null===(o=Z.userInfo)||void 0===o?void 0:o.voteAndAirDropReward.reinvestReward)&&void 0!==y?y:0n)},{label:T("VoteReward"),value:null!==(C=null===(i=Z.userInfo)||void 0===i?void 0:i.voteAndAirDropReward.nodeReward)&&void 0!==C?C:0n},{label:T("AirdropReward"),value:null!==(E=null===(c=Z.userInfo)||void 0===c?void 0:c.voteAndAirDropReward.airdropLinkReward)&&void 0!==E?E:0n},{label:T("RewardClaimed"),value:null!==(R=null===(u=Z.userInfo)||void 0===u?void 0:u.voteInfo.ethDone)&&void 0!==R?R:0n},{label:T("AutoVoted"),value:O}].map((e,t)=>(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-[#666666]",children:e.label}),(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"text-white font-semibold",children:(0,d.jsx)(w.eO,{value:Number(b.Z.wei2eth(e.value)),useSub:!0})}),(0,d.jsx)(g.Z,{className:"w-3 h-3"})]})]},t))})]})]})})}function R(e){var t,a;let{t:n}=(0,v.$G)(["dao"]),r=N.Q.getTargetNet(),[l,s]=h.useState(!1),o=(0,j.C)(e=>e.dao),i=(0,C.Z)({autoTrigger:!0,handleAfterClaim:async()=>{s(!1)}}),c=i.estimateUserPendingReward();h.useEffect(()=>{i.refreshAllData()},[]),h.useEffect(()=>{console.log("Node Top Reward:",o.userRewardInfo.nodeTopReward.toString())},[o.userRewardInfo.nodeTopReward]);let m=async()=>{i.isUpdating&&await i.refreshAllData(),s(!0)};return(0,d.jsxs)("div",{className:(0,f.m6)("flex flex-col gap-5",e.className),children:[(0,d.jsxs)(u.ZP,{autoBorder:!0,autoMargin:!1,autoPadding:!1,className:"h-[120px] flex flex-col md:flex-row items-center gap-2 justify-center md:justify-around px-[20px]",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1 text-white text-[16px] font-medium",children:[n("DAORewardClaimed"),":",(0,d.jsx)(w.eO,{className:"text-gradient",value:Number(b.Z.wei2eth(null!==(a=null===(t=o.userInfo)||void 0===t?void 0:t.voteInfo.ethDone)&&void 0!==a?a:0n))}),r.nativeCurrency.symbol]}),(0,d.jsxs)("div",{className:"flex items-center gap-1 text-white text-[16px] font-medium",children:[n("RewardPending"),":",(0,d.jsx)(w.eO,{className:"text-gradient",value:c.toNumber()}),r.nativeCurrency.symbol]})]}),i.rewardItems.map((e,t)=>{var a;return(0,d.jsxs)(u.ZP,{autoBorder:!0,autoMargin:!1,autoPadding:!1,className:"h-auto md:h-[80px] grid grid-cols-1 md:grid-cols-[2fr_3fr_2fr_2fr] justify-between items-center p-[20px] gap-[16px]",children:[(0,d.jsx)("div",{className:"text-white text-[16px] font-medium",children:e.title}),(0,d.jsxs)("div",{className:"flex justify-start items-center gap-2",children:[(0,d.jsx)("div",{className:"text-[#999] text-[16px] font-medium min-w-[58px]",children:n("RewardTitle")}),e.reward?(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"bg-gradient-to-r from-[#E700E6] to-[#4B4BDF] bg-clip-text text-transparent text-[18px] font-bold",children:(0,d.jsx)(w.eO,{value:Number(e.reward)})}),(0,d.jsx)(g.Z,{className:"w-5 h-5 rounded-full"})]}):null,e.tokenReward?(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"bg-gradient-to-r from-[#E700E6] to-[#4B4BDF] bg-clip-text text-transparent text-[18px] font-bold",children:(0,d.jsx)(w.eO,{value:Number(e.tokenReward)})}),(0,d.jsxs)("span",{children:["$",null===(a=o.tokenInfo)||void 0===a?void 0:a.symbol]})]}):null,e.hasDetails?(0,d.jsx)("a",{onClick:()=>m(),className:"text-[#4E97FF] text-[14px] underline ml-2 cursor-pointer",children:n("RewardDetails")}):null]}),(0,d.jsx)("div",{className:"flex items-center gap-1 text-white text-[14px] font-medium min-w-[191px] text-nowrap",children:e.countdown?(0,d.jsxs)(d.Fragment,{children:[n("ClaimCountdown"),":",(0,d.jsx)("span",{className:"text-gradient",children:e.countdown})]}):null}),(0,d.jsx)("div",{className:"flex justify-start md:justify-end",children:(0,d.jsx)(y.ZP,{status:e.claimable?y.Dv.Active:y.Dv.Disabled,size:y.qE.Small,className:(0,f.m6)("w-[90px] font-medium",e.claimable?"bg-gradient-to-r from-[#E700E6] to-[#4B4BDF]":"bg-[#666666]"),waitForClick:!0,onClick:()=>e.handleClaim(),children:n("Claim")})}),(0,d.jsx)(E,{isOpen:l,requestClose:()=>s(!1),requestClaim:()=>i.handleVoteAirdropClaim(),canClaim:e.claimable})]},t)})]})}var T=a(95665),Z=a(74439),D=a(72446),k=a(97644),O=a(83123),P=a(10433),S=a(20605),_=a(94746);function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}var L=function(e){return _.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",width:11,height:7,fill:"none"},e),n||(n=_.createElement("path",{fill:"url(#icon-arrow-down-linear_svg__a)",d:"M.772.555c.2 0 .4.067.534.2L4.972 5.09c.134.066.2.133.4.133a.7.7 0 0 0 .334-.133L9.572.822a.714.714 0 0 1 .934-.067.714.714 0 0 1 .066.934L6.706 5.955c-.334.4-.867.6-1.4.6-.534 0-1-.266-1.4-.666L.239 1.622C-.028 1.355.039.955.306.69.439.622.639.555.772.555"})),r||(r=_.createElement("defs",null,_.createElement("linearGradient",{id:"icon-arrow-down-linear_svg__a",x1:10.715,x2:.069,y1:3.555,y2:3.555,gradientUnits:"userSpaceOnUse"},_.createElement("stop",{stopColor:"#E700E6"}),_.createElement("stop",{offset:1,stopColor:"#4B4BDF"})))))},M=a(41525),F=a(79787),U=a(22928),V=a(41849);function G(e){var t,a;let{t:n}=(0,v.$G)(["dao","common"]),r=(0,j.T)(),l=(0,j.C)(e=>e.user),s=(0,j.C)(e=>e.dao),o=[{value:x.r.RewardType.VOTE_REWARD,text:n("dao:DAOReward")},{value:x.r.RewardType.VOTE_TOP_REWARD,text:n("dao:VoteTopReward")},{value:x.r.RewardType.NODE_TOP_REWARD,text:n("dao:NodeTopReward")},{value:x.r.RewardType.LUCKY_REWARD,text:n("dao:LuckyReward")},{value:x.r.RewardType.OTHERS_REWARD,text:n("dao:OtherReward")}],i={justNow:n("common:JustNow"),minutesAgo:n("common:MinutesAgo",{minutes:"{0}"}),hoursAgo:n("common:HoursAgo",{hours:"{0}"}),daysAgo:n("common:DaysAgo",{days:"{0}"}),monthsAgo:n("common:MonthsAgo",{months:"{0}"}),yearsAgo:n("common:YearsAgo",{years:"{0}"}),yesterday:n("common:Yesterday"),today:n("common:Today")};function c(e){var t,a,l,i;function d(e){c.abort(e)}let c=new AbortController,u=s.myClaimRecord.tableData;if(!e.restart&&u.isLoading)return{promise:Promise.resolve(),cancel:d};let m=e.restart?1:null!==(a=e.page)&&void 0!==a?a:u.pageIndex+1;return r(T.Z.slice.actions.updateMyClaimRecordTableData({...u,isLoading:!0})),{promise:new U.Z().getUserRewardRecordList({daoAddress:null!==(l=null===(t=s.nodeListFilters.selectedDao)||void 0===t?void 0:t.address)&&void 0!==l?l:"",page:m,pageSize:u.pageSize,type:null!==(i=s.myClaimRecord.filters.type)&&void 0!==i?i:void 0}).then(e=>{var t;if(e.hasError()){let t=e.getError();(0,O.L6)(t.msg),r(T.Z.slice.actions.updateMyClaimRecordTableDataToDone()),P.Z.E(t);return}let a=e.getData().toJSON(),n=null!==(t=e.getTotalPage())&&void 0!==t?t:u.total,l=0===e.getTotalPage()||0===a.data.length||a.data.length<u.pageSize,s=[...a.data.map(e=>{var t,a;return{...e,typeText:e.typeText||(null!==(a=null===(t=o.find(t=>t.value===e.type))||void 0===t?void 0:t.text)&&void 0!==a?a:"")}})];r(T.Z.slice.actions.updateMyClaimRecordTableData({...u,pageIndex:m,isLoading:!1,total:n,isEnd:l,data:s}))}).catch(e=>{r(T.Z.slice.actions.updateMyClaimRecordTableDataToDone()),S.Z.canBeIgnore(e)||((0,O.L6)(new O.HU(e,n("Error in fetching reward record")).asToastMessage()),P.Z.E(e))}),cancel:d}}return h.useEffect(()=>{var e;if(s.myClaimRecord.tableData.isLoading||!(null===(e=s.nodeListFilters.selectedDao)||void 0===e?void 0:e.address)||!l.ethInfo.walletAddress)return;let t=Z.Z.sleepForAnimationFrame(16);return t.promise.then(()=>{r(T.Z.slice.actions.clearMyClaimRecordTableData()),(0,h.startTransition)(()=>c({restart:!0}).promise)}),()=>{t.cancel(S.Z.ReactError.useEffectDestroy()),r(T.Z.slice.actions.clearMyClaimRecordTableData())}},[s.myClaimRecord.filters,s.nodeListFilters.selectedDao,l.ethInfo.walletAddress]),(0,d.jsx)(u.ZP,{autoBorder:!0,autoMargin:!1,autoPadding:!1,className:(0,f.m6)("claim-record-table-contain overflow-x-auto w-full",e.className),children:(0,d.jsx)(k.ZP,{pageInfo:{page:s.myClaimRecord.tableData.pageIndex,totalPage:s.myClaimRecord.tableData.total},onPaginationChange:e=>{let{page:t}=e;return 0===t?{promise:Promise.resolve(),cancel:()=>{}}:c({page:t})},children:(0,d.jsxs)("div",{className:"min-w-[562px]",children:[(0,d.jsx)("div",{className:"px-[20px]",children:(0,d.jsxs)("div",{className:" grid grid-cols-4 justify-between items-center text-[14px] font-medium text-[#666]",children:[(0,d.jsx)("span",{className:"",children:n("dao:Time")}),(0,d.jsx)("span",{className:" text-center",children:(0,d.jsx)(D.Z,{className:"inline-block selection-type",titleClassName:"text-[#666]",autoBorder:!1,menuList:o,defaultSelected:o.findIndex(e=>e.value===s.myClaimRecord.filters.type),onMenuItemClick:(e,t)=>{t!==s.myClaimRecord.filters.type&&r(t?T.Z.slice.actions.updateMyClaimRecordFilters({type:t}):T.Z.slice.actions.clearMyClaimRecordFilters())},children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[null===s.myClaimRecord.filters.type?n("dao:Type"):null!==(a=null===(t=o.find(e=>e.value===s.myClaimRecord.filters.type))||void 0===t?void 0:t.text)&&void 0!==a?a:"",(0,d.jsx)(L,{})]})})}),(0,d.jsx)("span",{className:" text-center",children:n("dao:Amount")}),(0,d.jsx)("span",{className:" text-right",children:n("dao:Tx")})]})}),(0,d.jsxs)("div",{className:"min-h-[250px]",children:[(0,d.jsx)("div",{className:"divide-y divide-[#111]",children:s.myClaimRecord.tableData.data.map(e=>{var t;let a=Z.Z.latestDate(new Date(e.createTime),i);return(0,d.jsxs)("div",{className:"px-[20px] py-[22px] grid grid-cols-4 justify-between items-center hover:opacity-90 border-bottom border-[#666] text-[16px] font-medium",children:[(0,d.jsx)("div",{className:"text-left time",children:a}),(0,d.jsx)("div",{className:"text-center type",children:e.typeText}),(0,d.jsxs)("div",{className:"flex justify-center items-center gap-2 text-center amount",children:[(0,d.jsx)(w.eO,{value:Number(e.reward),useSub:!0,children:(0,d.jsx)(g.Z,{})}),0!==Number(e.tokenReward)?(0,d.jsx)(w.eO,{value:Number(e.tokenReward),useSub:!0,children:(0,d.jsxs)("span",{children:["$",null===(t=s.tokenInfo)||void 0===t?void 0:t.symbol]})}):null]}),(0,d.jsx)("div",{className:"text-right tx",children:(0,d.jsx)(M.Z,{hash:e.tx,text:F.Z.toShort(e.tx)})})]},e.id)})}),0===s.myClaimRecord.tableData.data.length?(0,d.jsx)(V.Z,{className:"pt-[100px]"}):null]})]})})})}var q=a(50544);function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}var $=function(e){return _.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:20,height:36,fill:"none"},e),l||(l=_.createElement("path",{fill:"url(#icon-arrow-left-linear_svg__a)",d:"M20 2.616c0 .672-.222 1.343-.667 1.79L4.89 16.719c-.222.448-.445.672-.445 1.343 0 .224.223.896.445 1.12L19.11 32.164a2.41 2.41 0 0 1 .222 3.133 2.37 2.37 0 0 1-3.11.224L2 22.538c-1.333-1.119-2-2.91-2-4.7s.889-3.358 2.222-4.701L16.445.825c.888-.895 2.222-.671 3.11.224.223.448.445 1.12.445 1.567"})),s||(s=_.createElement("defs",null,_.createElement("linearGradient",{id:"icon-arrow-left-linear_svg__a",x1:10,x2:10,y1:36.001,y2:.256,gradientUnits:"userSpaceOnUse"},_.createElement("stop",{stopColor:"#E700E6"}),_.createElement("stop",{offset:1,stopColor:"#4B4BDF"})))))};function W(){return(W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}var H=function(e){return _.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",width:20,height:36,fill:"none"},e),o||(o=_.createElement("path",{fill:"url(#icon-arrow-right-linear_svg__a)",d:"M0 2.616c0 .672.222 1.343.667 1.79L15.11 16.719c.222.448.444.672.444 1.343 0 .224-.222.896-.444 1.12L.89 32.164a2.41 2.41 0 0 0-.222 3.133 2.37 2.37 0 0 0 3.11.224L18 22.538c1.333-1.119 2-2.91 2-4.7s-.889-3.358-2.222-4.701L3.556.825C2.666-.07 1.333.154.444 1.05.222 1.497 0 2.17 0 2.616"})),i||(i=_.createElement("defs",null,_.createElement("linearGradient",{id:"icon-arrow-right-linear_svg__a",x1:10,x2:10,y1:36.001,y2:.256,gradientUnits:"userSpaceOnUse"},_.createElement("stop",{stopColor:"#E700E6"}),_.createElement("stop",{offset:1,stopColor:"#4B4BDF"})))))},Y=a(99376),J=a(72300),K=a(13965),Q=a(20151),X=a(46493),ee=a(72917);function et(){var e,t,a,n,r,l,s,o,i,d;let c=(0,j.C)(e=>e.dao),u=(0,j.C)(e=>e.user),{t:m}=(0,v.$G)(["dao"]),p=(0,X.Z)(),f=(0,q.Z)(),h=null!==(s=null===(e=c.userInfo)||void 0===e?void 0:e.userInfo.nodeType)&&void 0!==s?s:x.r.NodeType.NONE,g=(0,ee.Z)(),w=new I.Z(b.Z.wei2eth(null!==(o=null===(a=f.nodeToNextMap.get(h))||void 0===a?void 0:null===(t=a.nextValue)||void 0===t?void 0:t.upgradeInfo.ethPrice)&&void 0!==o?o:0n)),N=p.getAmountOutByAmountIn(w.toString(),!1,{floarFix:1.01}),y=null!==(i=null===(n=u.tokenBalances.find(e=>e.address===c.tokenInfo.address))||void 0===n?void 0:n.balance)&&void 0!==i?i:"0",C=(null!==(d=null===(l=f.nodeToNextMap.get(h))||void 0===l?void 0:null===(r=l.nextValue)||void 0===r?void 0:r.upgradeInfo.ethPrice)&&void 0!==d?d:0n)>0n;return{applyNode:async function(){var e,t,a,n;if(!(null===(e=c.nodeListFilters.selectedDao)||void 0===e?void 0:e.address)){(0,O.L6)(m("NoSelectedDao"));return}let r=K.r.getInstance(),l=b.Z.getInstance(r.getProvider()),s=await l.getSigner(),o=Q.bR.connect(null===(t=c.nodeListFilters.selectedDao)||void 0===t?void 0:t.address,s),i=Q.ed.connect(c.tokenInfo.address,s);try{if(!C)throw Error(m("UserNodeTypeDontNeedApply"));if(new I.Z(N).gt(0)){let e=await i.allowance(u.ethInfo.walletAddress,c.nodeListFilters.selectedDao.address),t=I.Z.max(b.Z.eth2wei(N).toString(),b.Z.eth2wei(y).toString());if(t.gte(e.toString())){let e=await i.approve(c.nodeListFilters.selectedDao.address,BigInt(t.toFixed(0))),a=await e.wait();P.Z.I("approve ".concat(c.nodeListFilters.selectedDao.address," ").concat(t.toFixed(0)),a)}}if(h===x.r.NodeType.MASTER){if(a=x.r.NodeType.SUPER,h!==a-1)throw Error(m("UserNodeTypeCanNotApplyThisNode",{name:m("mainNode.title")}));let e=await o.applySuperNode();return await e.wait()}if(n=x.r.NodeType.CANDIDATE,h!==n-1)throw Error(m("UserNodeTypeCanNotApplyThisNode",{name:m("candidateNode.title")}));let e=await o.applyCandidateNode(),t=await e.wait(),r=Promise.all([g.updateCurrentRoundInfo(),g.updateUserCurrentRoundInfo()]);return{txRes:e,receipt:t,updateDataPromise:r}}catch(e){return(0,O.L6)(new O.HU(e,m("ApplyFailed")).asToastMessage()),P.Z.E(e),!1}},userApplyInfo:{userNodeType:h,applyPriceInEth:w,applyPriceInToken:N,tokenBalance:y}}}var ea=a(40066);function en(e){let t=(0,j.C)(e=>e.dao),{t:a}=(0,v.$G)(["dao"]),[n,r]=h.useState(!1),l=e.upgradeInfo.requiredNodeCount>0n,s=l?new I.Z(e.upgradeInfo.userNodeCount.toString()).div(e.upgradeInfo.requiredNodeCount.toString()):new I.Z(1),o=e.upgradeInfo.ethPrice>0n;async function i(){var e,n;if((null!==(n=null===(e=t.userInfo)||void 0===e?void 0:e.voteInfo.votedAmount)&&void 0!==n?n:0n)<=0n){(0,O.L6)(a("NeedVoteForApplyNode"));return}r(!0)}return(0,d.jsxs)("div",{className:"w-full flex-shrink-0",children:[(0,d.jsx)(u.ZP,{autoBorder:!0,autoMargin:!1,autoPadding:!1,className:"relative bg-[#050505] rounded-lg p-6",children:(0,d.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[e.data.isCurrent?(0,d.jsx)("h2",{className:"text-center text-xl bg-gradient-to-r from-primary to-highlight p-[1px] rounded-lg",children:(0,d.jsx)("div",{className:"bg-[#050505] rounded-lg px-4",children:(0,d.jsx)("span",{className:"text-gradient text-[14px] font-medium",children:a("currentIdentity")})})}):null,(0,d.jsx)("img",{src:e.data.image,alt:e.data.title,className:"w-[300px] h-[140px] object-contain"}),(0,d.jsx)("h3",{className:"text-white text-[26px] font-medium",children:e.data.title}),e.data.isCurrent?null:(0,d.jsx)("p",{className:"text-white text-[14px] font-medium text-center max-w-md",children:e.data.description}),e.data.isNext&&l?(0,d.jsxs)("div",{className:"w-full flex flex-col items-stretch gap-4",children:[(0,d.jsxs)("div",{className:"text-right",children:[e.upgradeInfo.userNodeCount.toString(),"/",e.upgradeInfo.requiredNodeCount.toString()]}),(0,d.jsx)("div",{className:"relative w-full h-[15px] border border-[#666] rounded-full",children:(0,d.jsx)("div",{className:(0,f.m6)("absolute left-0 top-0 bottom-0 h-full bg-gradient-to-r from-primary to-highlight rounded-full transition-transform"),style:{width:"".concat(Math.min(s.multipliedBy(100).toNumber(),100),"%")},children:(0,d.jsx)("span",{className:(0,f.m6)("absolute top-1/2 bg-gradient-to-r from-primary to-highlight min-w-[60px] px-2 py-1 text-center rounded-full text-[14px] mt-[-14px] transition-transform"),style:{right:"".concat(-60*Math.max(0,1-s.toNumber()),"px")},children:e.upgradeInfo.userNodeCount.toString()})})})]}):null,e.data.isNext&&o?(0,d.jsx)(y.ZP,{status:s.gte(1)?y.Dv.Active:y.Dv.Disabled,className:"mt-4 w-[157px]",waitForClick:!0,onClick:i,children:a("apply")}):null]})}),(0,d.jsx)(er,{isOpen:n,requestClose:()=>{r(!1)},name:e.data.title,tokenInfo:t.tokenInfo})]})}function er(e){let t=(0,Y.useRouter)();(0,j.C)(e=>e.dao);let{t:a}=(0,v.$G)(["dao"]),n=et(),r=new I.Z(n.userApplyInfo.tokenBalance).gt(n.userApplyInfo.applyPriceInToken),l=N.Q.getTargetNet();async function s(){!1!==await n.applyNode()&&((0,O.x9)(a("ApplySuccessDescription",{name:e.name})),e.requestClose())}return(0,d.jsx)(A.Z,{isOpen:e.isOpen,onRequestClose:e.requestClose,title:r?a("ApplyFor",{name:e.name}):a("InsufflcientBalance"),size:"small",controls:{buttons:[{text:a("Back"),type:"normal",onClick:e.requestClose},r?{text:a("Apply"),type:"active",onClick:s}:{text:a("Buy"),type:"active",onClick:()=>{let a=new URLSearchParams;a.append(J.Z.TokenParams.TOKEN_ADDRESS,e.tokenInfo.address),t.push("/token/swap?".concat(a.toString()))}}]},tipText:a("ApplyWith",{name:e.tokenInfo.symbol,worth:"".concat(n.userApplyInfo.applyPriceInEth.toNumber()," ").concat(l.nativeCurrency.symbol)}),children:(0,d.jsxs)("div",{className:"flex flex-col items-center gap-[18px]",children:[(0,d.jsxs)("div",{className:"flex justify-center items-center gap-2 apply-requirement",children:[(0,d.jsx)(w.eO,{className:"text-[20px] text-gradient font-bold",preChildren:(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)(ea.Z,{className:"w-[12px] h-[15px]"}),(0,d.jsx)("span",{children:"≈"})]}),value:Number(n.userApplyInfo.applyPriceInToken)}),(0,d.jsx)("img",{src:e.tokenInfo.icon,alt:e.tokenInfo.symbol,className:"w-[20px] h-[20px]"}),(0,d.jsx)("span",{className:"unit",children:e.tokenInfo.symbol})]}),(0,d.jsxs)("div",{className:"flex justify-center items-center gap-2 balance-info",children:[a("Balance"),":",(0,d.jsx)(w.eO,{className:"text-gradient font-bold",value:Number(n.userApplyInfo.tokenBalance)}),(0,d.jsx)("img",{src:e.tokenInfo.icon,alt:e.tokenInfo.symbol,className:"w-[20px] h-[20px]"}),(0,d.jsx)("span",{className:"unit",children:e.tokenInfo.symbol})]})]})})}var el=a(49481),es=a(56856),eo=a(78604);function ei(e){(0,j.T)();let t=(0,j.C)(e=>e.dao),a=(0,j.C)(e=>e.user),{t:n}=(0,v.$G)(["dao"]),[r,l]=(0,h.useState)(0),s=(0,q.Z)();(0,es.Z)({autoUpdateTokenInfo:!0});let o=(0,el.Z)(a.ethInfo.walletAddress),i=(0,eo.ZP)(),c=et(),u=Array.from(s.nodeMap.entries()).filter(e=>{let[t]=e;return t!==x.r.NodeType.NONE}).map(e=>{let[t,a]=e;return{...a,type:t,isPrev:c.userApplyInfo.userNodeType>t,isCurrent:c.userApplyInfo.userNodeType===t,isNext:c.userApplyInfo.userNodeType===t-1,description:c.userApplyInfo.userNodeType>t?n("levelBelowDescription"):a.description,upgradeInfo:a.upgradeInfo}});async function m(e){(e=null!=e?e:t.tokenInfo)&&await o.updateTokenBalances([e])}return h.useEffect(()=>{if(!t.tokenInfo||!a.ethInfo.walletAddress)return;let e=Z.Z.sleepForAnimationFrame(16);return e.promise.then(()=>{m(t.tokenInfo)}),()=>{e.cancel(S.Z.ReactError.useEffectDestroy())}},[t.tokenInfo,a.ethInfo.walletAddress]),h.useEffect(()=>{var e;if(!(null===(e=t.daoContractInfo)||void 0===e?void 0:e.pairAddress))return;let a=Z.Z.sleepForAnimationFrame(16);return a.promise.then(()=>{var e;if(null===(e=t.daoContractInfo)||void 0===e?void 0:e.pairAddress)return i.updateInfo(t.daoContractInfo.pairAddress)}),()=>{a.cancel(S.Z.ReactError.useEffectDestroy())}},[t.daoContractInfo]),(0,d.jsx)("div",{className:(0,f.m6)("mx-auto my-[40px] max-w-[624px] flex flex-col items-stretch space-y-6",e.className),children:(0,d.jsxs)("div",{className:"relative w-full overflow-hidden grid grid-cols-1 md:grid-cols-[50px_1fr_50px] items-center",children:[(0,d.jsx)("div",{className:"absolute z-10 md:static flex justify-start",children:(0,d.jsx)($,{className:"cursor-pointer transition-transform transform translate-x-1/4 hover:translate-x-0 opacity-90 hover:opacity-100",onClick:()=>{l(e=>(e-1+u.length)%u.length)}})}),(0,d.jsx)("div",{className:"overflow-x-hidden mx-[10px] md:mx-0",children:(0,d.jsx)("div",{className:"flex items-center transition-transform duration-300 ease-in-out",style:{transform:"translateX(-".concat(100*r,"%)")},children:u.map((e,t)=>(0,d.jsx)(en,{data:e,upgradeInfo:e.upgradeInfo},t))})}),(0,d.jsx)("div",{className:"absolute right-0 z-10 md:static flex justify-end",children:(0,d.jsx)(H,{className:"cursor-pointer transition-transform transform -translate-x-1/4 hover:translate-x-0 opacity-90 hover:opacity-100",onClick:()=>{l(e=>(e+1)%u.length)}})})]})})}var ed=a(32223);function ec(e){let{t}=(0,v.$G)(["common","dao"]),[a,n]=h.useState(""),r={title:(0,d.jsx)(d.Fragment,{children:t("dao:MyReward")}),url:x.r.MyAssetsPageTab.MyReward,children:()=>(0,d.jsx)(R,{},r.url)},l={title:(0,d.jsx)(d.Fragment,{children:t("dao:MyRecords")}),url:x.r.MyAssetsPageTab.MyRecords,children:()=>(0,d.jsx)(G,{},l.url)},s={title:(0,d.jsx)(d.Fragment,{children:t("dao:ApplyNode")}),url:x.r.MyAssetsPageTab.ApplyNode,children:()=>(0,d.jsx)(ei,{},s.url)},o=[r,l,s];function i(e){location.href="#".concat(e),n(e)}return h.useEffect(()=>{let e=location.hash.replace("#","");if(location.hash){let t=o.find(t=>t.url===e);if(t){i(t.url);return}}i(r.url)},[]),(0,d.jsx)("div",{className:(0,f.m6)("flex flex-col items-stretch",e.className),children:(0,d.jsxs)("div",{className:"flex flex-col justify-center mb-[30px] w-[1180px] max-w-full mx-auto",children:[(0,d.jsx)("div",{className:"flex flex-col items-stretch md:items-start",children:(0,d.jsx)(ed.Z,{className:"",tabItemClassName:()=>"w-[33%] md:w-auto",tabItemTitleClassName:()=>"w-full",displayType:ed.L.BorderGradient,tabList:o,activeIndex:o.findIndex(e=>e.url===a),onClick:i})}),(0,d.jsx)("div",{className:"mt-[20px]",children:o.filter(e=>e.url===a).map(e=>e.children())})]})})}var eu=a(12628),em=a(78733);function ep(){let e=(0,j.C)(e=>e.global);(0,j.C)(e=>e.dao);let t=(0,j.C)(e=>e.user);(0,ee.Z)(void 0,{autoTrigger:!0,autoUpdateTokenInfo:!0});let a=!e.token||!t.ethInfo.isConnected;return(0,d.jsx)("div",{className:"relative overflow-x-hidden text-secondary bg-[#000000]",children:(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)(p.Z,{}),(0,d.jsx)(c.Z,{}),(0,d.jsxs)(u.ZP,{width:u.W7.Wrapper,background:u.nV.None,className:"mx-[20px] 2xl:mx-auto",children:[(0,d.jsx)(eu.Z,{activeTarget:x.r.VotingTabEnum.NODE}),(0,d.jsx)("div",{className:(0,f.m6)("flex flex-col items-stretch"),children:a?(0,d.jsx)(em.Z,{}):(0,d.jsx)(ec,{})}),(0,d.jsx)(m.Z,{})]})]})})}},72446:function(e,t,a){"use strict";a.d(t,{Z:function(){return f}});var n,r,l,s,o=a(57437),i=a(2265);function d(e){var t,a;let n=(0,i.useRef)(null);return(0,i.useEffect)(()=>{function t(t){if(n.current&&!n.current.contains(t.target)){var a;null===(a=e.onClose)||void 0===a||a.call(e)}}return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[e]),(0,o.jsx)("div",{ref:n,className:"drop-down-menu ".concat(null===(t=e.withPoint)||void 0===t||t?"with-point":"no-point"," ").concat(null!==(a=e.menuPosition)&&void 0!==a?a:"menu-in-bottom"),children:e.children})}a(47836),(n=l||(l={})).TOP="menu-in-top",n.BOTTOM="menu-in-bottom";var c=a(71845);a(17981);var u=a(72790),m=a(11340),p=a(53335),x=a(68071);function f(e){var t,a;let{title:n,titleClassName:r,children:l,autoBorder:s,icon:f,iconPosition:v,hoverToShow:h,defaultSelected:g,needSelected:w,needDropIcon:N,onMenuItemClick:y,onClose:j,menuList:b,menuPosition:C,className:I,...A}=e,[E,R]=(0,i.useState)(!1),[T,Z]=(0,i.useState)(null!=g?g:0);return s=null==s||s,N=null==N||N,(0,o.jsxs)(x.ZP,{className:(0,p.m6)("drop-down cursor-pointer text-[10px] md:text-[14px] height-[50px] leading-[50px]",I),...A,onMouseOver:()=>h&&R(!0),onMouseLeave:()=>h&&R(!1),autoBorder:s,autoMargin:!1,autoPadding:!1,background:x.nV.None,children:[l?(0,o.jsx)(u.Z,{className:"drop-down-title-contain",horizontalArrangement:m.cV.SpaceBetween,verticalAlignment:m.v2.Center,onClick:()=>R(!E),children:l}):(0,o.jsxs)(u.Z,{className:"drop-down-title-contain px-1 md:px-[10px] md:gap-5",horizontalArrangement:m.cV.SpaceBetween,verticalAlignment:m.v2.Center,onClick:()=>R(!E),children:[(0,o.jsx)("span",{className:(0,p.m6)("white-space-nowrap max-w-full drop-down-title text-white px-1 md:px-[10px]",r),children:(n&&"function"==typeof n?n(T):n)||(null!==(a=null===(t=b[T])||void 0===t?void 0:t.text)&&void 0!==a?a:"Missing")}),N?(0,o.jsx)(c.Z,{className:"text-[#333] icon",alt:"icon"}):null]}),E?(0,o.jsx)("div",{className:"cover",onClick:()=>R(!1)}):null,E?(0,o.jsx)(d,{menuPosition:C,onClose:j,withPoint:!0,children:b.map((e,t)=>{var a;return(0,o.jsxs)(u.Z,{horizontalArrangement:e.desc?m.cV.SpaceBetween:m.cV.Center,verticalAlignment:m.v2.Center,className:"menu-item cursor-pointer hover transition-fast ".concat(T===t&&(null==w||w)?"selected":""),onClick:()=>{var a;return a=e.value,void((null==w||w)&&Z(t),R(!1),null==y||y(t,a))},children:[(0,o.jsxs)(u.Z,{horizontalArrangement:m.cV.Start,className:"left",children:[0===v&&e.icon?(0,o.jsx)("div",{className:"icon-contain flex justify-center items-center",children:(0,o.jsx)("img",{className:"icon",src:e.icon,alt:"icon"})}):null,(0,o.jsx)("span",{className:"text bold",children:e.text}),1===v&&e.icon?(0,o.jsx)("div",{className:"icon-contain flex justify-center items-center",children:(0,o.jsx)("img",{className:"icon",src:e.icon,alt:"icon"})}):null]}),(0,o.jsx)("span",{className:"desc",children:null!==(a=e.desc)&&void 0!==a?a:""})]},e.text)})}):""]})}(r=s||(s={}))[r.LEFT=0]="LEFT",r[r.RIGHT=1]="RIGHT"},78733:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var n,r,l,s,o=a(57437),i=a(94746);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}var c=function(e){return i.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 45 36"},e),n||(n=i.createElement("path",{fill:"#666",d:"M26.663 11.193h13.12l-1.75-3.896c-.477-1.113-1.829-1.59-2.942-1.113l-8.666 3.976c-.477.238-.318 1.033.238 1.033m17.651 3.737c0-1.192-1.033-2.226-2.226-2.226H13.226c-1.192 0-2.226 1.034-2.226 2.226v18.844C11 34.966 12.034 36 13.226 36h28.862c1.193 0 2.226-1.034 2.226-2.226v-6.122h-8.746a3.36 3.36 0 0 1-3.34-3.34 3.36 3.36 0 0 1 3.34-3.34h8.746z"})),r||(r=i.createElement("path",{fill:"#666",d:"M34.456 24.392a1.113 1.113 0 1 0 2.225 0 1.113 1.113 0 0 0-2.225 0"})),l||(l=i.createElement("path",{fill:"url(#icon-file-warning_svg__a)",d:"M9.6 0C4.299 0 0 4.475 0 10s4.299 10 9.6 10 9.6-4.475 9.6-10S14.901 0 9.6 0m0 15.612c-.56 0-1.011-.474-1.011-1.054 0-.583.452-1.056 1.011-1.056.56 0 1.011.473 1.011 1.056 0 .58-.452 1.054-1.011 1.054m1.71-10.1-.86 5.564c-.115.723-.496 1.315-.85 1.315s-.735-.592-.85-1.315L7.89 5.51C7.774 4.788 8.256 4 8.96 4h1.279c.705 0 1.187.786 1.071 1.511"})),s||(s=i.createElement("defs",null,i.createElement("linearGradient",{id:"icon-file-warning_svg__a",x1:0,x2:19.2,y1:10,y2:10,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#E700E6"}),i.createElement("stop",{offset:1,stopColor:"#4B4BDF"})))))},u=a(43949),m=a(53335);function p(e){let{t}=(0,u.$G)(["common"]);return(0,o.jsxs)("div",{className:(0,m.m6)("flex flex-col justify-center items-center gap-[18px] p-[65px]",e.className),children:[(0,o.jsx)(c,{className:"w-[44px] h-[38px]"}),(0,o.jsx)("div",{className:"text-white",children:t("NoConnectWalletTip")})]})}},17981:function(){},47836:function(){}},function(e){e.O(0,[1283,5073,977,6870,668,2784,7181,2506,6764,7048,3448,1707,9738,1811,6570,6011,4942,9481,1240,2771,1937,8263,2971,2117,1744],function(){return e(e.s=63200)}),_N_E=e.O()}]);