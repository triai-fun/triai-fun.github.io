(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7064],{63200:function(e,t,n){Promise.resolve().then(n.bind(n,83664))},83664:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return em}});var a,r,s,i,l,o,d=n(57437),c=n(97235),u=n(68071),p=n(27635),m=n(38435),x=n(89769),f=n(53335),y=n(43949),v=n(2265),h=n(59365),g=n(54740),w=n(3682),N=n(65435),j=n(6178),b=n(81939),C=n(94521),T=n(68651),I=n(56679);function R(e){var t,n,a,r,s,i,l,o,c,u,p,m,x,f,v,w,N,C,R,A;let{t:E}=(0,y.$G)(["dao"]),k=(0,j.C)(e=>e.dao),Z={title:E("DAOReward"),reward:b.Z.wei2eth(null!==(p=null===(t=k.userInfo)||void 0===t?void 0:t.voteAndAirDropReward.clairReward)&&void 0!==p?p:0n)},D=null!==(m=null===(n=k.daoContractInfo)||void 0===n?void 0:n.votePrice)&&void 0!==m?m:1n,M=(null!==(x=null===(a=k.userInfo)||void 0===a?void 0:a.voteInfo.ethDone)&&void 0!==x?x:0n)/D*D;return(0,d.jsx)(I.Z,{isOpen:e.isOpen,onClose:()=>e.requestClose(),className:"w-[420px] bg-[#050505] border border-[#111111] shadow-[0px_0px_50px_#000000] rounded-[8px] p-6",controls:{buttons:[{text:E("Back"),type:"normal",onClick:()=>e.requestClose()},...e.canClaim?[{text:E("Claim"),type:e.canClaim?"active":"disabled",onClick:()=>e.requestClaim()}]:[]]},children:(0,d.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,d.jsx)("h2",{className:"text-white text-[18px] font-semibold text-center",children:null==Z?void 0:Z.title}),(0,d.jsxs)("div",{className:"bg-black border border-[#111111] rounded-[8px] p-4",children:[(0,d.jsxs)("div",{className:"flex justify-center items-center gap-2 mb-4",children:[(0,d.jsx)("span",{className:"text-[14px] text-white",children:E("ClaimableReward")}),(0,d.jsx)("span",{className:"text-[18px] font-bold bg-gradient-to-r from-[#E700E6] to-[#4B4BDF] bg-clip-text text-transparent",children:(0,d.jsx)(g.eO,{value:Number(Z.reward)})}),(0,d.jsx)(h.Z,{className:"w-5 h-5"})]}),(0,d.jsx)("div",{className:"text-[12px] flex flex-col gap-2",children:[{label:E("TotalVotes"),value:null!==(f=null===(r=k.userInfo)||void 0===r?void 0:r.voteInfo.votedAmount)&&void 0!==f?f:0n},{label:E("MaxRewards"),value:new T.Z(((null!==(v=null===(s=k.userInfo)||void 0===s?void 0:s.voteInfo.votedAmount)&&void 0!==v?v:0n)+M).toString()).multipliedBy(2.4).toString()},{label:E("VoteAirdrop"),value:(null!==(w=null===(i=k.userInfo)||void 0===i?void 0:i.voteAndAirDropReward.airdropReward)&&void 0!==w?w:0n)+(null!==(N=null===(l=k.userInfo)||void 0===l?void 0:l.voteAndAirDropReward.reinvestReward)&&void 0!==N?N:0n)},{label:E("VoteReward"),value:null!==(C=null===(o=k.userInfo)||void 0===o?void 0:o.voteAndAirDropReward.nodeReward)&&void 0!==C?C:0n},{label:E("AirdropReward"),value:null!==(R=null===(c=k.userInfo)||void 0===c?void 0:c.voteAndAirDropReward.airdropLinkReward)&&void 0!==R?R:0n},{label:E("RewardClaimed"),value:null!==(A=null===(u=k.userInfo)||void 0===u?void 0:u.voteInfo.ethDone)&&void 0!==A?A:0n},{label:E("AutoVoted"),value:M}].map((e,t)=>(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-[#666666]",children:e.label}),(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"text-white font-semibold",children:(0,d.jsx)(g.eO,{value:Number(b.Z.wei2eth(e.value)),useSub:!0})}),(0,d.jsx)(h.Z,{className:"w-3 h-3"})]})]},t))})]})]})})}function A(e){var t,n;let{t:a}=(0,y.$G)(["dao"]),r=w.Q.getTargetNet(),[s,i]=v.useState(!1),l=(0,j.C)(e=>e.dao),o=(0,C.Z)({autoTrigger:!0,handleAfterClaim:async()=>{i(!1)}}),c=o.estimateUserPendingReward();v.useEffect(()=>{o.refreshAllData()},[]),v.useEffect(()=>{console.log("Node Top Reward:",l.userRewardInfo.nodeTopReward.toString())},[l.userRewardInfo.nodeTopReward]);let p=async()=>{o.isUpdating&&await o.refreshAllData(),i(!0)};return(0,d.jsxs)("div",{className:(0,f.m6)("flex flex-col gap-5",e.className),children:[(0,d.jsxs)(u.ZP,{autoBorder:!0,autoMargin:!1,autoPadding:!1,className:"h-[120px] flex flex-col md:flex-row items-center gap-2 justify-center md:justify-around px-[20px]",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1 text-white text-[16px] font-medium",children:[a("DAORewardClaimed"),":",(0,d.jsx)(g.eO,{className:"text-gradient",value:Number(b.Z.wei2eth(null!==(n=null===(t=l.userInfo)||void 0===t?void 0:t.voteInfo.ethDone)&&void 0!==n?n:0n))}),r.nativeCurrency.symbol]}),(0,d.jsxs)("div",{className:"flex items-center gap-1 text-white text-[16px] font-medium",children:[a("RewardPending"),":",(0,d.jsx)(g.eO,{className:"text-gradient",value:c.toNumber()}),r.nativeCurrency.symbol]})]}),o.rewardItems.map((e,t)=>{var n;return(0,d.jsxs)(u.ZP,{autoBorder:!0,autoMargin:!1,autoPadding:!1,className:"h-auto md:h-[80px] grid grid-cols-1 md:grid-cols-[2fr_3fr_2fr_2fr] justify-between items-center p-[20px] gap-[16px]",children:[(0,d.jsx)("div",{className:"text-white text-[16px] font-medium",children:e.title}),(0,d.jsxs)("div",{className:"flex justify-start items-center gap-2",children:[(0,d.jsx)("div",{className:"text-[#999] text-[16px] font-medium min-w-[58px]",children:a("RewardTitle")}),e.reward?(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"bg-gradient-to-r from-[#E700E6] to-[#4B4BDF] bg-clip-text text-transparent text-[18px] font-bold",children:(0,d.jsx)(g.eO,{value:Number(e.reward)})}),(0,d.jsx)(h.Z,{className:"w-5 h-5 rounded-full"})]}):null,e.tokenReward?(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)("span",{className:"bg-gradient-to-r from-[#E700E6] to-[#4B4BDF] bg-clip-text text-transparent text-[18px] font-bold",children:(0,d.jsx)(g.eO,{value:Number(e.tokenReward)})}),(0,d.jsxs)("span",{children:["$",null===(n=l.tokenInfo)||void 0===n?void 0:n.symbol]})]}):null,e.hasDetails?(0,d.jsx)("a",{onClick:()=>p(),className:"text-[#4E97FF] text-[14px] underline ml-2 cursor-pointer",children:a("RewardDetails")}):null]}),(0,d.jsx)("div",{className:"flex items-center gap-1 text-white text-[14px] font-medium min-w-[191px] text-nowrap",children:e.countdown?(0,d.jsxs)(d.Fragment,{children:[a("ClaimCountdown"),":",(0,d.jsx)("span",{className:"text-gradient",children:e.countdown})]}):null}),(0,d.jsx)("div",{className:"flex justify-start md:justify-end",children:(0,d.jsx)(N.ZP,{status:e.claimable?N.Dv.Active:N.Dv.Disabled,size:N.qE.Small,className:(0,f.m6)("w-[90px] font-medium",e.claimable?"bg-gradient-to-r from-[#E700E6] to-[#4B4BDF]":"bg-[#666666]"),waitForClick:!0,onClick:()=>e.handleClaim(),children:a("Claim")})}),(0,d.jsx)(R,{isOpen:s,requestClose:()=>i(!1),requestClaim:()=>o.handleVoteAirdropClaim(),canClaim:e.claimable})]},t)})]})}var E=n(95665),k=n(74439),Z=n(72446),D=n(97644),M=n(83123),O=n(10433),P=n(20605),S=n(94746);function _(){return(_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var B=function(e){return S.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:11,height:7,fill:"none"},e),a||(a=S.createElement("path",{fill:"url(#icon-arrow-down-linear_svg__a)",d:"M.772.555c.2 0 .4.067.534.2L4.972 5.09c.134.066.2.133.4.133a.7.7 0 0 0 .334-.133L9.572.822a.714.714 0 0 1 .934-.067.714.714 0 0 1 .066.934L6.706 5.955c-.334.4-.867.6-1.4.6-.534 0-1-.266-1.4-.666L.239 1.622C-.028 1.355.039.955.306.69.439.622.639.555.772.555"})),r||(r=S.createElement("defs",null,S.createElement("linearGradient",{id:"icon-arrow-down-linear_svg__a",x1:10.715,x2:.069,y1:3.555,y2:3.555,gradientUnits:"userSpaceOnUse"},S.createElement("stop",{stopColor:"#E700E6"}),S.createElement("stop",{offset:1,stopColor:"#4B4BDF"})))))},L=n(41525),F=n(79787),U=n(22928),V=n(41849);function q(e){var t,n;let{t:a}=(0,y.$G)(["dao","common"]),r=(0,j.T)(),s=(0,j.C)(e=>e.user),i=(0,j.C)(e=>e.dao),l=[{value:x.r.RewardType.VOTE_REWARD,text:a("dao:DAOReward")},{value:x.r.RewardType.VOTE_TOP_REWARD,text:a("dao:VoteTopReward")},{value:x.r.RewardType.NODE_TOP_REWARD,text:a("dao:NodeTopReward")},{value:x.r.RewardType.LUCKY_REWARD,text:a("dao:LuckyReward")},{value:x.r.RewardType.OTHERS_REWARD,text:a("dao:OtherReward")}],o={justNow:a("common:JustNow"),minutesAgo:a("common:MinutesAgo",{minutes:"{0}"}),hoursAgo:a("common:HoursAgo",{hours:"{0}"}),daysAgo:a("common:DaysAgo",{days:"{0}"}),monthsAgo:a("common:MonthsAgo",{months:"{0}"}),yearsAgo:a("common:YearsAgo",{years:"{0}"}),yesterday:a("common:Yesterday"),today:a("common:Today")};function c(e){var t,n,s,o;function d(e){c.abort(e)}let c=new AbortController,u=i.myClaimRecord.tableData;if(!e.restart&&u.isLoading)return{promise:Promise.resolve(),cancel:d};let p=e.restart?1:null!==(n=e.page)&&void 0!==n?n:u.pageIndex+1;return r(E.Z.slice.actions.updateMyClaimRecordTableData({...u,isLoading:!0})),{promise:new U.Z().getUserRewardRecordList({daoAddress:null!==(s=null===(t=i.nodeListFilters.selectedDao)||void 0===t?void 0:t.address)&&void 0!==s?s:"",page:p,pageSize:u.pageSize,type:null!==(o=i.myClaimRecord.filters.type)&&void 0!==o?o:void 0}).then(e=>{var t;if(e.hasError()){let t=e.getError();(0,M.L6)(t.msg),r(E.Z.slice.actions.updateMyClaimRecordTableDataToDone()),O.Z.E(t);return}let n=e.getData().toJSON(),a=null!==(t=e.getTotalPage())&&void 0!==t?t:u.total,s=0===e.getTotalPage()||0===n.data.length||n.data.length<u.pageSize,i=[...n.data.map(e=>{var t,n;return{...e,typeText:e.typeText||(null!==(n=null===(t=l.find(t=>t.value===e.type))||void 0===t?void 0:t.text)&&void 0!==n?n:"")}})];r(E.Z.slice.actions.updateMyClaimRecordTableData({...u,pageIndex:p,isLoading:!1,total:a,isEnd:s,data:i}))}).catch(e=>{r(E.Z.slice.actions.updateMyClaimRecordTableDataToDone()),P.Z.canBeIgnore(e)||((0,M.L6)(new M.HU(e,a("Error in fetching reward record")).asToastMessage()),O.Z.E(e))}),cancel:d}}return v.useEffect(()=>{var e;if(i.myClaimRecord.tableData.isLoading||!(null===(e=i.nodeListFilters.selectedDao)||void 0===e?void 0:e.address)||!s.ethInfo.walletAddress)return;let t=k.Z.sleepForAnimationFrame(16);return t.promise.then(()=>{r(E.Z.slice.actions.clearMyClaimRecordTableData()),(0,v.startTransition)(()=>c({restart:!0}).promise)}),()=>{t.cancel(P.Z.ReactError.useEffectDestroy()),r(E.Z.slice.actions.clearMyClaimRecordTableData())}},[i.myClaimRecord.filters,i.nodeListFilters.selectedDao,s.ethInfo.walletAddress]),(0,d.jsx)(u.ZP,{autoBorder:!0,autoMargin:!1,autoPadding:!1,className:(0,f.m6)("claim-record-table-contain overflow-x-auto w-full",e.className),children:(0,d.jsx)(D.ZP,{pageInfo:{page:i.myClaimRecord.tableData.pageIndex,totalPage:i.myClaimRecord.tableData.total},onPaginationChange:e=>{let{page:t}=e;return 0===t?{promise:Promise.resolve(),cancel:()=>{}}:c({page:t})},children:(0,d.jsxs)("div",{className:"min-w-[562px]",children:[(0,d.jsx)("div",{className:"px-[20px]",children:(0,d.jsxs)("div",{className:" grid grid-cols-4 justify-between items-center text-[14px] font-medium text-[#666]",children:[(0,d.jsx)("span",{className:"",children:a("dao:Time")}),(0,d.jsx)("span",{className:" text-center",children:(0,d.jsx)(Z.Z,{className:"inline-block selection-type",titleClassName:"text-[#666]",autoBorder:!1,menuList:l,defaultSelected:l.findIndex(e=>e.value===i.myClaimRecord.filters.type),onMenuItemClick:(e,t)=>{t!==i.myClaimRecord.filters.type&&r(t?E.Z.slice.actions.updateMyClaimRecordFilters({type:t}):E.Z.slice.actions.clearMyClaimRecordFilters())},children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[null===i.myClaimRecord.filters.type?a("dao:Type"):null!==(n=null===(t=l.find(e=>e.value===i.myClaimRecord.filters.type))||void 0===t?void 0:t.text)&&void 0!==n?n:"",(0,d.jsx)(B,{})]})})}),(0,d.jsx)("span",{className:" text-center",children:a("dao:Amount")}),(0,d.jsx)("span",{className:" text-right",children:a("dao:Tx")})]})}),(0,d.jsxs)("div",{className:"min-h-[250px]",children:[(0,d.jsx)("div",{className:"divide-y divide-[#111]",children:i.myClaimRecord.tableData.data.map(e=>{var t;let n=k.Z.latestDate(new Date(e.createTime),o);return(0,d.jsxs)("div",{className:"px-[20px] py-[22px] grid grid-cols-4 justify-between items-center hover:opacity-90 border-bottom border-[#666] text-[16px] font-medium",children:[(0,d.jsx)("div",{className:"text-left time",children:n}),(0,d.jsx)("div",{className:"text-center type",children:e.typeText}),(0,d.jsxs)("div",{className:"flex justify-center items-center gap-2 text-center amount",children:[(0,d.jsx)(g.eO,{value:Number(e.reward),useSub:!0,children:(0,d.jsx)(h.Z,{})}),0!==Number(e.tokenReward)?(0,d.jsx)(g.eO,{value:Number(e.tokenReward),useSub:!0,children:(0,d.jsxs)("span",{children:["$",null===(t=i.tokenInfo)||void 0===t?void 0:t.symbol]})}):null]}),(0,d.jsx)("div",{className:"text-right tx",children:(0,d.jsx)(L.Z,{hash:e.tx,text:F.Z.toShort(e.tx)})})]},e.id)})}),0===i.myClaimRecord.tableData.data.length?(0,d.jsx)(V.Z,{className:"pt-[100px]"}):null]})]})})})}var G=n(50544);function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var $=function(e){return S.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:20,height:36,fill:"none"},e),s||(s=S.createElement("path",{fill:"url(#icon-arrow-left-linear_svg__a)",d:"M20 2.616c0 .672-.222 1.343-.667 1.79L4.89 16.719c-.222.448-.445.672-.445 1.343 0 .224.223.896.445 1.12L19.11 32.164a2.41 2.41 0 0 1 .222 3.133 2.37 2.37 0 0 1-3.11.224L2 22.538c-1.333-1.119-2-2.91-2-4.7s.889-3.358 2.222-4.701L16.445.825c.888-.895 2.222-.671 3.11.224.223.448.445 1.12.445 1.567"})),i||(i=S.createElement("defs",null,S.createElement("linearGradient",{id:"icon-arrow-left-linear_svg__a",x1:10,x2:10,y1:36.001,y2:.256,gradientUnits:"userSpaceOnUse"},S.createElement("stop",{stopColor:"#E700E6"}),S.createElement("stop",{offset:1,stopColor:"#4B4BDF"})))))};function W(){return(W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var H=function(e){return S.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",width:20,height:36,fill:"none"},e),l||(l=S.createElement("path",{fill:"url(#icon-arrow-right-linear_svg__a)",d:"M0 2.616c0 .672.222 1.343.667 1.79L15.11 16.719c.222.448.444.672.444 1.343 0 .224-.222.896-.444 1.12L.89 32.164a2.41 2.41 0 0 0-.222 3.133 2.37 2.37 0 0 0 3.11.224L18 22.538c1.333-1.119 2-2.91 2-4.7s-.889-3.358-2.222-4.701L3.556.825C2.666-.07 1.333.154.444 1.05.222 1.497 0 2.17 0 2.616"})),o||(o=S.createElement("defs",null,S.createElement("linearGradient",{id:"icon-arrow-right-linear_svg__a",x1:10,x2:10,y1:36.001,y2:.256,gradientUnits:"userSpaceOnUse"},S.createElement("stop",{stopColor:"#E700E6"}),S.createElement("stop",{offset:1,stopColor:"#4B4BDF"})))))},Y=n(99376),J=n(72300),K=n(13965),Q=n(20151),X=n(46493),ee=n(72917);function et(){var e,t,n,a,r,s,i,l,o,d;let c=(0,j.C)(e=>e.dao),u=(0,j.C)(e=>e.user),{t:p}=(0,y.$G)(["dao"]),m=(0,X.Z)(),f=(0,G.Z)(),v=null!==(i=null===(e=c.userInfo)||void 0===e?void 0:e.userInfo.nodeType)&&void 0!==i?i:x.r.NodeType.NONE,h=(0,ee.Z)(),g=new T.Z(b.Z.wei2eth(null!==(l=null===(n=f.nodeToNextMap.get(v))||void 0===n?void 0:null===(t=n.nextValue)||void 0===t?void 0:t.upgradeInfo.ethPrice)&&void 0!==l?l:0n)),w=m.getAmountOutByAmountIn(g.toString(),!1,{floarFix:1.01}),N=null!==(o=null===(a=u.tokenBalances.find(e=>e.address===c.tokenInfo.address))||void 0===a?void 0:a.balance)&&void 0!==o?o:"0",C=(null!==(d=null===(s=f.nodeToNextMap.get(v))||void 0===s?void 0:null===(r=s.nextValue)||void 0===r?void 0:r.upgradeInfo.ethPrice)&&void 0!==d?d:0n)>0n;return{applyNode:async function(){var e,t,n,a;if(!(null===(e=c.nodeListFilters.selectedDao)||void 0===e?void 0:e.address)){(0,M.L6)(p("NoSelectedDao"));return}let r=K.r.getInstance(),s=b.Z.getInstance(r.getProvider()),i=await s.getSigner(),l=Q.bR.connect(null===(t=c.nodeListFilters.selectedDao)||void 0===t?void 0:t.address,i),o=Q.ed.connect(c.tokenInfo.address,i);try{if(!C)throw Error(p("UserNodeTypeDontNeedApply"));if(new T.Z(w).gt(0)){let e=await o.allowance(u.ethInfo.walletAddress,c.nodeListFilters.selectedDao.address),t=T.Z.max(b.Z.eth2wei(w).toString(),b.Z.eth2wei(N).toString());if(t.gte(e.toString())){let e=await o.approve(c.nodeListFilters.selectedDao.address,BigInt(t.toFixed(0))),n=await e.wait();O.Z.I("approve ".concat(c.nodeListFilters.selectedDao.address," ").concat(t.toFixed(0)),n)}}if(v===x.r.NodeType.MASTER){if(n=x.r.NodeType.SUPER,v!==n-1)throw Error(p("UserNodeTypeCanNotApplyThisNode",{name:p("mainNode.title")}));let e=await l.applySuperNode();return await e.wait()}if(a=x.r.NodeType.CANDIDATE,v!==a-1)throw Error(p("UserNodeTypeCanNotApplyThisNode",{name:p("candidateNode.title")}));let e=await l.applyCandidateNode(),t=await e.wait(),r=Promise.all([h.updateCurrentRoundInfo(),h.updateUserCurrentRoundInfo()]);return{txRes:e,receipt:t,updateDataPromise:r}}catch(e){return(0,M.L6)(new M.HU(e,p("ApplyFailed")).asToastMessage()),O.Z.E(e),!1}},userApplyInfo:{userNodeType:v,applyPriceInEth:g,applyPriceInToken:w,tokenBalance:N}}}var en=n(40066);function ea(e){let t=(0,j.C)(e=>e.dao),{t:n}=(0,y.$G)(["dao"]),[a,r]=v.useState(!1),s=e.upgradeInfo.requiredNodeCount>0n,i=s?new T.Z(e.upgradeInfo.userNodeCount.toString()).div(e.upgradeInfo.requiredNodeCount.toString()):new T.Z(1),l=e.upgradeInfo.ethPrice>0n;async function o(){var e,a;if((null!==(a=null===(e=t.userInfo)||void 0===e?void 0:e.voteInfo.votedAmount)&&void 0!==a?a:0n)<=0n){(0,M.L6)(n("NeedVoteForApplyNode"));return}r(!0)}return(0,d.jsxs)("div",{className:"w-full flex-shrink-0",children:[(0,d.jsx)(u.ZP,{autoBorder:!0,autoMargin:!1,autoPadding:!1,className:"relative bg-[#050505] rounded-lg p-6",children:(0,d.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[e.data.isCurrent?(0,d.jsx)("h2",{className:"text-center text-xl bg-gradient-to-r from-primary to-highlight p-[1px] rounded-lg",children:(0,d.jsx)("div",{className:"bg-[#050505] rounded-lg px-4",children:(0,d.jsx)("span",{className:"text-gradient text-[14px] font-medium",children:n("currentIdentity")})})}):null,(0,d.jsx)("img",{src:e.data.image,alt:e.data.title,className:"w-[300px] h-[140px] object-contain"}),(0,d.jsx)("h3",{className:"text-white text-[26px] font-medium",children:e.data.title}),e.data.isCurrent?null:(0,d.jsx)("p",{className:"text-white text-[14px] font-medium text-center max-w-md",children:e.data.description}),e.data.isNext&&s?(0,d.jsxs)("div",{className:"w-full flex flex-col items-stretch gap-4",children:[(0,d.jsxs)("div",{className:"text-right",children:[e.upgradeInfo.userNodeCount.toString(),"/",e.upgradeInfo.requiredNodeCount.toString()]}),(0,d.jsx)("div",{className:"relative w-full h-[15px] border border-[#666] rounded-full",children:(0,d.jsx)("div",{className:(0,f.m6)("absolute left-0 top-0 bottom-0 h-full bg-gradient-to-r from-primary to-highlight rounded-full transition-transform"),style:{width:"".concat(Math.min(i.multipliedBy(100).toNumber(),100),"%")},children:(0,d.jsx)("span",{className:(0,f.m6)("absolute top-1/2 bg-gradient-to-r from-primary to-highlight min-w-[60px] px-2 py-1 text-center rounded-full text-[14px] mt-[-14px] transition-transform"),style:{right:"".concat(-60*Math.max(0,1-i.toNumber()),"px")},children:e.upgradeInfo.userNodeCount.toString()})})})]}):null,e.data.isNext&&l?(0,d.jsx)(N.ZP,{status:i.gte(1)?N.Dv.Active:N.Dv.Disabled,className:"mt-4 w-[157px]",waitForClick:!0,onClick:o,children:n("apply")}):null]})}),(0,d.jsx)(er,{isOpen:a,requestClose:()=>{r(!1)},name:e.data.title,tokenInfo:t.tokenInfo})]})}function er(e){let t=(0,Y.useRouter)();(0,j.C)(e=>e.dao);let{t:n}=(0,y.$G)(["dao"]),a=et(),r=new T.Z(a.userApplyInfo.tokenBalance).gt(a.userApplyInfo.applyPriceInToken),s=w.Q.getTargetNet();async function i(){!1!==await a.applyNode()&&((0,M.x9)(n("ApplySuccessDescription",{name:e.name})),e.requestClose())}return(0,d.jsx)(I.Z,{isOpen:e.isOpen,onRequestClose:e.requestClose,title:r?n("ApplyFor",{name:e.name}):n("InsufflcientBalance"),size:"small",controls:{buttons:[{text:n("Back"),type:"normal",onClick:e.requestClose},r?{text:n("Apply"),type:"active",onClick:i}:{text:n("Buy"),type:"active",onClick:()=>{let n=new URLSearchParams;n.append(J.Z.TokenParams.TOKEN_ADDRESS,e.tokenInfo.address),t.push("/token/swap?".concat(n.toString()))}}]},tipText:n("ApplyWith",{name:e.tokenInfo.symbol,worth:"".concat(a.userApplyInfo.applyPriceInEth.toNumber()," ").concat(s.nativeCurrency.symbol)}),children:(0,d.jsxs)("div",{className:"flex flex-col items-center gap-[18px]",children:[(0,d.jsxs)("div",{className:"flex justify-center items-center gap-2 apply-requirement",children:[(0,d.jsx)(g.eO,{className:"text-[20px] text-gradient font-bold",preChildren:(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)(en.Z,{className:"w-[12px] h-[15px]"}),(0,d.jsx)("span",{children:"≈"})]}),value:Number(a.userApplyInfo.applyPriceInToken)}),(0,d.jsx)("img",{src:e.tokenInfo.icon,alt:e.tokenInfo.symbol,className:"w-[20px] h-[20px]"}),(0,d.jsx)("span",{className:"unit",children:e.tokenInfo.symbol})]}),(0,d.jsxs)("div",{className:"flex justify-center items-center gap-2 balance-info",children:[n("Balance"),":",(0,d.jsx)(g.eO,{className:"text-gradient font-bold",value:Number(a.userApplyInfo.tokenBalance)}),(0,d.jsx)("img",{src:e.tokenInfo.icon,alt:e.tokenInfo.symbol,className:"w-[20px] h-[20px]"}),(0,d.jsx)("span",{className:"unit",children:e.tokenInfo.symbol})]})]})})}var es=n(49481),ei=n(56856),el=n(78604);function eo(e){(0,j.T)();let t=(0,j.C)(e=>e.dao),n=(0,j.C)(e=>e.user),{t:a}=(0,y.$G)(["dao"]),[r,s]=(0,v.useState)(0),i=(0,G.Z)();(0,ei.Z)({autoUpdateTokenInfo:!0});let l=(0,es.Z)(n.ethInfo.walletAddress),o=(0,el.ZP)(),c=et(),u=Array.from(i.nodeMap.entries()).filter(e=>{let[t]=e;return t!==x.r.NodeType.NONE}).map(e=>{let[t,n]=e;return{...n,type:t,isPrev:c.userApplyInfo.userNodeType>t,isCurrent:c.userApplyInfo.userNodeType===t,isNext:c.userApplyInfo.userNodeType===t-1,description:c.userApplyInfo.userNodeType>t?a("levelBelowDescription"):n.description,upgradeInfo:n.upgradeInfo}});async function p(e){(e=null!=e?e:t.tokenInfo)&&await l.updateTokenBalances([e])}return v.useEffect(()=>{if(!t.tokenInfo||!n.ethInfo.walletAddress)return;let e=k.Z.sleepForAnimationFrame(16);return e.promise.then(()=>{p(t.tokenInfo)}),()=>{e.cancel(P.Z.ReactError.useEffectDestroy())}},[t.tokenInfo,n.ethInfo.walletAddress]),v.useEffect(()=>{var e;if(!(null===(e=t.daoContractInfo)||void 0===e?void 0:e.pairAddress))return;let n=k.Z.sleepForAnimationFrame(16);return n.promise.then(()=>{var e;if(null===(e=t.daoContractInfo)||void 0===e?void 0:e.pairAddress)return o.updateInfo(t.daoContractInfo.pairAddress)}),()=>{n.cancel(P.Z.ReactError.useEffectDestroy())}},[t.daoContractInfo]),(0,d.jsx)("div",{className:(0,f.m6)("mx-auto my-[40px] max-w-[624px] flex flex-col items-stretch space-y-6",e.className),children:(0,d.jsxs)("div",{className:"relative w-full overflow-hidden grid grid-cols-1 md:grid-cols-[50px_1fr_50px] items-center",children:[(0,d.jsx)("div",{className:"absolute z-10 md:static flex justify-start",children:(0,d.jsx)($,{className:"cursor-pointer transition-transform transform translate-x-1/4 hover:translate-x-0 opacity-90 hover:opacity-100",onClick:()=>{s(e=>(e-1+u.length)%u.length)}})}),(0,d.jsx)("div",{className:"overflow-x-hidden mx-[10px] md:mx-0",children:(0,d.jsx)("div",{className:"flex items-center transition-transform duration-300 ease-in-out",style:{transform:"translateX(-".concat(100*r,"%)")},children:u.map((e,t)=>(0,d.jsx)(ea,{data:e,upgradeInfo:e.upgradeInfo},t))})}),(0,d.jsx)("div",{className:"absolute right-0 z-10 md:static flex justify-end",children:(0,d.jsx)(H,{className:"cursor-pointer transition-transform transform -translate-x-1/4 hover:translate-x-0 opacity-90 hover:opacity-100",onClick:()=>{s(e=>(e+1)%u.length)}})})]})})}var ed=n(32223);function ec(e){let{t}=(0,y.$G)(["common","dao"]),[n,a]=v.useState(""),r={title:(0,d.jsx)(d.Fragment,{children:t("dao:MyReward")}),url:x.r.MyAssetsPageTab.MyReward,children:()=>(0,d.jsx)(A,{},r.url)},s={title:(0,d.jsx)(d.Fragment,{children:t("dao:MyRecords")}),url:x.r.MyAssetsPageTab.MyRecords,children:()=>(0,d.jsx)(q,{},s.url)},i={title:(0,d.jsx)(d.Fragment,{children:t("dao:ApplyNode")}),url:x.r.MyAssetsPageTab.ApplyNode,children:()=>(0,d.jsx)(eo,{},i.url)},l=[r,s,i];function o(e){location.href="#".concat(e),a(e)}return v.useEffect(()=>{let e=location.hash.replace("#","");if(location.hash){let t=l.find(t=>t.url===e);if(t){o(t.url);return}}o(r.url)},[]),(0,d.jsx)("div",{className:(0,f.m6)("flex flex-col items-stretch",e.className),children:(0,d.jsxs)("div",{className:"flex flex-col justify-center mb-[30px] w-[1180px] max-w-full mx-auto",children:[(0,d.jsx)("div",{className:"flex flex-col items-stretch md:items-start",children:(0,d.jsx)(ed.Z,{className:"",tabItemClassName:()=>"w-[33%] md:w-auto",tabItemTitleClassName:()=>"w-full",displayType:ed.L.BorderGradient,tabList:l,activeIndex:l.findIndex(e=>e.url===n),onClick:o})}),(0,d.jsx)("div",{className:"mt-[20px]",children:l.filter(e=>e.url===n).map(e=>e.children())})]})})}var eu=n(12628),ep=n(78733);function em(){let e=(0,j.C)(e=>e.global);(0,j.C)(e=>e.dao);let t=(0,j.C)(e=>e.user);(0,ee.Z)(void 0,{autoTrigger:!0,autoUpdateTokenInfo:!0});let n=!e.token||!t.ethInfo.isConnected;return(0,d.jsx)("div",{className:"relative overflow-x-hidden text-secondary bg-[#000000]",children:(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)(m.Z,{}),(0,d.jsx)(c.Z,{}),(0,d.jsxs)(u.ZP,{width:u.W7.Wrapper,background:u.nV.None,className:"mx-[20px] 2xl:mx-auto",children:[(0,d.jsx)(eu.Z,{activeTarget:x.r.VotingTabEnum.NODE}),(0,d.jsx)("div",{className:(0,f.m6)("flex flex-col items-stretch"),children:n?(0,d.jsx)(ep.Z,{}):(0,d.jsx)(ec,{})}),(0,d.jsx)(p.Z,{})]})]})})}},72446:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var a,r,s,i,l=n(57437),o=n(2265);function d(e){var t,n;let a=(0,o.useRef)(null);return(0,o.useEffect)(()=>{function t(t){if(a.current&&!a.current.contains(t.target)){var n;null===(n=e.onClose)||void 0===n||n.call(e)}}return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[e]),(0,l.jsx)("div",{ref:a,className:"drop-down-menu ".concat(null===(t=e.withPoint)||void 0===t||t?"with-point":"no-point"," ").concat(null!==(n=e.menuPosition)&&void 0!==n?n:"menu-in-bottom"),children:e.children})}n(47836),(a=s||(s={})).TOP="menu-in-top",a.BOTTOM="menu-in-bottom";var c=n(71845);n(17981);var u=n(72790),p=n(11340),m=n(53335),x=n(68071);function f(e){var t,n;let{title:a,titleClassName:r,children:s,autoBorder:i,icon:f,iconPosition:y,hoverToShow:v,defaultSelected:h,needSelected:g,needDropIcon:w,onMenuItemClick:N,onClose:j,menuList:b,menuPosition:C,className:T,...I}=e,[R,A]=(0,o.useState)(!1),[E,k]=(0,o.useState)(null!=h?h:0);return i=null==i||i,w=null==w||w,(0,l.jsxs)(x.ZP,{className:(0,m.m6)("drop-down cursor-pointer text-[10px] md:text-[14px] height-[50px] leading-[50px]",T),...I,onMouseOver:()=>v&&A(!0),onMouseLeave:()=>v&&A(!1),autoBorder:i,autoMargin:!1,autoPadding:!1,background:x.nV.None,children:[s?(0,l.jsx)(u.Z,{className:"drop-down-title-contain",horizontalArrangement:p.cV.SpaceBetween,verticalAlignment:p.v2.Center,onClick:()=>A(!R),children:s}):(0,l.jsxs)(u.Z,{className:"drop-down-title-contain px-1 md:px-[10px] md:gap-5",horizontalArrangement:p.cV.SpaceBetween,verticalAlignment:p.v2.Center,onClick:()=>A(!R),children:[(0,l.jsx)("span",{className:(0,m.m6)("white-space-nowrap max-w-full drop-down-title text-white px-1 md:px-[10px]",r),children:(a&&"function"==typeof a?a(E):a)||(null!==(n=null===(t=b[E])||void 0===t?void 0:t.text)&&void 0!==n?n:"Missing")}),w?(0,l.jsx)(c.Z,{className:"text-[#333] icon",alt:"icon"}):null]}),R?(0,l.jsx)("div",{className:"cover",onClick:()=>A(!1)}):null,R?(0,l.jsx)(d,{menuPosition:C,onClose:j,withPoint:!0,children:b.map((e,t)=>{var n;return(0,l.jsxs)(u.Z,{horizontalArrangement:e.desc?p.cV.SpaceBetween:p.cV.Center,verticalAlignment:p.v2.Center,className:"menu-item cursor-pointer hover transition-fast ".concat(E===t&&(null==g||g)?"selected":""),onClick:()=>{var n;return n=e.value,void((null==g||g)&&k(t),A(!1),null==N||N(t,n))},children:[(0,l.jsxs)(u.Z,{horizontalArrangement:p.cV.Start,className:"left",children:[0===y&&e.icon?(0,l.jsx)("div",{className:"icon-contain flex justify-center items-center",children:(0,l.jsx)("img",{className:"icon",src:e.icon,alt:"icon"})}):null,(0,l.jsx)("span",{className:"text bold",children:e.text}),1===y&&e.icon?(0,l.jsx)("div",{className:"icon-contain flex justify-center items-center",children:(0,l.jsx)("img",{className:"icon",src:e.icon,alt:"icon"})}):null]}),(0,l.jsx)("span",{className:"desc",children:null!==(n=e.desc)&&void 0!==n?n:""})]},e.text)})}):""]})}(r=i||(i={}))[r.LEFT=0]="LEFT",r[r.RIGHT=1]="RIGHT"},78733:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var a,r,s,i,l=n(57437),o=n(94746);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var c=function(e){return o.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 45 36"},e),a||(a=o.createElement("path",{fill:"#666",d:"M26.663 11.193h13.12l-1.75-3.896c-.477-1.113-1.829-1.59-2.942-1.113l-8.666 3.976c-.477.238-.318 1.033.238 1.033m17.651 3.737c0-1.192-1.033-2.226-2.226-2.226H13.226c-1.192 0-2.226 1.034-2.226 2.226v18.844C11 34.966 12.034 36 13.226 36h28.862c1.193 0 2.226-1.034 2.226-2.226v-6.122h-8.746a3.36 3.36 0 0 1-3.34-3.34 3.36 3.36 0 0 1 3.34-3.34h8.746z"})),r||(r=o.createElement("path",{fill:"#666",d:"M34.456 24.392a1.113 1.113 0 1 0 2.225 0 1.113 1.113 0 0 0-2.225 0"})),s||(s=o.createElement("path",{fill:"url(#icon-file-warning_svg__a)",d:"M9.6 0C4.299 0 0 4.475 0 10s4.299 10 9.6 10 9.6-4.475 9.6-10S14.901 0 9.6 0m0 15.612c-.56 0-1.011-.474-1.011-1.054 0-.583.452-1.056 1.011-1.056.56 0 1.011.473 1.011 1.056 0 .58-.452 1.054-1.011 1.054m1.71-10.1-.86 5.564c-.115.723-.496 1.315-.85 1.315s-.735-.592-.85-1.315L7.89 5.51C7.774 4.788 8.256 4 8.96 4h1.279c.705 0 1.187.786 1.071 1.511"})),i||(i=o.createElement("defs",null,o.createElement("linearGradient",{id:"icon-file-warning_svg__a",x1:0,x2:19.2,y1:10,y2:10,gradientUnits:"userSpaceOnUse"},o.createElement("stop",{stopColor:"#E700E6"}),o.createElement("stop",{offset:1,stopColor:"#4B4BDF"})))))},u=n(43949),p=n(53335);function m(e){let{t}=(0,u.$G)(["common"]);return(0,l.jsxs)("div",{className:(0,p.m6)("flex flex-col justify-center items-center gap-[18px] p-[65px]",e.className),children:[(0,l.jsx)(c,{className:"w-[44px] h-[38px]"}),(0,l.jsx)("div",{className:"text-white",children:t("NoConnectWalletTip")})]})}},54881:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});let a=[{inputs:[{internalType:"address",name:"_stakingToken",type:"address"},{internalType:"address",name:"_factory",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"RewardPaid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"liquidityRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"sendBack",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_timestamp",type:"uint256"}],name:"setInitTimestamps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_liquidityRate",type:"uint256"}],name:"setLiquidityRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_stakingReward",type:"address"}],name:"setStakingReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"stakeFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stakingRewards",outputs:[{internalType:"contract IStakingRewards",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"stakingToken",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"nftAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]},17981:function(){},47836:function(){}},function(e){e.O(0,[1283,5073,977,6870,668,2784,7181,2506,6764,1365,3448,1707,9738,1811,6570,6011,4942,9481,1240,8933,5363,3662,2971,2117,1744],function(){return e(e.s=63200)}),_N_E=e.O()}]);