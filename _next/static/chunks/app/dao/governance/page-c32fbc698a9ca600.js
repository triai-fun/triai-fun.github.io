(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9086],{23560:function(e,s,t){Promise.resolve().then(t.bind(t,25731))},25731:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var n=t(57437),a=t(97235),o=t(68071),i=t(27635),r=t(38435),l=t(10990),d=t(89769),c=t(2265),m=t(43949),x=t(83123),u=t(79787),p=t(74439),h=t(6178),g=t(69356);function v(){let{t:e}=(0,m.$G)(["common","dao"]);return(0,n.jsxs)("div",{className:"py-8 space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("h1",{className:"text-2xl md:text-4xl font-bold text-white",children:e("GovernanceProposalSystemTitle",{ns:"dao"})}),(0,n.jsx)("p",{className:"text-base md:text-lg text-tip",children:e("GovernanceProposalSystemSubtitle",{ns:"dao"})})]}),(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6 lg:gap-8",children:[(0,n.jsx)("div",{className:"flex-1 lg:max-w-[891px]",children:(0,n.jsx)(j,{})}),(0,n.jsx)("div",{className:"w-full lg:w-[420px] lg:flex-shrink-0",children:(0,n.jsx)(f,{})})]})]})}function j(){var e;let{t:s}=(0,m.$G)(["common","dao"]),t=function(){let[e,s]=c.useState({});return c.useEffect(()=>{let e=()=>{let e=new URLSearchParams(location.search),t={get:function(e){return this[e]}};for(let[s,n]of e.entries())t[s]=n;s(t)};return e(),window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[]),e}(),a=(0,h.C)(e=>{var s,t;return null===(t=e.dao.nodeListFilters)||void 0===t?void 0:null===(s=t.selectedDao)||void 0===s?void 0:s.address}),o=(null==t?void 0:null===(e=t.get)||void 0===e?void 0:e.call(t,"daoAddress"))||(null==t?void 0:t.daoAddress),i=(a||o||"").trim().toLowerCase(),r=Date.UTC(2025,7,31,0,0,0),l=async()=>"";return(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsx)(N,{governanceStore:"0x1a714d76f14b9e7c894b5580ce92316021863341"===i?{isLoading:!1,overview:{restartVotecontractAddress:"0x0000000000000000000000000000000000000001",restartVoteFactoryContractAddress:"",daoAddress:a||o||"",isVotingActive:!1,votingStartTime:r,votingEndTime:r+1728e5,votingDurationSeconds:172800,currentVotingRound:1,continueVotes:0n,restartVotes:0n,totalVoters:0n}}:{isLoading:!1,overview:null},castVote:l})})}function f(){let{t:e}=(0,m.$G)(["common","dao"]);(0,h.T)();let s=(0,h.C)(e=>e.user.ethInfo.isConnected),t=(0,h.C)(e=>e.governance.myInfo),a=()=>{(0,x.x9)(e("ComingSoon",{ns:"common"}))};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"bg-[#050505] border border-[#666666] rounded-lg p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:e("CurrentStatus",{ns:"dao"})}),!s&&(0,n.jsx)("div",{className:"space-y-3",children:(0,n.jsx)("p",{className:"text-sm text-tip",children:e("NoConnectWalletTip",{ns:"common"})})}),s&&(0,n.jsxs)("div",{className:"space-y-2",children:[!t&&(0,n.jsx)("p",{className:"text-sm text-tip",children:e("Loading",{ns:"dao"})}),t&&t.hasVoted&&(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-sm text-green-400 font-medium",children:e("AlreadyVoted",{ns:"dao"})}),(0,n.jsx)("p",{className:"text-xs text-tip",children:new Date(t.timestamp).toLocaleString()}),(0,n.jsx)("p",{className:"text-sm font-medium",children:0===t.choice?(0,n.jsx)("span",{className:"text-green-400",children:e("Support",{ns:"dao"})}):(0,n.jsx)("span",{className:"text-red-400",children:e("Oppose",{ns:"dao"})})})]}),t&&!t.hasVoted&&!t.isEligibleToVote&&(0,n.jsx)("p",{className:"text-sm text-tip",children:e("NoVotingEligibility",{ns:"dao"})}),t&&!t.hasVoted&&t.isEligibleToVote&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:"text-sm text-tip",children:[e("votesTitle",{ns:"dao"}),":"]}),(0,n.jsx)("span",{className:"text-white text-sm font-medium",children:Number(t.votingWeight).toLocaleString()})]}),(0,n.jsxs)("div",{className:"space-y-3 mt-4",children:[(0,n.jsx)("button",{onClick:a,className:"w-full py-3 px-4 bg-gradient-to-r from-primary to-highlight text-white font-medium rounded-lg hover:opacity-90 transition-opacity",children:e("CreateNewProposal",{ns:"dao"})}),(0,n.jsx)("button",{onClick:a,className:"w-full py-3 px-4 border border-[#666666] text-white font-medium rounded-lg hover:bg-[#1a1a1a] transition-colors",children:e("ViewMyProposals",{ns:"dao"})})]})]})]}),(0,n.jsxs)("div",{className:"bg-[#050505] border border-[#666666] rounded-lg p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:e("GovernanceRules",{ns:"dao"})}),(0,n.jsxs)("div",{className:"space-y-3 text-sm text-tip",children:[(0,n.jsxs)("div",{className:"flex items-start gap-2",children:[(0,n.jsx)("span",{className:"text-primary",children:"•"}),(0,n.jsx)("span",{children:e("RuleOnlyDAOAddresses",{ns:"dao"})})]}),(0,n.jsxs)("div",{className:"flex items-start gap-2",children:[(0,n.jsx)("span",{className:"text-primary",children:"•"}),(0,n.jsx)("span",{children:e("RuleVoteWeights",{ns:"dao"})})]}),(0,n.jsxs)("div",{className:"flex items-start gap-2",children:[(0,n.jsx)("span",{className:"text-primary",children:"•"}),(0,n.jsx)("span",{children:e("RuleOneVotePerProposal",{ns:"dao"})})]}),(0,n.jsxs)("div",{className:"flex items-start gap-2",children:[(0,n.jsx)("span",{className:"text-primary",children:"•"}),(0,n.jsx)("span",{children:e("SupportRatePass",{ns:"dao",rate:60})})]}),(0,n.jsxs)("div",{className:"flex items-start gap-2",children:[(0,n.jsx)("span",{className:"text-primary",children:"•"}),(0,n.jsx)("span",{children:e("VotingPeriodHours",{ns:"dao",hours:48})})]})]})]})]})}function N(e){var s,t;let{governanceStore:a,castVote:o}=e,{t:i}=(0,m.$G)(["dao"]),r=a.overview,l=a.isLoading,d=!!(null==r?void 0:r.restartVotecontractAddress);if(l&&!r)return(0,n.jsx)("div",{className:"bg-[#050505] border border-[#666666] rounded-lg p-6 hover:border-[#888888] transition-colors",children:(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsx)("h3",{className:"text-lg font-medium text-white",children:i("Loading",{ns:"dao"})})})});if(!d)return(0,n.jsx)("div",{className:"bg-[#050505] border border-[#666666] rounded-lg p-6 hover:border-[#888888] transition-colors",children:(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsx)("h3",{className:"text-lg font-medium text-white",children:i("NoProposal",{ns:"dao"})})})});let c=Date.now(),x=r?(()=>{var e,s;let t=null!==(e=r.votingStartTime)&&void 0!==e?e:0,n=null!==(s=r.votingEndTime)&&void 0!==s?s:0;return c<t?"pending":c<=n?"active":"ended"})():"pending",u=Number((null!==(s=null==r?void 0:r.continueVotes)&&void 0!==s?s:0n)+(null!==(t=null==r?void 0:r.restartVotes)&&void 0!==t?t:0n)),p=(()=>{var e,s,t;let n=(null!==(e=null==r?void 0:r.continueVotes)&&void 0!==e?e:0n)+(null!==(s=null==r?void 0:r.restartVotes)&&void 0!==s?s:0n);return 0n===n?0:Math.round(Number((null!==(t=null==r?void 0:r.continueVotes)&&void 0!==t?t:0n)*10000n/n)/100)})(),h="pending"===x?null==r?void 0:r.votingStartTime:"active"===x?null==r?void 0:r.votingEndTime:void 0,g=h?(()=>{let e=Math.max(0,h-c),s=String(Math.floor(e/36e5)).padStart(2,"0"),t=String(Math.floor(e%36e5/6e4)).padStart(2,"0"),n=String(Math.floor(e%6e4/1e3)).padStart(2,"0");return"".concat(s,":").concat(t,":").concat(n)})():"--:--:--";return(0,n.jsx)(b,{title:i("RestartDAOProposalTitle"),description:i("RestartDAOProposalDescription"),status:x,endTime:g,voteCount:u,supportRate:p,castVote:o})}function b(e){var s,t,a;let{title:o,description:i,status:r,endTime:l,voteCount:d,supportRate:v,castVote:j}=e,{t:f}=(0,m.$G)(["common","dao"]),N=(0,h.T)(),[b,w]=c.useState(!0),[y,V]=c.useState(1),[S,C]=c.useState(!1),[T,A]=c.useState(null),P=e=>{switch(e){case"active":return"text-green-400";case"pending":return"text-yellow-400";default:return"text-gray-400"}},E=(0,h.C)(e=>e.governance.restartVotes),L=(0,h.C)(e=>e.governance.myInfo),k=(0,h.C)(e=>e.user.ethInfo.isConnected),R=Math.max(1,Math.ceil(((null!==(a=null!==(t=E.total)&&void 0!==t?t:null===(s=E.data)||void 0===s?void 0:s.length)&&void 0!==a?a:0)||5*y)/5)),D=E.data||[],M="active"===r,O={justNow:f("JustNow",{ns:"common"}),minutesAgo:f("MinutesAgo",{ns:"common",minutes:"{0}"}),hoursAgo:f("HoursAgo",{ns:"common",hours:"{0}"}),daysAgo:f("DaysAgo",{ns:"common",days:"{0}"}),monthsAgo:f("MonthsAgo",{ns:"common",months:"{0}"}),yearsAgo:f("YearsAgo",{ns:"common",years:"{0}"}),yesterday:f("Yesterday",{ns:"common"}),today:f("Today",{ns:"common"})},G=async e=>{if(!M){(0,x.L6)(f("VotingNotStarted",{ns:"dao"}));return}if(!k){N(g.Z.slice.actions.updateNeedBinding(!0)),(0,x.L6)(f("NoConnectWalletTip",{ns:"common"}));return}if(!(null==L?void 0:L.isEligibleToVote)){(0,x.L6)(f("NoVotingEligibility",{ns:"dao"}));return}if(null==L?void 0:L.hasVoted){(0,x.L6)(f("AlreadyVoted",{ns:"dao"}));return}try{C(!0),A(e),await j(e),(0,x.x9)(f("VoteSuccess",{ns:"dao"}))}catch(s){let e=(null==s?void 0:s.shortMessage)||(null==s?void 0:s.message)||f("VoteFailed",{ns:"dao"});(0,x.L6)(e)}finally{C(!1),A(null)}};return(0,n.jsxs)("div",{className:"bg-[#050505] border border-[#666666] rounded-lg p-6 hover:border-[#888888] transition-colors relative",children:[(0,n.jsxs)("div",{className:"cursor-pointer",onClick:()=>w(!b),children:[(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-4 mb-2",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-white flex items-center gap-2",children:o}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start sm:justify-end gap-1 whitespace-nowrap leading-tight",children:[(0,n.jsx)("span",{className:"text-sm font-medium ".concat(P(r)),children:(e=>{switch(e){case"active":return f("VotingInProgress",{ns:"dao"});case"pending":return f("VotingNotStarted",{ns:"dao"});case"ended":return f("VotingEnd",{ns:"dao"});default:return f("Unknown",{ns:"common"})}})(r)}),"ended"!==r&&(0,n.jsxs)("span",{className:"text-sm font-medium ".concat(P(r)," font-mono tabular-nums ml-1"),children:["(",l,")"]})]})]}),(0,n.jsx)("p",{className:"text-tip text-sm leading-relaxed whitespace-pre-line w-full mb-4",children:i.replaceAll("\\n","\n")}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)("span",{className:"text-sm text-tip",children:[f("TotalVotes",{ns:"dao"}),": ",(0,n.jsx)("span",{className:"text-white",children:d.toLocaleString()})]}),(0,n.jsxs)("span",{className:"text-sm text-tip",children:[f("SupportRate",{ns:"dao"}),": ",(0,n.jsxs)("span",{className:"text-white",children:[v,"%"]})]})]}),"active"===r&&(0,n.jsxs)("div",{className:"flex gap-2 justify-end sm:justify-start",children:[(0,n.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors disabled:opacity-60",disabled:S,onClick:e=>{e.stopPropagation(),G(0)},children:S&&0===T?f("Submitting",{ns:"common"}):f("Support",{ns:"dao"})}),(0,n.jsx)("button",{className:"px-4 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors disabled:opacity-60",disabled:S,onClick:e=>{e.stopPropagation(),G(1)},children:S&&1===T?f("Submitting",{ns:"common"}):f("Oppose",{ns:"dao"})})]}),"pending"===r&&(0,n.jsx)("div",{className:"flex justify-end sm:justify-start",children:(0,n.jsx)("button",{className:"px-4 py-2 border border-[#666666] text-white text-sm rounded hover:bg-[#1a1a1a] transition-colors",children:f("ViewDetails",{ns:"common"})})}),"ended"===r&&(0,n.jsx)("div",{className:"flex justify-end sm:justify-start",children:(0,n.jsx)("span",{className:"text-sm text-tip",children:v>=60?"✅ ".concat(f("Passed",{ns:"dao"})):"❌ ".concat(f("NotPassed",{ns:"dao"}))})})]}),(0,n.jsx)("div",{className:"flex justify-center mt-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-2 text-tip text-xs",children:[(0,n.jsx)("span",{children:b?f("ClickToCollapseVotingRecords",{ns:"dao"}):f("ClickToExpandVotingRecords",{ns:"dao"})}),(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)("div",{className:"w-1 h-1 bg-tip rounded-full opacity-60"}),(0,n.jsx)("div",{className:"w-1 h-1 bg-tip rounded-full opacity-40"}),(0,n.jsx)("div",{className:"w-1 h-1 bg-tip rounded-full opacity-20"})]})]})})]}),b&&(0,n.jsxs)("div",{className:"mt-6 pt-6 border-t border-[#666666]",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h4",{className:"text-white font-medium",children:f("VotingRecords",{ns:"dao"})}),(0,n.jsx)("span",{className:"text-tip text-sm",children:f("TotalRecords",{ns:"dao",count:E.total||D.length})})]}),(0,n.jsx)("div",{className:"space-y-3",children:D.map((e,s)=>{let t=u.Z.toShort(e.userAddress,6,4),a=p.Z.latestDate(new Date(e.voteTime),O),o=0===e.choice;return(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-[#0a0a0a] rounded-lg",children:[(0,n.jsx)("div",{className:"flex items-center gap-3 min-w-0",children:(0,n.jsx)("span",{className:"text-white font-mono text-sm whitespace-nowrap",children:t})}),(0,n.jsxs)("div",{className:"flex items-center gap-4 whitespace-nowrap",children:[(0,n.jsxs)("span",{className:"text-tip text-xs whitespace-nowrap",children:[e.voteNumber," ",f("votesTitle",{ns:"dao"})]}),(0,n.jsx)("span",{className:"text-sm font-medium ".concat(o?"text-green-400":"text-red-400"," whitespace-nowrap"),children:o?f("Support",{ns:"dao"}):f("Oppose",{ns:"dao"})}),(0,n.jsx)("span",{className:"text-tip text-xs whitespace-nowrap",children:a})]})]},s)})}),R>1&&(0,n.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-6",children:[(0,n.jsx)("button",{onClick:()=>V(e=>Math.max(e-1,1)),disabled:1===y,className:"px-3 py-1 text-sm border border-[#666666] text-white rounded hover:bg-[#1a1a1a] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f("PreviousPage",{ns:"common"})}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:Array.from({length:R},(e,s)=>s+1).map(e=>(0,n.jsx)("button",{onClick:()=>V(e),className:"w-8 h-8 text-sm rounded transition-colors ".concat(y===e?"bg-gradient-to-r from-primary to-highlight text-white":"border border-[#666666] text-white hover:bg-[#1a1a1a]"),children:e},e))}),(0,n.jsx)("button",{onClick:()=>V(e=>Math.min(e+1,R)),disabled:y===R,className:"px-3 py-1 text-sm border border-[#666666] text-white rounded hover:bg-[#1a1a1a] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f("NextPage",{ns:"common"})})]})]})]})}var w=t(72917);function y(){var e,s;let t=(0,h.C)(e=>e.dao);return(0,w.Z)(void 0,{autoTrigger:!0,autoUpdateTokenInfo:!0}),(0,n.jsx)("div",{className:"relative overflow-x-hidden text-secondary bg-[#000000]",children:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)(r.Z,{}),(0,n.jsx)(a.Z,{}),(0,n.jsxs)(o.ZP,{width:o.W7.ContentV2,background:o.nV.None,className:"mx-[20px] 2xl:mx-auto",children:[(0,n.jsx)(l.Z,{activeTarget:d.r.VotingTabEnum.GOVERNANCE}),(0,n.jsx)("div",{className:"mt-[20px]",children:(0,n.jsx)(v,{})},null!==(s=null===(e=t.nodeListFilters.selectedDao)||void 0===e?void 0:e.address)&&void 0!==s?s:"_"),(0,n.jsx)(i.Z,{})]})]})})}}},function(e){e.O(0,[1283,5073,2506,9409,927,9481,2784,6870,977,6764,7048,3448,1707,635,4810,7072,923,344,6011,9302,2580,1240,990,2971,2117,1744],function(){return e(e.s=23560)}),_N_E=e.O()}]);