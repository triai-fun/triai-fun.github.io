(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7210],{4041:function(e,t,n){"use strict";var a,r,i,l,s,o=n(94746);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}t.Z=function(e){return o.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:27,height:30,fill:"none"},e),a||(a=o.createElement("path",{fill:"#E04A48",d:"m6.02 29.793-.88-4.055a.91.91 0 0 0-.764-.444L.418 26.543a.427.427 0 0 1-.36-.64L7.06 13.834a.914.914 0 0 1 1.25-.332l5.115 2.968a.914.914 0 0 1 .332 1.25l-7 12.067a.427.427 0 0 1-.735.005"})),r||(r=o.createElement("path",{fill:"#E04A48",d:"m20.066 29.793.88-4.055a.91.91 0 0 1 .764-.444l3.959 1.249a.427.427 0 0 0 .36-.641l-7.001-12.067a.914.914 0 0 0-1.25-.332l-5.115 2.968a.914.914 0 0 0-.332 1.25l7 12.067c.163.28.568.283.735.005"})),i||(i=o.createElement("path",{fill:"#FCD842",d:"M12.73.094 3.773 4.407a.94.94 0 0 0-.51.64L1.05 14.74a.94.94 0 0 0 .182.797L7.43 23.31a.94.94 0 0 0 .738.355h9.942c.286 0 .558-.13.737-.355l6.198-7.773a.94.94 0 0 0 .182-.798l-2.212-9.692a.94.94 0 0 0-.51-.64L13.548.094a.94.94 0 0 0-.818 0"})),l||(l=o.createElement("path",{fill:"#FFC00E",d:"M4 12.843a8.843 8.843 0 1 0 17.685 0 8.843 8.843 0 0 0-17.685 0"})),s||(s=o.createElement("path",{fill:"#fff",d:"M14.569 8.273V17h-1.846v-6.976h-.05l-2 1.253V9.641l2.161-1.368z"})))}},91274:function(e,t,n){"use strict";var a,r,i,l,s,o=n(94746);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}t.Z=function(e){return o.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:27,height:30,fill:"none"},e),a||(a=o.createElement("path",{fill:"#999",d:"m6.02 29.793-.88-4.055a.91.91 0 0 0-.764-.444L.418 26.543a.427.427 0 0 1-.36-.64L7.06 13.834a.914.914 0 0 1 1.25-.332l5.115 2.968a.914.914 0 0 1 .332 1.25l-7 12.067a.427.427 0 0 1-.735.005"})),r||(r=o.createElement("path",{fill:"#999",d:"m20.066 29.793.88-4.055a.91.91 0 0 1 .764-.444l3.959 1.249a.427.427 0 0 0 .36-.641l-7.001-12.067a.914.914 0 0 0-1.25-.332l-5.115 2.968a.914.914 0 0 0-.332 1.25l7 12.067c.163.28.568.283.735.005"})),i||(i=o.createElement("path",{fill:"#EEE",d:"M12.73.094 3.773 4.407a.94.94 0 0 0-.51.64L1.05 14.74a.94.94 0 0 0 .182.797L7.43 23.31a.94.94 0 0 0 .738.355h9.942c.286 0 .558-.13.737-.355l6.198-7.773a.94.94 0 0 0 .182-.798l-2.212-9.692a.94.94 0 0 0-.51-.64L13.548.094a.94.94 0 0 0-.818 0"})),l||(l=o.createElement("path",{fill:"#CCC",d:"M4.137 12.54a8.843 8.843 0 1 0 17.686 0 8.843 8.843 0 0 0-17.686 0"})),s||(s=o.createElement("path",{fill:"#fff",d:"M9.928 17v-1.33l3.107-2.876q.396-.384.664-.69a2.6 2.6 0 0 0 .414-.601q.14-.299.14-.644 0-.383-.174-.66a1.15 1.15 0 0 0-.478-.43 1.5 1.5 0 0 0-.686-.154q-.4 0-.699.162a1.1 1.1 0 0 0-.46.465 1.5 1.5 0 0 0-.162.72H9.843q0-.857.388-1.488a2.6 2.6 0 0 1 1.086-.975q.699-.346 1.611-.346.938 0 1.632.333a2.6 2.6 0 0 1 1.087.912q.388.584.388 1.338 0 .495-.196.976-.192.48-.687 1.07-.493.583-1.393 1.401l-1.274 1.249v.06h3.665V17z"})))}},11794:function(e,t,n){"use strict";var a,r,i,l,s,o=n(94746);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}t.Z=function(e){return o.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:27,height:30,fill:"none"},e),a||(a=o.createElement("path",{fill:"#6A3615",d:"m6.02 29.793-.88-4.055a.91.91 0 0 0-.764-.444L.418 26.543a.427.427 0 0 1-.36-.64L7.06 13.834a.914.914 0 0 1 1.25-.332l5.115 2.968a.914.914 0 0 1 .332 1.25l-7 12.067a.427.427 0 0 1-.735.005"})),r||(r=o.createElement("path",{fill:"#6A3615",d:"m20.066 29.793.88-4.055a.91.91 0 0 1 .764-.444l3.959 1.249a.427.427 0 0 0 .36-.641l-7.001-12.067a.914.914 0 0 0-1.25-.332l-5.115 2.968a.914.914 0 0 0-.332 1.25l7 12.067c.163.28.568.283.735.005"})),i||(i=o.createElement("path",{fill:"#824520",d:"M12.73.094 3.773 4.407a.94.94 0 0 0-.51.64L1.05 14.74a.94.94 0 0 0 .182.797L7.43 23.31a.94.94 0 0 0 .738.355h9.942c.286 0 .558-.13.737-.355l6.198-7.773a.94.94 0 0 0 .182-.798l-2.212-9.692a.94.94 0 0 0-.51-.64L13.548.094a.94.94 0 0 0-.818 0"})),l||(l=o.createElement("path",{fill:"#723510",d:"M4.137 12.54a8.843 8.843 0 1 0 17.686 0 8.843 8.843 0 0 0-17.686 0"})),s||(s=o.createElement("path",{fill:"#fff",d:"M12.978 17.12q-.954 0-1.7-.329-.741-.331-1.172-.912a2.3 2.3 0 0 1-.439-1.346h1.858a.97.97 0 0 0 .209.562q.196.24.52.37.324.133.728.133.422 0 .746-.15.324-.148.507-.412.183-.265.184-.61a1.02 1.02 0 0 0-.197-.618 1.25 1.25 0 0 0-.553-.426 2.2 2.2 0 0 0-.853-.153h-.814v-1.355h.814q.418 0 .737-.145.324-.145.503-.4a1.04 1.04 0 0 0 .18-.606 1.05 1.05 0 0 0-.593-.967q-.277-.14-.648-.14-.374 0-.686.135a1.2 1.2 0 0 0-.498.38 1 1 0 0 0-.2.58H9.84q.015-.756.431-1.33a2.8 2.8 0 0 1 1.125-.9q.712-.328 1.607-.328.903 0 1.58.329.678.328 1.053.886.38.554.375 1.244.005.733-.456 1.223-.456.49-1.189.622v.069q.963.123 1.466.669.507.54.503 1.355.005.746-.43 1.325-.43.579-1.19.912-.757.333-1.738.332"})))}},15503:function(e,t,n){Promise.resolve().then(n.bind(n,9331))},7310:function(e,t,n){var a=n(28302),r=n(11121),i=n(6660),l=Math.max,s=Math.min;e.exports=function(e,t,n){var o,d,c,u,m,f,v=0,x=!1,h=!1,p=!0;if("function"!=typeof e)throw TypeError("Expected a function");function g(t){var n=o,a=d;return o=d=void 0,v=t,u=e.apply(a,n)}function w(e){var n=e-f,a=e-v;return void 0===f||n>=t||n<0||h&&a>=c}function N(){var e,n,a,i=r();if(w(i))return C(i);m=setTimeout(N,(e=i-f,n=i-v,a=t-e,h?s(a,c-n):a))}function C(e){return(m=void 0,p&&o)?g(e):(o=d=void 0,u)}function j(){var e,n=r(),a=w(n);if(o=arguments,d=this,f=n,a){if(void 0===m)return v=e=f,m=setTimeout(N,t),x?g(e):u;if(h)return clearTimeout(m),m=setTimeout(N,t),g(f)}return void 0===m&&(m=setTimeout(N,t)),u}return t=i(t)||0,a(n)&&(x=!!n.leading,c=(h="maxWait"in n)?l(i(n.maxWait)||0,t):c,p="trailing"in n?!!n.trailing:p),j.cancel=function(){void 0!==m&&clearTimeout(m),v=0,o=f=d=m=void 0},j.flush=function(){return void 0===m?u:C(r())},j}},11121:function(e,t,n){var a=n(74288);e.exports=function(){return a.Date.now()}},9331:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var a=n(57437),r=n(97235),i=n(68071),l=n(27635),s=n(38435),o=n(89769),d=n(53335),c=n(43949),u=n(3682),m=n(6178),f=n(74439),v=n(43009),x=n(2265),h=n(79787),p=n(20605),g=n(20151),w=n(95665),N=n(10433),C=n(81939),j=n(22928),T=n(54740);function b(e){var t,n,r,i,l,s,o,b,R;let E=(0,m.T)(),{t:I}=(0,c.$G)(["dao"]),D=(0,m.C)(e=>e.global),k=(0,m.C)(e=>e.dao),Z=u.Q.getTargetNet(),y=null!==(o=null===(t=k.daoCurrentRoundInfo)||void 0===t?void 0:t.roundExpire)&&void 0!==o?o:-1,S=0!==y&&y<=D.currentTime,A=f.Z.convertTimeDifference(new Date(y-D.currentTime),{includeDays:!1}),L=v.Z.Time.fromJSTimestamp(null!==(b=null===(n=k.daoContractInfo)||void 0===n?void 0:n.roundDurationAdd)&&void 0!==b?b:0n),[_,V]=x.useState(!1);async function F(){var e;if(!(null===(e=k.nodeListFilters.selectedDao)||void 0===e?void 0:e.address))throw Error(I("NoSelectedDao"));let t="0x7CFA99eE55D07214cdD8E5A38501e0C087d212a4";if(!t)throw Error(I("NoDaoFactoryAddress"));let n=g.lf.connect(t,u.Q.getDefaultProvider()),a=n.filters.Vote(k.nodeListFilters.selectedDao.address);return n.off(a),n.on(a,e=>{var t;let n;let[a,r,i,l,s]=e.args;N.Z.I("Vote event",{dao:a,voter:r,votedNode:i,amount:l,timestamp:s}),null===(t=k.nodeListFilters.selectedDao)||void 0===t||t.address,E(w.Z.slice.actions.updateRecentVoteInfoToDao([{address:r,voteEth:Number(C.Z.wei2eth(l))}])),f.Z.sleepForAnimationFrame(new v.Z.Milliseconds(500)).promise.then(()=>(V(!0),f.Z.sleepForAnimationFrame(new v.Z.Seconds(5)).promise)).finally(()=>{V(!1)})}),{cancel:e=>{n.off(a)}}}return x.useEffect(()=>{var e;if(null===(e=k.daoCurrentRoundInfo)||void 0===e?void 0:e.roundExpire)return()=>{}},[null===(r=k.daoCurrentRoundInfo)||void 0===r?void 0:r.roundExpire]),x.useEffect(()=>{var e,t;let n,a;if(!(null===(e=k.nodeListFilters.selectedDao)||void 0===e?void 0:e.address))return;let r=[],i=(n=Promise.resolve(0),a=e=>{},(null===(t=k.nodeListFilters.selectedDao)||void 0===t?void 0:t.address)&&new j.Z().getVotingRecords({daoAddress:k.nodeListFilters.selectedDao.address,page:1,pageSize:5}).then(e=>{var t;E(w.Z.slice.actions.initRecentVoteInfoToDao((null!==(t=e.getData())&&void 0!==t?t:[]).map(e=>({address:e.userAddress.unwrap(),voteEth:Number(e.voteAmount)}))))}),{promise:n,cancel:a});return r.push(i.cancel),i.promise.then(async()=>{let e=await F();r.push(e.cancel)}),()=>{r.forEach(e=>e(p.Z.ReactError.useEffectDestroy())),E(w.Z.slice.actions.clearRecentVoteInfoToDao()),V(!1)}},[null===(i=k.nodeListFilters.selectedDao)||void 0===i?void 0:i.address]),(0,a.jsx)("div",{className:(0,d.m6)("flex flex-col items-stretch bg-[#050505] border border-[#666666] rounded-lg p-5",e.className),children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center text-[14px] gap-[20px] md:gap-1",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center md:items-start",children:[(0,a.jsx)("h3",{className:"text-white text-lg font-bold",children:null!==(R=null===(l=k.daoContractInfo)||void 0===l?void 0:l.name)&&void 0!==R?R:"DAO"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-white",children:[I("CurrentStatus"),":"]}),(0,a.jsx)("span",{className:"bg-gradient-to-r from-[#E700E6] to-[#4B4BDF] bg-clip-text text-transparent",children:S?I("VotingEnd"):I("VotingInProgress")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-white",children:[I("VotingCountdown"),":"]}),(0,a.jsx)("span",{className:(0,d.m6)("text-[#44B72D] text-2xl font-bold ",_&&0!==A?"zoom-in-and-out-blink-animation":""),children:0!==y?S||0===A?"00:00:00":A.toFormated():"--:--:--"})]}),(0,a.jsx)("div",{className:"bg-black border border-[#666666] rounded-lg p-4",children:null===(s=k.recentVoteInfoToDao)||void 0===s?void 0:s.filter((e,t)=>t<5).map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center gap-2 md:gap-4 text-white text-[12px] md:text-sm",children:[(0,a.jsx)("span",{className:"w-[93px]",children:h.Z.toShort(e.address)}),(0,a.jsxs)("div",{className:"flex-[2_0_0] flex justify-between gap-1 md:gap-2",children:[(0,a.jsx)("span",{children:"↑"}),(0,a.jsx)(T.eO,{value:e.voteEth}),(0,a.jsx)("span",{children:Z.nativeCurrency.symbol})]}),(0,a.jsxs)("span",{className:"flex-[1_0_0] text-right",children:[" +",L.toHours(),I("timeUnit")]})]},t))})]})})}var R=n(48423),E=n(74040),I=n(29698),D=n(94521);function k(e){var t,n;let r=(0,m.C)(e=>e.dao),{t:i}=(0,c.$G)(["dao"]),l=(0,m.C)(e=>e.global),s=u.Q.getTargetNet(),o=x.useRef(null),f=(0,D.Z)({autoTrigger:!0}).getClaimNodeRewardCountdown(),v=null!==(n=null===(t=r.daoCurrentRoundInfo)||void 0===t?void 0:t.roundExpire)&&void 0!==n?n:0;return(0,a.jsxs)("div",{className:(0,d.m6)("bg-[#050505] border border-[#666666] rounded-lg p-5",e.className),children:[(0,a.jsxs)("h2",{className:"text-lg text-white mb-2 flex items-center relative gap-2",ref:o,children:[e.title,(0,a.jsx)(I.Z,{whisperProps:{placement:"bottom"},targetContain:o.current,className:"static",tooltipClassName:"mt-[-35px] pointer-events-all",children:(0,a.jsx)("p",{className:"text-[#999999] text-sm mb-4",children:e.description})}),e.node&&f&&v>0&&v>l.currentTime&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 text-lg ml-auto",children:[(0,a.jsxs)("span",{className:"text-[#D9D9D9]",children:[i("Countdown"),": "]}),(0,a.jsx)("span",{className:"text-gradient",children:f})]})]}),(0,a.jsx)("div",{className:"bg-black border border-[#666666] rounded-lg p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex justify-center items-center gap-1 text-[#D9D9D9] text-lg",children:[i("TotalRewards"),":",(0,a.jsxs)("span",{className:"text-white flex items-center gap-1",children:[(0,a.jsx)(T.eO,{value:e.totalRewards,valueClassName:"text-gradient"}),s.nativeCurrency.symbol]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_3fr_1fr_2fr] justify-between text-sm text-[#999999]",children:[(0,a.jsx)("span",{children:i("rankingTitle")}),(0,a.jsx)("span",{className:"text-center",children:i("userTitle")}),(0,a.jsx)("span",{className:"text-center",children:i("votesTitle")}),(0,a.jsx)("span",{className:"text-right",children:i("rewardTitle")})]}),[e.topVoter?[{...e.topVoter,marked:!0}]:[],e.voters].flat().map((e,t)=>(0,a.jsxs)("div",{className:(0,d.m6)("grid grid-cols-[1fr_3fr_1fr_2fr] items-center p-3 rounded-lg",e.marked&&"bg-gradient-to-r from-[#E700E6] to-[#4B4BDF]"),children:[(0,a.jsx)("span",{className:"rank",children:e.rank?(0,a.jsx)(E.Z,{rank:e.rank,className:"text-center w-[27px]"}):"-"}),(0,a.jsx)("div",{className:"flex justify-center items-center text-center gap-2",children:(0,a.jsx)("span",{className:"text-white",children:e.address?(0,a.jsx)(R.Z,{address:e.address,text:h.Z.toShort(e.address)}):"-"})}),(0,a.jsx)("span",{className:"text-white item-center text-center",children:e.votes?(0,a.jsx)(T.eO,{value:e.votes}):"-"}),(0,a.jsx)("span",{className:"text-white justify-end text-right",children:e.reward?(0,a.jsx)(T.eO,{className:"justify-end mr-0",value:e.reward,useSub:!0}):"-"})]},t))]})]})}function Z(e){var t,n,r,i,l,s;let{t:u}=(0,c.$G)(["dao"]),f=(0,m.C)(e=>e.dao),x=(0,m.C)(e=>e.user),h={...null!==(r=f.userRankInfo.find(e=>e.rewardType===o.r.RankRewardType.LUCKY_REWARD))&&void 0!==r?r:{address:x.ethInfo.walletAddress},reward:f.userRewardInfo.luckyReward.toNumber()};return(0,a.jsx)(k,{className:(0,d.m6)("",e.className),title:u("RewardRankTitle"),description:u("RewardRankDescription",{maxCount:"33",endTime:v.Z.Time.fromJSTimestamp(null!==(i=null===(t=f.daoContractInfo)||void 0===t?void 0:t.loserPoolRewardTimeLimit)&&void 0!==i?i:0n).toHours()}),totalRewards:Number(C.Z.wei2eth(null!==(l=null===(n=f.daoCurrentRoundInfo)||void 0===n?void 0:n.pool.luckyPool)&&void 0!==l?l:0n)),topVoter:h,voters:null!==(s=f.rankInfo.luckyRank)&&void 0!==s?s:[]})}var y=n(50544);function S(e){var t,n,r,i,l,s,u,f,h,p;let g;let{t:w}=(0,c.$G)(["dao"]),N=(0,m.C)(e=>e.dao),j=(0,m.C)(e=>e.user),{getNodeTypeByAddress:T}=(0,y.Z)(),[b,R]=x.useState(null),[E,I]=x.useState(!1);x.useEffect(()=>{I(!0)},[]);let D=(null!==(l=N.rankInfo.nodeRank)&&void 0!==l?l:[]).findIndex(e=>e.address===j.ethInfo.walletAddress),Z=N.userRankInfo.find(e=>e.rewardType===o.r.RankRewardType.NODE_TOP_REWARD),S=Z&&Z.rank&&Z.rank<=3&&(-1===D||D>=3);if(x.useEffect(()=>{var e;E&&j.ethInfo.walletAddress&&(null===(e=N.daoContractInfo)||void 0===e?void 0:e.daoAddress)&&T(j.ethInfo.walletAddress).then(R).catch(()=>R(o.r.NodeType.NONE))},[E,j.ethInfo.walletAddress,null===(t=N.daoContractInfo)||void 0===t?void 0:t.daoAddress,T]),D>=0){let e=(null!==(s=N.rankInfo.nodeRank)&&void 0!==s?s:[])[D];g={...e,votes:e.beVotes}}else if(S){let e=(null==Z?void 0:Z.votes)||0;g={address:j.ethInfo.walletAddress,rank:4,reward:0,votes:e}}else{let e=(null==Z?void 0:Z.votes)||0;g={...null!=Z?Z:{address:j.ethInfo.walletAddress},reward:N.userRewardInfo.nodeTopReward.toNumber(),votes:e}}let A=E&&null!==b&&b!==o.r.NodeType.MASTER&&b!==o.r.NodeType.SUPER;return(0,a.jsx)(k,{className:(0,d.m6)("",e.className),title:w("NodeRankTitle"),description:w("NodeRankDescription",{rate:(null!==(u=null===(n=N.daoContractInfo)||void 0===n?void 0:n.communityRewardRate)&&void 0!==u?u:0)*100,time:v.Z.Time.fromJSTimestamp(null!==(f=null===(r=N.daoContractInfo)||void 0===r?void 0:r.communityDuration)&&void 0!==f?f:0n).toHours(),maxCount:"3"}),totalRewards:Number(C.Z.wei2eth(null!==(h=null===(i=N.daoCurrentRoundInfo)||void 0===i?void 0:i.pool.communityPool)&&void 0!==h?h:0n)),topVoter:A?null:g,voters:(null!==(p=N.rankInfo.nodeRank)&&void 0!==p?p:[]).map(e=>({...e,votes:e.beVotes})),node:!0})}function A(e){var t,n,r,i,l,s,u,f,x;let h;let{t:p}=(0,c.$G)(["dao"]),g=(0,m.C)(e=>e.dao),w=(0,m.C)(e=>e.user),N=(null!==(i=g.rankInfo.voteRank)&&void 0!==i?i:[]).findIndex(e=>e.address===w.ethInfo.walletAddress),j=g.userRankInfo.find(e=>e.rewardType===o.r.RankRewardType.VOTE_TOP_REWARD),T=j&&j.rank&&j.rank<=3&&(-1===N||N>=3);if(N>=0){let e=(null!==(l=g.rankInfo.voteRank)&&void 0!==l?l:[])[N];h={...e,votes:e.beVotes}}else if(T){let e=(null==j?void 0:j.votes)||0;h={address:w.ethInfo.walletAddress,rank:4,reward:0,votes:e}}else{let e=(null==j?void 0:j.votes)||0;h={...null!=j?j:{address:w.ethInfo.walletAddress},reward:g.userRewardInfo.voteTopReward.toNumber(),votes:e}}return(0,a.jsx)(k,{className:(0,d.m6)("",e.className),title:p("VoteRankTitle"),description:p("VoteRankDescription",{maxCount:"3",time:v.Z.Time.fromJSTimestamp(null!==(s=null===(t=g.daoContractInfo)||void 0===t?void 0:t.airdropDurationCalc)&&void 0!==s?s:0n).toHours(),rate:(null!==(u=null===(n=g.daoContractInfo)||void 0===n?void 0:n.voteRankRewardRate)&&void 0!==u?u:0)*100}),totalRewards:Number(C.Z.wei2eth(null!==(f=null===(r=g.daoCurrentRoundInfo)||void 0===r?void 0:r.pool.voteRankPool)&&void 0!==f?f:0n)),topVoter:h,voters:(null!==(x=g.rankInfo.voteRank)&&void 0!==x?x:[]).map(e=>({...e,votes:e.beVotes}))})}var L=n(65435);function _(e){let{t}=(0,c.$G)("dao"),n=x.useRef(null);return(0,a.jsxs)("div",{className:(0,d.m6)("flex flex-col justify-between items-stretch gap-4 bg-[#050505] border border-[#666666] rounded-lg p-5",e.className),children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-lg text-white mb-2 relative flex items-center gap-2",ref:n,children:[e.title,(0,a.jsx)(I.Z,{whisperProps:{placement:"bottom"},targetContain:n.current,className:"static",tooltipClassName:"mt-[-35px] pointer-events-all",children:(0,a.jsx)("p",{className:"text-[#999999] text-sm mb-4",children:e.description})})]}),(0,a.jsx)("div",{className:"bg-black border border-[#666666] rounded-lg p-4",children:(0,a.jsx)("div",{className:"text-[#D9D9D9] text-lg text-center",children:e.value})})]}),e.countdown?(0,a.jsxs)("div",{className:"text-[#D9D9D9] text-center mt-2",children:[t("Countdown"),": ",(0,a.jsx)("span",{className:"text-white text-gradient",children:e.countdown})]}):(0,a.jsx)(L.ZP,{className:"w-full md:w-[330px] mx-auto",waitForClick:!0,onClick:e.controlButton.onClick,children:e.controlButton.title}),e.extraLink&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"inline-block",children:(0,a.jsxs)("a",{className:"flex flex-col items-center cursor-pointer hover:opacity-90",onClick:t=>{var n,a;t.preventDefault(),t.stopPropagation(),null===(a=e.extraLink)||void 0===a||null===(n=a.onClick)||void 0===n||n.call(a)},children:[(0,a.jsx)("span",{className:"block text-gradient",children:e.extraLink.title}),(0,a.jsx)("span",{className:"block w-full h-[1px] bg-gradient-to-r from-[#E700E6] to-[#4B4BDF]"})]})})})]})}var V=n(68651),F=n(72917),O=n(75370);function q(e){var t,n,r;(0,m.C)(e=>e.global);let i=(0,m.C)(e=>e.dao),{t:l}=(0,c.$G)("dao"),s=(0,F.Z)(),o=u.Q.getTargetNet(),f=(0,O.Z)(),v=f.isRoundClaimEnd?void 0:f.getFundCountdownInfo(),x={value:C.Z.wei2eth(null!==(r=null===(t=i.daoCurrentRoundInfo)||void 0===t?void 0:t.pool.fundPool)&&void 0!==r?r:0n),unit:o.nativeCurrency.symbol};return(0,a.jsx)("div",{className:(0,d.m6)("",e.className),children:(0,a.jsx)(_,{title:l("FundInfoTitle"),description:l("FundInfoDescription",{name:null===(n=i.nodeListFilters.selectedDao)||void 0===n?void 0:n.name,rate:new V.Z("10000").div(100).toString()}),value:(0,a.jsx)("div",{className:"text-[#D9D9D9] flex justify-center items-center gap-2 text-lg text-center",children:(0,a.jsx)(T.eO,{preChildren:"".concat(l("FundValueTitle"),":"),value:Number(x.value),valueClassName:"text-gradient",children:x.unit})}),countdown:null==v?void 0:v.toFormated(),controlButton:{title:l("FundButton"),onClick:s.reopenDAO}})})}var P=n(99376),M=n(40066);function B(e){var t,n;let r=(0,P.useRouter)(),i=(0,m.C)(e=>e.dao),{t:l}=(0,c.$G)("dao"),s=(0,O.Z)(),o=s.isRoundClaimEnd?void 0:s.getClaimCountdownInfo();async function f(){}return u.Q.getTargetNet(),(0,a.jsx)("div",{className:(0,d.m6)("",e.className),children:(0,a.jsx)(_,{title:l("RewardTitle"),description:l("RewardDescription",{name:i.tokenInfo.symbol,rate:new V.Z("10000").div(100).toString()}),value:(0,a.jsxs)("div",{className:"text-[#D9D9D9] flex justify-center items-center gap-3 text-lg text-center",children:[(0,a.jsx)("div",{className:"flex items-end gap-2",children:(0,a.jsx)(M.Z,{className:"w-[20px] h-[25px]"})}),(0,a.jsx)("div",{className:"flex flex-col items-start",children:[{value:null!==(n=null===(t=i.daoCurrentRoundInfo)||void 0===t?void 0:t.pool.loserPool)&&void 0!==n?n:0n,unit:"$".concat(i.tokenInfo.symbol)}].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(T.eO,{value:Number(C.Z.wei2eth(e.value)),valueClassName:"text-gradient"}),(0,a.jsx)("span",{children:e.unit})]},e.unit))})]}),countdown:null==o?void 0:o.toFormated(),controlButton:{title:l("RewardButton"),onClick:f},extraLink:{title:l("RewardRecordsTitle"),onClick:()=>{let e=new URLSearchParams(location.search);r.push("/dao/reward/record?".concat(e.toString()))}}})})}var U=n(14931);function H(e){var t;(0,m.T)();let n=(0,m.C)(e=>e.dao),r=(0,m.C)(e=>e.global);(0,m.C)(e=>e.user);let{t:i}=(0,c.$G)(["dao"]);(0,U.Z)(void 0,{autoTrigger:!0}),(0,D.Z)({autoTrigger:!0});let[l,s]=x.useState(0);async function o(){let e=Date.now();e-l<6e4||s(e)}return x.useEffect(()=>{var e;if(!(null===(e=n.nodeListFilters.selectedDao)||void 0===e?void 0:e.address)||!r.token)return;let t=f.Z.sleepForAnimationFrame(400);t.wait(()=>{o().catch(e=>{console.error("Failed to update data:",e)})});let a=setInterval(()=>{"visible"===document.visibilityState&&o().catch(e=>{console.error("Failed to update data:",e)})},6e4);return()=>{t.cancel(p.Z.ReactError.useEffectDestroy()),clearInterval(a)}},[null===(t=n.nodeListFilters.selectedDao)||void 0===t?void 0:t.address]),(0,a.jsxs)("div",{className:(0,d.m6)("flex flex-col items-stretch gap-[20px]",e.className),children:[(0,a.jsx)(b,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-[20px] justify-between items-stretch",children:[(0,a.jsx)(Z,{className:"order-2 md:order-1"}),(0,a.jsxs)("div",{className:"flex flex-col gap-[20px] order-1 md:order-2",children:[(0,a.jsx)(A,{}),(0,a.jsx)(S,{}),(0,a.jsx)(q,{}),(0,a.jsx)(B,{})]})]})]})}var J=n(12628);function G(){return(0,F.Z)(void 0,{autoTrigger:!0,autoUpdateTokenInfo:!0}),(0,a.jsx)("div",{className:"relative overflow-x-hidden text-secondary bg-[#000000]",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(s.Z,{}),(0,a.jsx)(r.Z,{}),(0,a.jsxs)(i.ZP,{width:i.W7.ContentV2,background:i.nV.None,className:"mx-[20px] 2xl:mx-auto",children:[(0,a.jsx)(J.Z,{activeTarget:o.r.VotingTabEnum.EWV}),(0,a.jsx)(H,{className:"mt-[20px]"}),(0,a.jsx)(l.Z,{})]})]})})}},40066:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(57437);function r(e){var t,n;let r=null!==(t=e.defsPrexId)&&void 0!==t?t:"paint0";return(0,a.jsxs)("svg",{viewBox:"0 0 12 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:null!==(n=e.className)&&void 0!==n?n:"",children:[(0,a.jsx)("path",{d:"M3.99681 6.00318H1.99045V3.66242C1.99045 3.15287 2.0913 2.67781 2.29299 2.23726C2.49469 1.79671 2.77335 1.40924 3.12898 1.07484C3.48461 0.740446 3.90393 0.477707 4.38694 0.286624C4.86996 0.0955414 5.39809 -1.03773e-08 5.97134 0C6.48089 0 6.97187 0.0955414 7.44427 0.286624C7.91667 0.477707 8.33599 0.740446 8.70223 1.07484C9.06847 1.40924 9.3604 1.79671 9.57802 2.23726C9.79565 2.67781 9.90446 3.15287 9.90446 3.66242V6.00318H7.97771V4.10828C7.97771 3.43949 7.79193 2.92197 7.42038 2.55573C7.04883 2.18949 6.54459 2.00637 5.90764 2.00637C5.33439 2.00637 4.87261 2.18949 4.52229 2.55573C4.17197 2.92197 3.99681 3.43949 3.99681 4.10828V6.00318ZM10.8599 6.9586C11.1465 6.9586 11.3933 7.0621 11.6003 7.26911C11.8073 7.47611 11.9108 7.72293 11.9108 8.00955V12.9459C11.9108 13.2325 11.8604 13.5005 11.7596 13.75C11.6587 13.9995 11.5207 14.2171 11.3455 14.4029C11.1704 14.5886 10.9634 14.7346 10.7245 14.8408C10.4857 14.9469 10.2229 15 9.93631 15H1.8949C1.60828 15 1.3482 14.9469 1.11465 14.8408C0.881104 14.7346 0.682059 14.5939 0.517516 14.4188C0.352972 14.2436 0.225584 14.0393 0.13535 13.8057C0.0451166 13.5722 0 13.3227 0 13.0573V8.00955C0 7.72293 0.100849 7.47611 0.302548 7.26911C0.504246 7.0621 0.748407 6.9586 1.03503 6.9586H1.99045H3.99681H7.97771H9.90446H10.8599Z",fill:"url(#".concat(r,"_linear_20_507)")}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"".concat(r,"_linear_20_507"),x1:"-0.000176537",y1:"7.49995",x2:"11.9108",y2:"7.49995",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#E700E6"}),(0,a.jsx)("stop",{offset:"1",stopColor:"#4B4BDF"})]})})]})}},48423:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(57437);n(2265),n(53953);var r=n(22448),i=n(10867),l=n(3682),s=n(53335);function o(e){let{chainId:t,address:n,text:o,children:d,className:c,...u}=e,m=(0,a.jsx)(r.Z,{children:n}),f=new l.Q(t).getAddressUrl(n);return(0,a.jsx)(i.Z,{placement:"top",speaker:m,trigger:"hover",children:(0,a.jsx)("a",{className:(0,s.m6)("component-chain-address-link pointer hover underline",c),href:f,target:"_blank",...u,children:null!=o?o:n})})}},29698:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var a,r=n(57437),i=n(10867),l=n(22448),s=n(94746);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var d=function(e){return s.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},e),a||(a=s.createElement("path",{fill:"#fff",fillOpacity:.8,d:"M6.992 0q1.455 0 2.73.555t2.229 1.502a7 7 0 0 1 1.502 2.221Q14 5.553 14 7.008t-.547 2.722a7.056 7.056 0 0 1-3.73 3.723Q8.445 14 6.992 14q-1.455 0-2.723-.547a7.1 7.1 0 0 1-2.22-1.502A7.1 7.1 0 0 1 .546 9.73 6.8 6.8 0 0 1 0 7.008q0-1.455.547-2.73.548-1.275 1.502-2.221A7.3 7.3 0 0 1 4.27.555 6.7 6.7 0 0 1 6.992 0m.016 11.794a.92.92 0 0 0 .68-.273.9.9 0 0 0 .274-.665.92.92 0 0 0-.274-.68.92.92 0 0 0-.68-.274.92.92 0 0 0-.68.273.92.92 0 0 0-.274.68q0 .392.273.666.275.273.68.273m.798-3.848q-.016-.25.312-.531.329-.282.736-.626t.75-.774.376-.994q.03-.61-.125-1.142a2.24 2.24 0 0 0-.516-.915 2.5 2.5 0 0 0-.931-.61q-.57-.227-1.338-.227-.954 0-1.587.337a3.3 3.3 0 0 0-1.025.813q-.39.477-.547.986-.158.508-.141.852.015.407.258.595a.88.88 0 0 0 .524.195.84.84 0 0 0 .516-.156.55.55 0 0 0 .235-.477q0-.189.117-.462t.32-.524q.204-.25.494-.422.289-.172.649-.172.703 0 1.126.352.422.351.391.883a.85.85 0 0 1-.156.493 2.4 2.4 0 0 1-.4.438q-.242.211-.516.422-.273.211-.516.438a2.4 2.4 0 0 0-.406.493q-.165.266-.18.579l.015.594q0 .235.22.446.218.212.578.227.36-.015.571-.235a.65.65 0 0 0 .196-.5z"})))},c=n(53335),u=n(2265);function m(e){let t=u.useRef(null);return(0,r.jsx)("div",{ref:t,className:(0,c.m6)("relative",e.className),children:(0,r.jsx)(i.Z,{placement:"auto",className:(0,c.m6)("",e.containClassName),container:()=>{var n,a;return null!==(a=null!==(n=e.targetContain)&&void 0!==n?n:t.current)&&void 0!==a?a:"undefined"!=typeof document?document.body:null},speaker:(0,r.jsx)(l.Z,{className:(0,c.m6)("-mt-[25px]",e.tooltipClassName),style:{maxWidth:"1000px"},children:e.children}),trigger:"hover",enterable:!0,rootClose:!0,...e.whisperProps,children:(0,r.jsx)(d,{className:(0,c.m6)("w-[14px] h-[14px]",e.iconClassName)})})})}},74040:function(e,t,n){"use strict";var a,r,i=n(57437),l=n(4041),s=n(91274),o=n(11794),d=n(53335);(a=r||(r={})).rankIcons=[void 0,l.Z,s.Z,o.Z],a.Rank=function(e){let t=a.rankIcons[e.rank]||(t=>(0,i.jsx)("span",{className:(0,d.m6)("block",e.className,t.className),children:e.rank}));return(0,i.jsx)(t,{})},t.Z=r.Rank},32223:function(e,t,n){"use strict";n.d(t,{L:function(){return r},Z:function(){return o}});var a,r,i=n(57437),l=n(53335);n(61940);var s=n(2265);function o(e){var t,n;let[a,r]=(0,s.useState)(null!==(t=e.activeIndex)&&void 0!==t?t:0),o=null!==(n=e.displayType)&&void 0!==n?n:"default";return(0,s.useEffect)(()=>{void 0!==e.activeIndex&&e.activeIndex!==a&&r(e.activeIndex)},[e.activeIndex]),(0,i.jsxs)("div",{className:(0,l.m6)("tab-list-v2 flex flex-col items-stretch ".concat(o),e.className),children:[(0,i.jsxs)("ul",{className:(0,l.m6)("list tab-list-title flex flex-row items-center",e.tabListTitleClassName),children:[e.title?(0,i.jsx)("li",{className:(0,l.m6)("item tab-list-title-item bold transition-fast no-active text-[12px] md:text-[14px]",e.tabList.length>3?"flex-1 md:flex-none":"",e.titleClassName),children:(0,i.jsx)("span",{className:"flex justify-center items-center title cursor-pointer hover transition-fast",children:e.title})},-1):null,e.tabList.map((t,n)=>{var s,d;return(0,i.jsx)("li",{className:(0,l.m6)("item tab-list-title-item bold transition-fast text-[12px] md:text-[14px] ".concat(a==n?"in-active":"no-active"),e.tabList.length>3?"flex-1 md:flex-none":"",null===(s=e.tabItemClassName)||void 0===s?void 0:s.call(e,a===n)),children:(0,i.jsx)("span",{onClick:()=>{r(n),e.onClick(e.tabList[n].url)},className:(0,l.m6)("flex justify-center items-center title cursor-pointer hover transition-fast w-full",null===(d=e.tabItemTitleClassName)||void 0===d?void 0:d.call(e,a===n)),children:(0,i.jsx)("i",{className:a==n&&("default"===o||"border-gradient"===o)?"text-gradient":"text-secondary",children:t.title})})},n)})]}),e.children?(0,i.jsx)("ul",{className:"list tab-list-content",children:e.children}):""]})}(a=r||(r={})).Default="default",a.BorderGradient="border-gradient",a.BgGradient="bg-gradient"},75370:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var a,r,i,l,s=n(63995),o=n(5853),d=n(74439),c=n(43009),u=n(8113),m=n(6178),f=n(2265);function v(){let e=(0,m.C)(e=>e.global),t=(0,m.C)(e=>e.dao);return f.useMemo(()=>{var n,a,r,i;return new h().initialize({roundEndTime:null!==(r=null===(n=t.daoCurrentRoundInfo)||void 0===n?void 0:n.roundExpire)&&void 0!==r?r:-1,timeCanReward:null!==(i=null===(a=t.daoContractInfo)||void 0===a?void 0:a.loserPoolRewardTimeLimit)&&void 0!==i?i:0,currentTime:e.currentTime})},[t.daoCurrentRoundInfo,t.daoContractInfo,e.currentTime])}(a=i||(i={}))[a.UNINITIALIZED=0]="UNINITIALIZED",a[a.ROUND_READY=1]="ROUND_READY",a[a.ROUND_START=2]="ROUND_START",a[a.ROUND_END=3]="ROUND_END",(r=l||(l={}))[r.UNINITIALIZED=0]="UNINITIALIZED",r[r.CLAIM_START=1]="CLAIM_START",r[r.CLAIM_END=2]="CLAIM_END";class x{static defaultInfo(){return{toFormated:()=>"--:--:--"}}}class h extends u.Vw.BaseDataAdapter{initialize(e){return super.initialize(e),this}get roundStatus(){let e=this.roundEndTime.toJSTime(),t=this.currentTime;return -1===e?0:0===e?1:e>t?2:3}get isRoundStart(){return 0!==this.roundStatus&&1!==this.roundStatus}get isRoundEnd(){return 3===this.roundStatus}getRoundEndCountdown(){return d.Z.convertTimeDifference(new Date(this.roundEndTime.toJSTime()-this.currentTime))}get roundClaimStartTime(){return this.roundEndTime.toJSTime()}getRoundClaimStartCountdown(){let e=d.Z.convertTimeDifference(new Date(this.roundClaimStartTime-this.currentTime),{includeDays:!1});return 0===e?x.defaultInfo():e}get roundClaimEndTime(){return -1===this.roundEndTime.toJSTime()?-1:this.roundEndTime.toJSTime()+this.timeCanReward.toJSTime()}get claimStatus(){return 0===this.timeCanReward.toJSTime()?0:this.roundClaimEndTime<=this.currentTime?2:this.roundClaimStartTime<=this.currentTime?1:0}get isRoundClaimStart(){return 1===this.claimStatus}getRoundClaimEndCountdown(){let e=d.Z.convertTimeDifference(new Date(this.roundClaimEndTime-this.currentTime),{includeDays:!1});return 0===e?x.defaultInfo():e}get isRoundClaimEnd(){return 2===this.claimStatus}getFundCountdownInfo(){return this.isRoundClaimEnd||!this.isRoundStart?x.defaultInfo():this.isRoundClaimStart?this.isRoundClaimEnd?x.defaultInfo():this.getRoundClaimEndCountdown():this.getRoundClaimStartCountdown()}getClaimCountdownInfo(){return this.getFundCountdownInfo()}constructor(...e){super(...e),(0,s._)(this,"roundEndTime",c.Z.Time.from(-1)),(0,s._)(this,"timeCanReward",c.Z.Time.from(0)),(0,s._)(this,"currentTime",void 0)}}(0,o.gn)([u.Vw.To(c.Z.Time.fromJSTimestamp.bind(c.Z.Time)),(0,o.w6)("design:type",void 0===c.Z||void 0===c.Z.Time?Object:c.Z.Time)],h.prototype,"roundEndTime",void 0),(0,o.gn)([u.Vw.To(c.Z.Time.fromJSTimestamp.bind(c.Z.Time))],h.prototype,"timeCanReward",void 0),(0,o.gn)([u.Vw.To(),(0,o.w6)("design:type",Number)],h.prototype,"currentTime",void 0)},53953:function(){},61940:function(){}},function(e){e.O(0,[1283,5073,977,4758,2506,6764,1365,3448,1707,9738,6570,6011,4942,9481,1240,3662,2971,2117,1744],function(){return e(e.s=15503)}),_N_E=e.O()}]);