(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7210],{4041:function(e,t,n){"use strict";var a,r,s,o,l,i=n(94746);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:27,height:30,fill:"none"},e),a||(a=i.createElement("path",{fill:"#E04A48",d:"m6.02 29.793-.88-4.055a.91.91 0 0 0-.764-.444L.418 26.543a.427.427 0 0 1-.36-.64L7.06 13.834a.914.914 0 0 1 1.25-.332l5.115 2.968a.914.914 0 0 1 .332 1.25l-7 12.067a.427.427 0 0 1-.735.005"})),r||(r=i.createElement("path",{fill:"#E04A48",d:"m20.066 29.793.88-4.055a.91.91 0 0 1 .764-.444l3.959 1.249a.427.427 0 0 0 .36-.641l-7.001-12.067a.914.914 0 0 0-1.25-.332l-5.115 2.968a.914.914 0 0 0-.332 1.25l7 12.067c.163.28.568.283.735.005"})),s||(s=i.createElement("path",{fill:"#FCD842",d:"M12.73.094 3.773 4.407a.94.94 0 0 0-.51.64L1.05 14.74a.94.94 0 0 0 .182.797L7.43 23.31a.94.94 0 0 0 .738.355h9.942c.286 0 .558-.13.737-.355l6.198-7.773a.94.94 0 0 0 .182-.798l-2.212-9.692a.94.94 0 0 0-.51-.64L13.548.094a.94.94 0 0 0-.818 0"})),o||(o=i.createElement("path",{fill:"#FFC00E",d:"M4 12.843a8.843 8.843 0 1 0 17.685 0 8.843 8.843 0 0 0-17.685 0"})),l||(l=i.createElement("path",{fill:"#fff",d:"M14.569 8.273V17h-1.846v-6.976h-.05l-2 1.253V9.641l2.161-1.368z"})))}},91274:function(e,t,n){"use strict";var a,r,s,o,l,i=n(94746);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:27,height:30,fill:"none"},e),a||(a=i.createElement("path",{fill:"#999",d:"m6.02 29.793-.88-4.055a.91.91 0 0 0-.764-.444L.418 26.543a.427.427 0 0 1-.36-.64L7.06 13.834a.914.914 0 0 1 1.25-.332l5.115 2.968a.914.914 0 0 1 .332 1.25l-7 12.067a.427.427 0 0 1-.735.005"})),r||(r=i.createElement("path",{fill:"#999",d:"m20.066 29.793.88-4.055a.91.91 0 0 1 .764-.444l3.959 1.249a.427.427 0 0 0 .36-.641l-7.001-12.067a.914.914 0 0 0-1.25-.332l-5.115 2.968a.914.914 0 0 0-.332 1.25l7 12.067c.163.28.568.283.735.005"})),s||(s=i.createElement("path",{fill:"#EEE",d:"M12.73.094 3.773 4.407a.94.94 0 0 0-.51.64L1.05 14.74a.94.94 0 0 0 .182.797L7.43 23.31a.94.94 0 0 0 .738.355h9.942c.286 0 .558-.13.737-.355l6.198-7.773a.94.94 0 0 0 .182-.798l-2.212-9.692a.94.94 0 0 0-.51-.64L13.548.094a.94.94 0 0 0-.818 0"})),o||(o=i.createElement("path",{fill:"#CCC",d:"M4.137 12.54a8.843 8.843 0 1 0 17.686 0 8.843 8.843 0 0 0-17.686 0"})),l||(l=i.createElement("path",{fill:"#fff",d:"M9.928 17v-1.33l3.107-2.876q.396-.384.664-.69a2.6 2.6 0 0 0 .414-.601q.14-.299.14-.644 0-.383-.174-.66a1.15 1.15 0 0 0-.478-.43 1.5 1.5 0 0 0-.686-.154q-.4 0-.699.162a1.1 1.1 0 0 0-.46.465 1.5 1.5 0 0 0-.162.72H9.843q0-.857.388-1.488a2.6 2.6 0 0 1 1.086-.975q.699-.346 1.611-.346.938 0 1.632.333a2.6 2.6 0 0 1 1.087.912q.388.584.388 1.338 0 .495-.196.976-.192.48-.687 1.07-.493.583-1.393 1.401l-1.274 1.249v.06h3.665V17z"})))}},11794:function(e,t,n){"use strict";var a,r,s,o,l,i=n(94746);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}t.Z=function(e){return i.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:27,height:30,fill:"none"},e),a||(a=i.createElement("path",{fill:"#6A3615",d:"m6.02 29.793-.88-4.055a.91.91 0 0 0-.764-.444L.418 26.543a.427.427 0 0 1-.36-.64L7.06 13.834a.914.914 0 0 1 1.25-.332l5.115 2.968a.914.914 0 0 1 .332 1.25l-7 12.067a.427.427 0 0 1-.735.005"})),r||(r=i.createElement("path",{fill:"#6A3615",d:"m20.066 29.793.88-4.055a.91.91 0 0 1 .764-.444l3.959 1.249a.427.427 0 0 0 .36-.641l-7.001-12.067a.914.914 0 0 0-1.25-.332l-5.115 2.968a.914.914 0 0 0-.332 1.25l7 12.067c.163.28.568.283.735.005"})),s||(s=i.createElement("path",{fill:"#824520",d:"M12.73.094 3.773 4.407a.94.94 0 0 0-.51.64L1.05 14.74a.94.94 0 0 0 .182.797L7.43 23.31a.94.94 0 0 0 .738.355h9.942c.286 0 .558-.13.737-.355l6.198-7.773a.94.94 0 0 0 .182-.798l-2.212-9.692a.94.94 0 0 0-.51-.64L13.548.094a.94.94 0 0 0-.818 0"})),o||(o=i.createElement("path",{fill:"#723510",d:"M4.137 12.54a8.843 8.843 0 1 0 17.686 0 8.843 8.843 0 0 0-17.686 0"})),l||(l=i.createElement("path",{fill:"#fff",d:"M12.978 17.12q-.954 0-1.7-.329-.741-.331-1.172-.912a2.3 2.3 0 0 1-.439-1.346h1.858a.97.97 0 0 0 .209.562q.196.24.52.37.324.133.728.133.422 0 .746-.15.324-.148.507-.412.183-.265.184-.61a1.02 1.02 0 0 0-.197-.618 1.25 1.25 0 0 0-.553-.426 2.2 2.2 0 0 0-.853-.153h-.814v-1.355h.814q.418 0 .737-.145.324-.145.503-.4a1.04 1.04 0 0 0 .18-.606 1.05 1.05 0 0 0-.593-.967q-.277-.14-.648-.14-.374 0-.686.135a1.2 1.2 0 0 0-.498.38 1 1 0 0 0-.2.58H9.84q.015-.756.431-1.33a2.8 2.8 0 0 1 1.125-.9q.712-.328 1.607-.328.903 0 1.58.329.678.328 1.053.886.38.554.375 1.244.005.733-.456 1.223-.456.49-1.189.622v.069q.963.123 1.466.669.507.54.503 1.355.005.746-.43 1.325-.43.579-1.19.912-.757.333-1.738.332"})))}},15503:function(e,t,n){Promise.resolve().then(n.bind(n,16885))},16885:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var a=n(57437),r=n(97235),s=n(68071),o=n(27635),l=n(38435),i=n(89769),d=n(53335),c=n(43949),u=n(3682),m=n(6178),x=n(74439),f=n(43009),v=n(2265),h=n(79787),p=n(20605),g=n(70042),w=n(95665),N=n(10433),j=n(81939),T=n(22928),C=n(54740);function R(e){var t,n,r,s,o,l,i,R,b;let k=(0,m.T)(),{t:I}=(0,c.$G)(["dao"]),y=(0,m.C)(e=>e.global),E=(0,m.C)(e=>e.dao),D=u.Q.getTargetNet(),Z=null!==(i=null===(t=E.daoCurrentRoundInfo)||void 0===t?void 0:t.roundExpire)&&void 0!==i?i:-1,S=0!==Z&&Z<=y.currentTime,A=x.Z.convertTimeDifference(new Date(Z-y.currentTime),{includeDays:!1}),L=f.Z.Time.fromJSTimestamp(null!==(R=null===(n=E.daoContractInfo)||void 0===n?void 0:n.roundDurationAdd)&&void 0!==R?R:0n),[O,_]=v.useState(!1);async function F(){var e;if(!(null===(e=E.nodeListFilters.selectedDao)||void 0===e?void 0:e.address))throw Error(I("NoSelectedDao"));let t="0x7CFA99eE55D07214cdD8E5A38501e0C087d212a4";if(!t)throw Error(I("NoDaoFactoryAddress"));let n=g.lf.connect(t,u.Q.getDefaultProvider()),a=n.filters.Vote(E.nodeListFilters.selectedDao.address);return n.off(a),n.on(a,e=>{var t;let n;let[a,r,s,o,l]=e.args;N.Z.I("Vote event",{dao:a,voter:r,votedNode:s,amount:o,timestamp:l}),null===(t=E.nodeListFilters.selectedDao)||void 0===t||t.address,k(w.Z.slice.actions.updateRecentVoteInfoToDao([{address:r,voteEth:Number(j.Z.wei2eth(o))}])),x.Z.sleepForAnimationFrame(new f.Z.Milliseconds(500)).promise.then(()=>(_(!0),x.Z.sleepForAnimationFrame(new f.Z.Seconds(5)).promise)).finally(()=>{_(!1)})}),{cancel:e=>{n.off(a)}}}return v.useEffect(()=>{var e;if(null===(e=E.daoCurrentRoundInfo)||void 0===e?void 0:e.roundExpire)return()=>{}},[null===(r=E.daoCurrentRoundInfo)||void 0===r?void 0:r.roundExpire]),v.useEffect(()=>{var e,t;let n,a;if(!(null===(e=E.nodeListFilters.selectedDao)||void 0===e?void 0:e.address))return;let r=[],s=(n=Promise.resolve(0),a=e=>{},(null===(t=E.nodeListFilters.selectedDao)||void 0===t?void 0:t.address)&&new T.Z().getVotingRecords({daoAddress:E.nodeListFilters.selectedDao.address,page:1,pageSize:5}).then(e=>{var t;k(w.Z.slice.actions.initRecentVoteInfoToDao((null!==(t=e.getData())&&void 0!==t?t:[]).map(e=>({address:e.userAddress.unwrap(),voteEth:Number(e.voteAmount)}))))}),{promise:n,cancel:a});return r.push(s.cancel),s.promise.then(async()=>{let e=await F();r.push(e.cancel)}),()=>{r.forEach(e=>e(p.Z.ReactError.useEffectDestroy())),k(w.Z.slice.actions.clearRecentVoteInfoToDao()),_(!1)}},[null===(s=E.nodeListFilters.selectedDao)||void 0===s?void 0:s.address]),(0,a.jsx)("div",{className:(0,d.m6)("flex flex-col items-stretch bg-[#050505] border border-[#666666] rounded-lg p-5",e.className),children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center text-[14px] gap-[20px] md:gap-1",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center md:items-start",children:[(0,a.jsx)("h3",{className:"text-white text-lg font-bold",children:null!==(b=null===(o=E.daoContractInfo)||void 0===o?void 0:o.name)&&void 0!==b?b:"DAO"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-white",children:[I("CurrentStatus"),":"]}),(0,a.jsx)("span",{className:"bg-gradient-to-r from-[#E700E6] to-[#4B4BDF] bg-clip-text text-transparent",children:S?I("VotingEnd"):I("VotingInProgress")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-white",children:[I("VotingCountdown"),":"]}),(0,a.jsx)("span",{className:(0,d.m6)("text-[#44B72D] text-2xl font-bold ",O&&0!==A?"zoom-in-and-out-blink-animation":""),children:0!==Z?S||0===A?"00:00:00":A.toFormated():"--:--:--"})]}),(0,a.jsx)("div",{className:"bg-black border border-[#666666] rounded-lg p-4",children:null===(l=E.recentVoteInfoToDao)||void 0===l?void 0:l.filter((e,t)=>t<5).map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center gap-2 md:gap-4 text-white text-[12px] md:text-sm",children:[(0,a.jsx)("span",{className:"w-[93px]",children:h.Z.toShort(e.address)}),(0,a.jsxs)("div",{className:"flex-[2_0_0] flex justify-between gap-1 md:gap-2",children:[(0,a.jsx)("span",{children:"â†‘"}),(0,a.jsx)(C.eO,{value:e.voteEth}),(0,a.jsx)("span",{children:D.nativeCurrency.symbol})]}),(0,a.jsxs)("span",{className:"flex-[1_0_0] text-right",children:[" +",L.toHours(),I("timeUnit")]})]},t))})]})})}var b=n(48423),k=n(74040),I=n(69367),y=n(56679),E=n(59365);function D(e){let{t}=(0,c.$G)(["dao"]);u.Q.getTargetNet();let n=(e,n,r)=>(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("h3",{className:"text-white text-[14px] font-semibold mb-2",children:e}),(0,a.jsxs)("div",{className:"bg-black border border-[#111111] rounded-[8px] overflow-hidden min-w-[400px]",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[60px_0.8fr_80px_80px] gap-2 p-2 bg-[#111111] text-[#999999] text-[12px] font-medium",children:[(0,a.jsx)("span",{className:"text-center whitespace-nowrap",children:t("rankingTitle")}),(0,a.jsx)("span",{className:"text-center whitespace-nowrap",children:t("userTitle")}),(0,a.jsx)("span",{className:"text-center whitespace-nowrap",children:t("rewardTitle")}),(0,a.jsx)("span",{className:"text-center whitespace-nowrap",children:t("Status")})]}),n.length>0?n.map((e,n)=>(0,a.jsxs)("div",{className:(0,d.m6)("grid grid-cols-[60px_0.8fr_80px_80px] gap-2 p-2 text-[12px] border-b border-[#222222] last:border-b-0",n%2==0?"bg-[#0A0A0A]":"bg-black"),children:[(0,a.jsxs)("span",{className:"text-center text-white font-semibold",children:["#",e.rank+1]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(b.Z,{address:e.address,text:h.Z.toShort(e.address),className:"text-[#4E97FF] text-[12px]"})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,a.jsx)("span",{className:"text-white text-[12px]",children:(0,a.jsx)(C.eO,{value:Number(j.Z.wei2eth(e.reward)),useSub:!0})}),(0,a.jsx)(E.Z,{className:"w-3 h-3"})]})}),(0,a.jsx)("span",{className:(0,d.m6)("text-center text-[12px] font-medium",e.isWithdrawed?"text-[#44B72D]":"text-[#FF6B6B]"),children:e.isWithdrawed?t("Claimed"):t("Unclaimed")})]},n)):(0,a.jsx)("div",{className:"p-4 text-center text-[#999999] text-[14px]",children:t("NoData")})]})]});return(0,a.jsxs)(y.Z,{isOpen:e.isOpen,onRequestClose:e.onRequestClose,showCloseButton:!1,size:"normal",className:"max-h-[80vh] overflow-y-auto relative",children:[(0,a.jsx)("button",{onClick:e.onRequestClose,className:"absolute top-4 right-4 z-10 w-6 h-6 flex items-center justify-center text-[#999999] hover:text-white transition-colors",children:(0,a.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,a.jsx)("path",{d:"M1 1L13 13M1 13L13 1",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsx)("div",{className:"flex flex-col gap-1 min-w-fit",children:e.loading?(0,a.jsx)("div",{className:"flex justify-center items-center py-4",children:(0,a.jsxs)("div",{className:"text-[#999999] text-[14px]",children:[t("Loading"),"..."]})}):e.data?(0,a.jsxs)(a.Fragment,{children:[("vote"===e.displayType||"both"===e.displayType||!e.displayType)&&n(t("PreviousVoteRankingTitle"),e.data.previousVoteRanking,e.data.pools.voteRankPool),("node"===e.displayType||"both"===e.displayType||!e.displayType)&&n(t("PreviousNodeRankingTitle"),e.data.previousNodeRanking,e.data.pools.communityPool)]}):(0,a.jsx)("div",{className:"text-center text-[#999999] text-[14px] py-4",children:t("FailedToLoadData")})})})]})}function Z(e){var t,n;let r=(0,m.C)(e=>e.dao),{t:s}=(0,c.$G)(["dao"]),o=(0,m.C)(e=>e.global),l=u.Q.getTargetNet(),i=v.useRef(null),[x,f]=v.useState(!1),[p,g]=v.useState(null),[w,N]=v.useState(!1),j=(()=>{var e,t;let n=null!==(t=null===(e=r.daoContractInfo)||void 0===e?void 0:e.createTime)&&void 0!==t?t:0,a=Math.floor(o.currentTime/1e3),s=86400*Math.floor(Math.floor(n/1e3)/86400),l=s+604800*Math.floor((a-s)/604800)+604800-a;if(l<=0)return"00:00:00";let i=Math.floor(l/3600).toString().padStart(2,"0"),d=Math.floor(l%3600/60).toString().padStart(2,"0"),c=Math.floor(l%60).toString().padStart(2,"0");return"".concat(i,":").concat(d,":").concat(c)})(),R=null!==(n=null===(t=r.daoCurrentRoundInfo)||void 0===t?void 0:t.roundExpire)&&void 0!==n?n:0,y=async()=>{var e;if(null===(e=r.daoContractInfo)||void 0===e?void 0:e.daoAddress){f(!0),N(!0);try{let e=new T.Z,t=await e.getPreviousRoundTop3Info(r.daoContractInfo.daoAddress);g(t)}catch(e){console.error("Failed to load previous round top3 info:",e),g(null)}finally{N(!1)}}};return(0,a.jsxs)("div",{className:(0,d.m6)("bg-[#050505] border border-[#666666] rounded-lg p-5",e.className),children:[(0,a.jsxs)("h2",{className:"text-lg text-white mb-2 flex items-center relative gap-2",ref:i,children:[e.title,(0,a.jsx)(I.Z,{whisperProps:{placement:"bottom"},targetContain:i.current,className:"static",tooltipClassName:"mt-[-35px] pointer-events-all",children:(0,a.jsx)("p",{className:"text-[#999999] text-sm mb-4",children:e.description})}),e.showPreviousRoundIcon&&(0,a.jsx)("button",{onClick:y,className:"ml-2 p-1 rounded-full hover:bg-[#333333] transition-colors duration-200 group",title:s("ViewPreviousRoundTop3"),children:(0,a.jsx)("svg",{className:"w-4 h-4 text-[#999999] group-hover:text-white transition-colors duration-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.node&&j&&R>0&&R>o.currentTime&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 text-lg ml-auto",children:[(0,a.jsxs)("span",{className:"text-[#D9D9D9]",children:[s("Countdown"),": "]}),(0,a.jsx)("span",{className:"text-gradient",children:j})]})]}),(0,a.jsx)("div",{className:"bg-black border border-[#666666] rounded-lg p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex justify-center items-center gap-1 text-[#D9D9D9] text-lg",children:[s("TotalRewards"),":",(0,a.jsxs)("span",{className:"text-white flex items-center gap-1",children:[(0,a.jsx)(C.eO,{value:e.totalRewards,valueClassName:"text-gradient"}),l.nativeCurrency.symbol]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_3fr_1fr_2fr] justify-between text-sm text-[#999999]",children:[(0,a.jsx)("span",{children:s("rankingTitle")}),(0,a.jsx)("span",{className:"text-center",children:s("userTitle")}),(0,a.jsx)("span",{className:"text-center",children:s("votesTitle")}),(0,a.jsx)("span",{className:"text-right",children:s("rewardTitle")})]}),[e.topVoter?[{...e.topVoter,marked:!0}]:[],e.voters].flat().map((e,t)=>(0,a.jsxs)("div",{className:(0,d.m6)("grid grid-cols-[1fr_3fr_1fr_2fr] items-center p-3 rounded-lg",e.marked&&"bg-gradient-to-r from-[#E700E6] to-[#4B4BDF]"),children:[(0,a.jsx)("span",{className:"rank",children:e.rank?(0,a.jsx)(k.Z,{rank:e.rank,className:"text-center w-[27px]"}):"-"}),(0,a.jsx)("div",{className:"flex justify-center items-center text-center gap-2",children:(0,a.jsx)("span",{className:"text-white",children:e.address?(0,a.jsx)(b.Z,{address:e.address,text:h.Z.toShort(e.address)}):"-"})}),(0,a.jsx)("span",{className:"text-white item-center text-center",children:e.votes?(0,a.jsx)(C.eO,{value:e.votes}):"-"}),(0,a.jsx)("span",{className:"text-white justify-end text-right",children:e.reward?(0,a.jsx)(C.eO,{className:"justify-end mr-0",value:e.reward,useSub:!0}):"-"})]},t))]}),(0,a.jsx)(D,{isOpen:x,onRequestClose:()=>f(!1),data:p,loading:w,displayType:e.previousRoundType||"both"})]})}function S(e){var t,n,r,s,o,l;let{t:u}=(0,c.$G)(["dao"]),x=(0,m.C)(e=>e.dao),v=(0,m.C)(e=>e.user),h={...null!==(r=x.userRankInfo.find(e=>e.rewardType===i.r.RankRewardType.LUCKY_REWARD))&&void 0!==r?r:{address:v.ethInfo.walletAddress},reward:x.userRewardInfo.luckyReward.toNumber()};return(0,a.jsx)(Z,{className:(0,d.m6)("",e.className),title:u("RewardRankTitle"),description:u("RewardRankDescription",{maxCount:"33",endTime:f.Z.Time.fromJSTimestamp(null!==(s=null===(t=x.daoContractInfo)||void 0===t?void 0:t.loserPoolRewardTimeLimit)&&void 0!==s?s:0n).toHours()}),totalRewards:Number(j.Z.wei2eth(null!==(o=null===(n=x.daoCurrentRoundInfo)||void 0===n?void 0:n.pool.luckyPool)&&void 0!==o?o:0n)),topVoter:h,voters:null!==(l=x.rankInfo.luckyRank)&&void 0!==l?l:[]})}var A=n(50544);function L(e){var t,n,r,s,o,l,u,x,h,p;let g;let{t:w}=(0,c.$G)(["dao"]),N=(0,m.C)(e=>e.dao),T=(0,m.C)(e=>e.user),{getNodeTypeByAddress:C}=(0,A.Z)(),[R,b]=v.useState(null),[k,I]=v.useState(!1);v.useEffect(()=>{I(!0)},[]);let y=(null!==(o=N.rankInfo.nodeRank)&&void 0!==o?o:[]).findIndex(e=>e.address===T.ethInfo.walletAddress),E=N.userRankInfo.find(e=>e.rewardType===i.r.RankRewardType.NODE_TOP_REWARD),D=E&&E.rank&&E.rank<=3&&(-1===y||y>=3);if(v.useEffect(()=>{var e;k&&T.ethInfo.walletAddress&&(null===(e=N.daoContractInfo)||void 0===e?void 0:e.daoAddress)&&C(T.ethInfo.walletAddress).then(b).catch(()=>b(i.r.NodeType.NONE))},[k,T.ethInfo.walletAddress,null===(t=N.daoContractInfo)||void 0===t?void 0:t.daoAddress,C]),y>=0){let e=(null!==(l=N.rankInfo.nodeRank)&&void 0!==l?l:[])[y];g={...e,votes:e.beVotes}}else if(D){let e=(null==E?void 0:E.votes)||0;g={address:T.ethInfo.walletAddress,rank:4,reward:0,votes:e}}else{let e=(null==E?void 0:E.votes)||0;g={...null!=E?E:{address:T.ethInfo.walletAddress},reward:N.userRewardInfo.nodeTopReward.toNumber(),votes:e}}let S=k&&null!==R&&R!==i.r.NodeType.MASTER&&R!==i.r.NodeType.SUPER;return(0,a.jsx)(Z,{className:(0,d.m6)("",e.className),title:w("NodeRankTitle"),description:w("NodeRankDescription",{rate:(null!==(u=null===(n=N.daoContractInfo)||void 0===n?void 0:n.communityRewardRate)&&void 0!==u?u:0)*100,time:f.Z.Time.fromJSTimestamp(null!==(x=null===(r=N.daoContractInfo)||void 0===r?void 0:r.communityDuration)&&void 0!==x?x:0n).toHours(),maxCount:"3"}),totalRewards:Number(j.Z.wei2eth(null!==(h=null===(s=N.daoCurrentRoundInfo)||void 0===s?void 0:s.pool.communityPool)&&void 0!==h?h:0n)),topVoter:S?null:g,voters:(null!==(p=N.rankInfo.nodeRank)&&void 0!==p?p:[]).map(e=>({...e,votes:e.beVotes})),node:!0,showPreviousRoundIcon:!0,previousRoundType:"node"})}function O(e){var t,n,r,s,o,l,u,x,v;let h;let{t:p}=(0,c.$G)(["dao"]),g=(0,m.C)(e=>e.dao),w=(0,m.C)(e=>e.user),N=(null!==(s=g.rankInfo.voteRank)&&void 0!==s?s:[]).findIndex(e=>e.address===w.ethInfo.walletAddress),T=g.userRankInfo.find(e=>e.rewardType===i.r.RankRewardType.VOTE_TOP_REWARD),C=T&&T.rank&&T.rank<=3&&(-1===N||N>=3);if(N>=0){let e=(null!==(o=g.rankInfo.voteRank)&&void 0!==o?o:[])[N];h={...e,votes:e.beVotes}}else if(C){let e=(null==T?void 0:T.votes)||0;h={address:w.ethInfo.walletAddress,rank:4,reward:0,votes:e}}else{let e=(null==T?void 0:T.votes)||0;h={...null!=T?T:{address:w.ethInfo.walletAddress},reward:g.userRewardInfo.voteTopReward.toNumber(),votes:e}}return(0,a.jsx)(Z,{className:(0,d.m6)("",e.className),title:p("VoteRankTitle"),description:p("VoteRankDescription",{maxCount:"3",time:f.Z.Time.fromJSTimestamp(null!==(l=null===(t=g.daoContractInfo)||void 0===t?void 0:t.airdropDurationCalc)&&void 0!==l?l:0n).toHours(),rate:(null!==(u=null===(n=g.daoContractInfo)||void 0===n?void 0:n.voteRankRewardRate)&&void 0!==u?u:0)*100}),totalRewards:Number(j.Z.wei2eth(null!==(x=null===(r=g.daoCurrentRoundInfo)||void 0===r?void 0:r.pool.voteRankPool)&&void 0!==x?x:0n)),topVoter:h,voters:(null!==(v=g.rankInfo.voteRank)&&void 0!==v?v:[]).map(e=>({...e,votes:e.beVotes})),showPreviousRoundIcon:!0,previousRoundType:"vote"})}var _=n(65435);function F(e){let{t}=(0,c.$G)("dao"),n=v.useRef(null);return(0,a.jsxs)("div",{className:(0,d.m6)("flex flex-col justify-between items-stretch gap-4 bg-[#050505] border border-[#666666] rounded-lg p-5",e.className),children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-lg text-white mb-2 relative flex items-center gap-2",ref:n,children:[e.title,(0,a.jsx)(I.Z,{whisperProps:{placement:"bottom"},targetContain:n.current,className:"static",tooltipClassName:"mt-[-35px] pointer-events-all",children:(0,a.jsx)("p",{className:"text-[#999999] text-sm mb-4",children:e.description})})]}),(0,a.jsx)("div",{className:"bg-black border border-[#666666] rounded-lg p-4",children:(0,a.jsx)("div",{className:"text-[#D9D9D9] text-lg text-center",children:e.value})})]}),e.countdown?(0,a.jsxs)("div",{className:"text-[#D9D9D9] text-center mt-2",children:[t("Countdown"),": ",(0,a.jsx)("span",{className:"text-white text-gradient",children:e.countdown})]}):(0,a.jsx)(_.ZP,{className:"w-full md:w-[330px] mx-auto",waitForClick:!0,onClick:e.controlButton.onClick,children:e.controlButton.title}),e.extraLink&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"inline-block",children:(0,a.jsxs)("a",{className:"flex flex-col items-center cursor-pointer hover:opacity-90",onClick:t=>{var n,a;t.preventDefault(),t.stopPropagation(),null===(a=e.extraLink)||void 0===a||null===(n=a.onClick)||void 0===n||n.call(a)},children:[(0,a.jsx)("span",{className:"block text-gradient",children:e.extraLink.title}),(0,a.jsx)("span",{className:"block w-full h-[1px] bg-gradient-to-r from-[#E700E6] to-[#4B4BDF]"})]})})})]})}var V=n(68651),P=n(72917),q=n(75370);function M(e){var t,n,r;(0,m.C)(e=>e.global);let s=(0,m.C)(e=>e.dao),{t:o}=(0,c.$G)("dao"),l=(0,P.Z)(),i=u.Q.getTargetNet(),x=(0,q.Z)(),f=x.isRoundClaimEnd?void 0:x.getFundCountdownInfo(),v={value:j.Z.wei2eth(null!==(r=null===(t=s.daoCurrentRoundInfo)||void 0===t?void 0:t.pool.fundPool)&&void 0!==r?r:0n),unit:i.nativeCurrency.symbol};return(0,a.jsx)("div",{className:(0,d.m6)("",e.className),children:(0,a.jsx)(F,{title:o("FundInfoTitle"),description:o("FundInfoDescription",{name:null===(n=s.nodeListFilters.selectedDao)||void 0===n?void 0:n.name,rate:new V.Z("10000").div(100).toString()}),value:(0,a.jsx)("div",{className:"text-[#D9D9D9] flex justify-center items-center gap-2 text-lg text-center",children:(0,a.jsx)(C.eO,{preChildren:"".concat(o("FundValueTitle"),":"),value:Number(v.value),valueClassName:"text-gradient",children:v.unit})}),countdown:null==f?void 0:f.toFormated(),controlButton:{title:o("FundButton"),onClick:l.reopenDAO}})})}var B=n(99376),U=n(40066),J=n(30681),$=n(79294),z=n(59868);function W(e){var t,n,r;let s=(0,B.useRouter)(),o=(0,m.C)(e=>e.dao),{t:l}=(0,c.$G)("dao"),i=(0,q.Z)(),x=i.isRoundClaimEnd?void 0:i.getClaimCountdownInfo(),f=u.Q.getTargetNet(),[h,p]=v.useState("0"),[g,w]=v.useState(""),N=null===(t=o.nodeListFilters.selectedDao)||void 0===t?void 0:t.address,T=v.useMemo(()=>(0,J.Cv)(N,f.chainId),[N,f.chainId]);async function R(){}return v.useEffect(()=>{let e=!0;return(async()=>{try{let t=f.chainId;if(!(0,J.Cv)(N,t))return;let n=(0,J.OM)(t),a=(0,J.yO)(t),r=null==n?void 0:n.rewardTokenAddress;if(!n||!a||!r)return;let s=e=>/^0x0{40}$/i.test(e);if(s(a)||s(r))return;let o=u.Q.getDefaultProvider(),l=new z.CH(r,$.s,o),[i,d,c]=await Promise.all([l.balanceOf(a),l.symbol(),l.decimals()]);if(!e)return;let m=new V.Z(i.toString()).div(new V.Z(10).pow(c)).toString();p(m),w(d)}catch(e){}})(),()=>{e=!1}},[f.chainId,N]),(0,a.jsx)("div",{className:(0,d.m6)("",e.className),children:(0,a.jsx)(F,{title:l("RewardTitle"),description:l("RewardDescription",{name:o.tokenInfo.symbol,rate:new V.Z("10000").div(100).toString()}),value:(0,a.jsxs)("div",{className:"text-[#D9D9D9] flex justify-center items-center gap-3 text-lg text-center",children:[(0,a.jsx)("div",{className:"flex items-end gap-2",children:(0,a.jsx)(U.Z,{className:"w-[20px] h-[25px]"})}),(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[[{value:null!==(r=null===(n=o.daoCurrentRoundInfo)||void 0===n?void 0:n.pool.loserPool)&&void 0!==r?r:0n,unit:"$".concat(o.tokenInfo.symbol)}].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(C.eO,{value:Number(j.Z.wei2eth(e.value)),valueClassName:"text-gradient"}),(0,a.jsx)("span",{children:e.unit})]},e.unit)),T&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,a.jsx)(C.eO,{value:Number(h),valueClassName:"text-gradient"}),(0,a.jsx)("span",{children:"$".concat(g||"TOKEN")})]})]})]}),countdown:null==x?void 0:x.toFormated(),controlButton:{title:l("RewardButton"),onClick:R},extraLink:{title:l("RewardRecordsTitle"),onClick:()=>{let e=new URLSearchParams(location.search);s.push("/dao/reward/record?".concat(e.toString()))}}})})}var G=n(88263);function Q(e){(0,m.T)(),(0,m.C)(e=>e.dao),(0,m.C)(e=>e.global),(0,m.C)(e=>e.user);let{t}=(0,c.$G)(["dao"]);return(0,G.Z)({autoTrigger:!0}),(0,a.jsxs)("div",{className:(0,d.m6)("flex flex-col items-stretch gap-[20px]",e.className),children:[(0,a.jsx)(R,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-[20px] justify-between items-stretch",children:[(0,a.jsx)(S,{className:"order-2 md:order-1"}),(0,a.jsxs)("div",{className:"flex flex-col gap-[20px] order-1 md:order-2",children:[(0,a.jsx)(O,{}),(0,a.jsx)(L,{}),(0,a.jsx)(M,{}),(0,a.jsx)(W,{})]})]})]})}var H=n(10990);function Y(){var e,t;let n=(0,m.C)(e=>e.dao);return(0,P.Z)(void 0,{autoTrigger:!0,autoUpdateTokenInfo:!0}),(0,a.jsx)("div",{className:"relative overflow-x-hidden text-secondary bg-[#000000]",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(l.Z,{}),(0,a.jsx)(r.Z,{}),(0,a.jsxs)(s.ZP,{width:s.W7.ContentV2,background:s.nV.None,className:"mx-[20px] 2xl:mx-auto",children:[(0,a.jsx)(H.Z,{activeTarget:i.r.VotingTabEnum.EWV}),(0,a.jsx)(Q,{className:"mt-[20px]"},null!==(t=null===(e=n.nodeListFilters.selectedDao)||void 0===e?void 0:e.address)&&void 0!==t?t:"_"),(0,a.jsx)(o.Z,{})]})]})})}},48423:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437);n(2265),n(53953);var r=n(22448),s=n(10867),o=n(3682),l=n(53335);function i(e){let{chainId:t,address:n,text:i,children:d,className:c,...u}=e,m=(0,a.jsx)(r.Z,{children:n}),x=new o.Q(t).getAddressUrl(n);return(0,a.jsx)(s.Z,{placement:"top",speaker:m,trigger:"hover",children:(0,a.jsx)("a",{className:(0,l.m6)("component-chain-address-link pointer hover underline",c),href:x,target:"_blank",...u,children:null!=i?i:n})})}},69367:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var a,r=n(57437),s=n(10867),o=n(22448),l=n(94746);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var d=function(e){return l.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},e),a||(a=l.createElement("path",{fill:"#fff",fillOpacity:.8,d:"M6.992 0q1.455 0 2.73.555t2.229 1.502a7 7 0 0 1 1.502 2.221Q14 5.553 14 7.008t-.547 2.722a7.056 7.056 0 0 1-3.73 3.723Q8.445 14 6.992 14q-1.455 0-2.723-.547a7.1 7.1 0 0 1-2.22-1.502A7.1 7.1 0 0 1 .546 9.73 6.8 6.8 0 0 1 0 7.008q0-1.455.547-2.73.548-1.275 1.502-2.221A7.3 7.3 0 0 1 4.27.555 6.7 6.7 0 0 1 6.992 0m.016 11.794a.92.92 0 0 0 .68-.273.9.9 0 0 0 .274-.665.92.92 0 0 0-.274-.68.92.92 0 0 0-.68-.274.92.92 0 0 0-.68.273.92.92 0 0 0-.274.68q0 .392.273.666.275.273.68.273m.798-3.848q-.016-.25.312-.531.329-.282.736-.626t.75-.774.376-.994q.03-.61-.125-1.142a2.24 2.24 0 0 0-.516-.915 2.5 2.5 0 0 0-.931-.61q-.57-.227-1.338-.227-.954 0-1.587.337a3.3 3.3 0 0 0-1.025.813q-.39.477-.547.986-.158.508-.141.852.015.407.258.595a.88.88 0 0 0 .524.195.84.84 0 0 0 .516-.156.55.55 0 0 0 .235-.477q0-.189.117-.462t.32-.524q.204-.25.494-.422.289-.172.649-.172.703 0 1.126.352.422.351.391.883a.85.85 0 0 1-.156.493 2.4 2.4 0 0 1-.4.438q-.242.211-.516.422-.273.211-.516.438a2.4 2.4 0 0 0-.406.493q-.165.266-.18.579l.015.594q0 .235.22.446.218.212.578.227.36-.015.571-.235a.65.65 0 0 0 .196-.5z"})))},c=n(53335),u=n(2265);let m=(0,u.forwardRef)((e,t)=>{let{children:n,className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,c.m6)("inline-flex items-center justify-center",a),...s,children:n})});function x(e){let t=u.useRef(null);return(0,r.jsx)("div",{ref:t,className:(0,c.m6)("relative",e.className),children:(0,r.jsx)(s.Z,{placement:"auto",className:(0,c.m6)("",e.containClassName),container:()=>{var n,a;return null!==(a=null!==(n=e.targetContain)&&void 0!==n?n:t.current)&&void 0!==a?a:"undefined"!=typeof document?document.body:null},speaker:(0,r.jsx)(o.Z,{className:(0,c.m6)("-mt-[25px]",e.tooltipClassName),style:{maxWidth:"1000px"},children:e.children}),trigger:"hover",enterable:!0,rootClose:!0,...e.whisperProps,children:(0,r.jsx)(m,{className:(0,c.m6)("w-[14px] h-[14px] cursor-pointer",e.iconClassName),children:(0,r.jsx)(d,{className:"w-full h-full"})})})})}m.displayName="SvgWrapper"},74040:function(e,t,n){"use strict";var a,r,s=n(57437),o=n(4041),l=n(91274),i=n(11794),d=n(53335);(a=r||(r={})).rankIcons=[void 0,o.Z,l.Z,i.Z],a.Rank=function(e){let t=a.rankIcons[e.rank]||(t=>(0,s.jsx)("span",{className:(0,d.m6)("block",e.className,t.className),children:e.rank}));return(0,s.jsx)(t,{})},t.Z=r.Rank},75370:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var a,r,s,o,l=n(12249),i=n(5853),d=n(74439),c=n(43009),u=n(8113),m=n(6178),x=n(2265);function f(){let e=(0,m.C)(e=>e.global),t=(0,m.C)(e=>e.dao);return x.useMemo(()=>{var n,a,r,s;return new h().initialize({roundEndTime:null!==(r=null===(n=t.daoCurrentRoundInfo)||void 0===n?void 0:n.roundExpire)&&void 0!==r?r:-1,timeCanReward:null!==(s=null===(a=t.daoContractInfo)||void 0===a?void 0:a.loserPoolRewardTimeLimit)&&void 0!==s?s:0,currentTime:e.currentTime})},[t.daoCurrentRoundInfo,t.daoContractInfo,e.currentTime])}(a=s||(s={}))[a.UNINITIALIZED=0]="UNINITIALIZED",a[a.ROUND_READY=1]="ROUND_READY",a[a.ROUND_START=2]="ROUND_START",a[a.ROUND_END=3]="ROUND_END",(r=o||(o={}))[r.UNINITIALIZED=0]="UNINITIALIZED",r[r.CLAIM_START=1]="CLAIM_START",r[r.CLAIM_END=2]="CLAIM_END";class v{static defaultInfo(){return{toFormated:()=>"--:--:--"}}}class h extends u.Vw.BaseDataAdapter{initialize(e){return super.initialize(e),this}get roundStatus(){let e=this.roundEndTime.toJSTime(),t=this.currentTime;return -1===e?0:0===e?1:e>t?2:3}get isRoundStart(){return 0!==this.roundStatus&&1!==this.roundStatus}get isRoundEnd(){return 3===this.roundStatus}getRoundEndCountdown(){return d.Z.convertTimeDifference(new Date(this.roundEndTime.toJSTime()-this.currentTime))}get roundClaimStartTime(){return this.roundEndTime.toJSTime()}getRoundClaimStartCountdown(){let e=d.Z.convertTimeDifference(new Date(this.roundClaimStartTime-this.currentTime),{includeDays:!1});return 0===e?v.defaultInfo():e}get roundClaimEndTime(){return -1===this.roundEndTime.toJSTime()?-1:this.roundEndTime.toJSTime()+this.timeCanReward.toJSTime()}get claimStatus(){return 0===this.timeCanReward.toJSTime()?0:this.roundClaimEndTime<=this.currentTime?2:this.roundClaimStartTime<=this.currentTime?1:0}get isRoundClaimStart(){return 1===this.claimStatus}getRoundClaimEndCountdown(){let e=d.Z.convertTimeDifference(new Date(this.roundClaimEndTime-this.currentTime),{includeDays:!1});return 0===e?v.defaultInfo():e}get isRoundClaimEnd(){return 2===this.claimStatus}getFundCountdownInfo(){return this.isRoundClaimEnd||!this.isRoundStart?v.defaultInfo():this.isRoundClaimStart?this.isRoundClaimEnd?v.defaultInfo():this.getRoundClaimEndCountdown():this.getRoundClaimStartCountdown()}getClaimCountdownInfo(){return this.getFundCountdownInfo()}constructor(...e){super(...e),(0,l._)(this,"roundEndTime",c.Z.Time.from(-1)),(0,l._)(this,"timeCanReward",c.Z.Time.from(0)),(0,l._)(this,"currentTime",void 0)}}(0,i.gn)([u.Vw.To(c.Z.Time.fromJSTimestamp.bind(c.Z.Time)),(0,i.w6)("design:type",void 0===c.Z||void 0===c.Z.Time?Object:c.Z.Time)],h.prototype,"roundEndTime",void 0),(0,i.gn)([u.Vw.To(c.Z.Time.fromJSTimestamp.bind(c.Z.Time))],h.prototype,"timeCanReward",void 0),(0,i.gn)([u.Vw.To(),(0,i.w6)("design:type",Number)],h.prototype,"currentTime",void 0)},53953:function(){}},function(e){e.O(0,[1283,5073,977,4758,6870,2506,9409,927,9481,2784,6764,7048,3448,1707,635,3236,4810,7072,923,344,6011,9302,2580,1240,990,7711,2971,2117,1744],function(){return e(e.s=15503)}),_N_E=e.O()}]);