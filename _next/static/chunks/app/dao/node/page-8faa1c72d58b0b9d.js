(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8386],{91083:function(e,t,n){Promise.resolve().then(n.bind(n,81490))},81490:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var o=n(57437),a=n(97235),r=n(68071),s=n(27635),i=n(38435),l=n(81939),d=n(13965),c=n(74439),u=n(20605),m=n(10433),p=n(65435),g=n(83123),f=n(49481),x=n(70042),h=n(88847),v=n(6178),N=n(95665),C=n(41662),w=n(99376),y=n(2265),j=n(43949),A=n(53335),Z=n(89769),T=n(11710),E=n(39594);function I(e){let t=(0,w.useRouter)(),{t:n}=(0,j.$G)(["dao"]),a=(0,v.C)(e=>e.global);(0,v.C)(e=>e.dao);let[r,s]=y.useState(null);async function i(){if(!r)throw Error("Can't found target nft address");let e="0x7CFA99eE55D07214cdD8E5A38501e0C087d212a4";if(!e)throw Error("NEXT_PUBLIC_DAO_FACTORY_CONTRACT_ADDRESS not found!");let o=d.r.getInstance(),a=l.Z.getInstance(o.getProvider()),s=await a.getSigner(),i=x.lf.connect(e,s);try{var u;let e=await i.createDao(r),o=await e.wait();(0,g.x9)(n("SuccessfullyOpenDAO")),I();let a=null==o?void 0:null===(u=o.logs[0].args)||void 0===u?void 0:u[0];if(a){m.Z.I("DAO created",{daoAddress:a}),await c.Z.sleepForAnimationFrame(3e3);let e=new URLSearchParams;e.set(N.Z.Params.DAO_ADDRESS,a),t.push("/dao/node?".concat(e.toString())),t.refresh()}}catch(e){(0,g.L6)(new g.HU(e,n("FailedToOpenDAO")).asToastMessage())}}async function I(e){let t=new h.Z,[n,o]=(await t.getUserAllCreatedNftLPs({signal:e})).tryGetData();if(o)return(0,g.L6)(o.msg),m.Z.E(o),s(null);if(!n.length)return s(null);let a=(await new h.Z().getBalanceOfTokens(n.map(e=>e.pairAddress))).findIndex(e=>e>=C.fi("0"));if(a<0)return s(null);s(n[a].tokenAddress)}return(0,f.Z)(),y.useEffect(()=>{if(!a.token)return s(null);let e=new AbortController;return c.Z.sleepForAnimationFrame(1e3).promise.then(()=>{e.signal.aborted||I(e.signal)}),()=>{e.abort(u.Z.ReactError.useEffectDestroy())}},[a.token]),(0,o.jsxs)("div",{className:(0,A.m6)("flex flex-col items-start gap-4",e.className),children:[(0,o.jsx)(E.Z,{children:n("Title")}),(0,o.jsx)(T.Z,{children:n("Description")}),(0,o.jsxs)("div",{className:"flex justify-between md:justify-start items-center gap-2 md:gap-[104px]",children:[(0,o.jsx)(p.ZP,{size:p.qE.Small,className:"w-[160px] text-[14px] shine-animation",onClick:()=>{let e=new URLSearchParams(location.search);if(e.has(N.Z.Params.DAO_ADDRESS)){var n;e.set(N.Z.Params.DAO_ADDRESS,null!==(n=e.get(N.Z.Params.DAO_ADDRESS))&&void 0!==n?n:"")}let o=e.toString();t.push("/dao/user?".concat(o,"#").concat(Z.r.MyAssetsPageTab.ApplyNode))},children:n("ApplyForNode")}),r?(0,o.jsx)(p.ZP,{size:p.qE.Small,className:"w-[160px] text-[14px] shine-animation",waitForClick:!0,onClick:()=>i(),children:n("OpenDAO")}):null]})]})}var b=n(30648),S=n(64798),P=n.n(S),D=n(22928),k=n(48423),L=n(79787),R=n(3682),F=n(50544),O=n(94552);function M(e){var t;let n=(0,w.useRouter)(),a=(0,v.C)(e=>e.dao),s=(0,v.C)(e=>e.user),{t:i,i18n:l}=(0,j.$G)(["dao"]);R.Q.getTargetNet();let d=c.Z.dateFormat(new Date(e.creationTime),"yyyy-MM-dd HH:mm:ss"),u=null!==(t=e.onVote)&&void 0!==t?t:()=>{var t;let o=new URLSearchParams;o.set(N.Z.Params.DAO_ADDRESS,e.daoAddress);let r=null===(t=a.userInfo)||void 0===t?void 0:t.userInfo.parent;s.ethInfo.walletAddress&&r&&r!==O.N?o.set(N.Z.Params.NODE_ADDRESS,r):r=e.address,o.set(N.Z.Params.NODE_ADDRESS,r),n.push("/dao/node/detail?".concat(o.toString()))};return(0,o.jsxs)(r.ZP,{autoBorder:!0,autoMargin:!1,autoPadding:!1,className:"rounded-lg p-[15px]",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsxs)("span",{className:"text-[#999999] text-[14px] font-medium",children:[i("Address"),": "]}),(0,o.jsx)(k.Z,{className:"text-[#CCCCCC] text-[14px] font-medium underline ml-2",address:e.address,text:L.Z.toShort(e.address)})]}),(0,o.jsx)(_,{nodeType:e.nodeType})]}),(0,o.jsxs)("div",{className:"flex flex-col gap-1 mb-4",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-[#999999] text-[14px] font-medium",children:i("TotalVotes")}),(0,o.jsx)("span",{className:"text-[#999999] text-[14px] font-medium flex gap-1",children:10*Number(e.totalVotes)})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{className:"text-[#999999] text-[14px] font-medium",children:i("Creation Time")}),(0,o.jsx)("span",{className:"text-[#999999] text-[14px] font-medium",children:d})]})]}),(0,o.jsx)("button",{className:"w-full leading-[40px] rounded-[8px] flex items-center justify-center font-medium border border-[#666] normal-text-gradient hover:opacity-90 transition focus:bg-gradient-to-r from-primary to-highlight focus:text-white",onClick:u,children:i("VoteTitle")})]})}function _(e){let{t}=(0,j.$G)(["dao"]),n=(0,F.Z)().nodeMap.get(e.nodeType);return(0,o.jsx)("div",{className:(0,A.m6)("p-[1px] rounded","bg-gradient-to-r from-[".concat(null==n?void 0:n.color1,"] to-[").concat(null==n?void 0:n.color2,"]")),style:{backgroundImage:"linear-gradient(to right, ".concat(null==n?void 0:n.color1,", ").concat(null==n?void 0:n.color2,")")},children:(0,o.jsx)("div",{className:"bg-black w-[100px] h-[22px] flex items-center justify-center leading-none rounded",children:(0,o.jsx)("span",{className:(0,A.m6)("text-[10px] leading-none font-medium bg-gradient-to-r bg-clip-text text-transparent","from-[".concat(null==n?void 0:n.color1,"] to-[").concat(null==n?void 0:n.color2,"]")),style:{backgroundImage:"linear-gradient(to right, ".concat(null==n?void 0:n.color1,", ").concat(null==n?void 0:n.color2,")")},children:null==n?void 0:n.title})})})}var B=n(97644),U=n(68651),V=n(41849);function z(e){var t,n,a;let{t:r}=(0,j.$G)(["dao"]),s=(0,v.T)();(0,v.C)(e=>e.global);let i=(0,v.C)(e=>e.dao),[d,m]=y.useTransition(),f=(0,F.Z)(),[x,h]=y.useState(i.nodeListFilters.keyword),C=P()(h,20),w=null===(t=i.nodeListFilters.selectedDao)||void 0===t?void 0:t.address,Z=null!==(a=i.nodeListFilters.keyword)&&void 0!==a?a:void 0,T=i.nodes.isLoading,E=i.nodes.pageIndex,I=i.nodes.pageSize,S=i.nodes.total,k=null===(n=i.daoContractInfo)||void 0===n?void 0:n.daoAddress;function L(){x!==i.nodeListFilters.keyword&&s(N.Z.slice.actions.updateNodeListFilters({keyword:x}))}let R=y.useCallback(e=>{var t;let n=new AbortController;if(!w||!e.restart&&T)return{promise:Promise.resolve(),cancel:e=>n.abort(e)};let o=e.restart?1:null!==(t=e.page)&&void 0!==t?t:E+1;return s(N.Z.slice.actions.setNodesToLoading()),{promise:new D.Z().getNodeList({daoAddress:w,page:o,keyword:Z,abortController:n,pageSize:I}).then(e=>{if(e.hasError())throw Error(e.getError().msg);let t=e.getData(),n=e.getTotalPage(),a=null!=n?n:S,r=0===n||0===t.length||t.length<I;s(N.Z.slice.actions.updateNodeNewPage({pageIndex:o,total:a,isEnd:r,data:t})),y.startTransition(()=>{f.updateNodeCurrentRoundInfoSimpleInfo(t.map(e=>e.walletAddress))})}).catch(e=>{u.Z.canBeIgnore(e)||(0,g.L6)(new g.HU(e,"Error in get node list").asToastMessage())}),cancel:e=>n.abort(e)}},[w,Z,T,E,I,S,s,f]);return y.useEffect(()=>{if(T||!w||!k)return;let e=c.Z.sleepForAnimationFrame(500);return e.promise.then(()=>{m(()=>R({restart:!0}).promise)}),()=>{e.cancel(u.Z.ReactError.useEffectDestroy())}},[T,w,Z,k,R]),(0,o.jsx)("div",{className:(0,A.m6)("relative flex flex-col nodes-contain",e.className),children:(0,o.jsxs)("div",{className:"flex flex-col items-stretch text-center gap-[22px] nodes-contain",children:[(0,o.jsx)("div",{className:"flex justify-start flex-col items-stretch md:flex-row md:items-center gap-[20px]",children:(0,o.jsx)(b.ZP,{className:"order-2 md:order-1 w-full md:w-[385px] search-token-bar",placeHolder:r("SearchForAddress"),onInputChange:C,value:null!=x?x:"",searchButton:(0,o.jsx)(p.ZP,{size:p.qE.Small,onClick:()=>L(),children:r("Search")}),onConfirm:L})}),(0,o.jsxs)(B.ZP,{pageInfo:{page:i.nodes.pageIndex,totalPage:i.nodes.total},onPaginationChange:e=>{let{page:t}=e;return 0===t?{promise:Promise.resolve(),cancel:()=>{}}:R({page:t})},children:[i.nodes.isLoading&&0===i.nodes.data.length?(0,o.jsx)("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-[20px] mx-auto",children:Array.from({length:8}).map((e,t)=>(0,o.jsx)("div",{className:"h-[140px] bg-[#0a0a0a] rounded-lg border border-[#222] animate-pulse"},t))}):(0,o.jsx)("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-[20px] mx-auto",children:i.nodes.data.map(e=>{let t=e.totalVotes.toString(),n=f.nodeCurrentRoundSimpleInfoMap.get("".concat(e.daoAddress,",").concat(e.walletAddress));if(n){var o,a,r;let e=new U.Z(l.Z.wei2eth(n.promotionInfo.totalSonVotedAmount)),s=null!==(a=null===(o=i.daoContractInfo)||void 0===o?void 0:o.votePrice)&&void 0!==a?a:1n,d=new U.Z(l.Z.wei2eth((null!==(r=n.promotionInfo.totalSonEthDone)&&void 0!==r?r:0n)/s*s));t=e.plus(d).toString()}return{id:e.id,address:e.walletAddress,daoAddress:e.daoAddress,nodeType:e.nodeType,totalVotes:t,creationTime:e.createTime}}).map(e=>(0,o.jsx)(M,{...e},e.id))}),i.nodes.isLoading||0!==i.nodes.data.length?null:(0,o.jsx)(V.Z,{})]})]})})}function q(e){return(0,o.jsx)("div",{className:(0,A.m6)("",e.className),children:(0,o.jsx)("img",{src:"/images/dao/dao-vote-banner.png",alt:"Vote Banner"})})}var G=n(10990),Q=n(72917);function H(){return(0,v.C)(e=>e.dao),(0,Q.Z)(void 0,{autoTrigger:!0}),(0,o.jsx)("div",{className:"relative overflow-x-hidden text-secondary bg-[#000000]",children:(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)(i.Z,{}),(0,o.jsx)(a.Z,{}),(0,o.jsxs)(r.ZP,{width:r.W7.Wrapper,background:r.nV.None,className:"mx-[20px] 2xl:mx-auto",children:[(0,o.jsx)(G.Z,{activeTarget:Z.r.VotingTabEnum.VOTE}),(0,o.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-2",children:[(0,o.jsx)(I,{className:"flex-1 max-w-[836px] order-2 md:order-1"}),(0,o.jsx)(q,{className:"hidden md:block order-1 md:order-2"})]}),(0,o.jsx)(z,{className:"mt-4 md:mt-[50px]"}),(0,o.jsx)(s.Z,{})]})]})})}},48423:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(57437);n(2265),n(53953);var a=n(22448),r=n(10867),s=n(3682),i=n(53335);function l(e){let{chainId:t,address:n,text:l,children:d,className:c,...u}=e,m=(0,o.jsx)(a.Z,{children:n}),p=new s.Q(t).getAddressUrl(n);return(0,o.jsx)(r.Z,{placement:"top",speaker:m,trigger:"hover",children:(0,o.jsx)("a",{className:(0,i.m6)("component-chain-address-link pointer hover underline",c),href:p,target:"_blank",...u,children:null!=l?l:n})})}},11710:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var o=n(57437);n(2265);var a=n(53335);function r(e){let{children:t,className:n}=e;return(0,o.jsx)("p",{className:(0,a.m6)("text-[14px] text-tip desc",n),children:t})}},39594:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var o=n(57437);n(2265);var a=n(53335);function r(e){let{children:t,className:n}=e;return(0,o.jsx)("h1",{className:(0,a.m6)("text-[33px] md:text-[36px] leading-none text-white font-semibold",n),children:t})}},97644:function(e,t,n){"use strict";n.d(t,{ZP:function(){return g}});var o=n(57437),a=n(2265),r=n(63671),s=n(10433),i=n(74439),l=n(72525),d=n(72790),c=n(11340),u=n(52926),m=n(20605);n(83123),n(66917),n(41849),n(43949);var p=n(53335);function g(e){var t,n;let g=null!==(t=e.needRelocationAfterUpdate)&&void 0!==t&&t,f=null!==(n=e.offsetY)&&void 0!==n?n:-70,x=a.useRef(null),[h,v]=a.useState((0,r.ki)(e.pageInfo)),[N,C]=a.useTransition(),w=e.pageInfo.page||1,y=e.pageInfo.totalPage||0,j=a.useRef({isLoading:e.isLoading,emptyText:e.emptyText,loadingText:e.loadingText,onPaginationChange:e.onPaginationChange});function A(t){console.log("changePagination called with page:",t);let n=e=>{};return j.current.isLoading||h.isLoading?console.log("Loading, cannot change page"):(v({...h,isLoading:!0,isError:!1}),C(async()=>{console.log("Starting page change transition to page:",t);try{let o=j.current.onPaginationChange({page:t});if(n=o.cancel,await o.promise.catch(e=>{if(m.Z.canBeIgnore(e))return Promise.resolve();s.Z.E(JSON.stringify(e)),v({...h,isLoading:!1,isError:!0})}),console.log("Page change completed successfully"),v({...h,isLoading:!1,isError:!1}),!(null==x?void 0:x.current)||0===e.pageInfo.page||!g)return;i.Z.sleepForAnimationFrame(16).promise.then(()=>{if(!x.current)return;let e=i.Z.getOffsetTop(x.current)+f;s.Z.I("scroll to y: ",e),i.Z.scrollTo({y:e})})}catch(e){console.error("Error in page change:",e)}})),n}a.useEffect(()=>{j.current={isLoading:e.isLoading,emptyText:e.emptyText,loadingText:e.loadingText,onPaginationChange:e.onPaginationChange}},[e.isLoading,e.emptyText,e.loadingText,e.onPaginationChange]),a.useEffect(()=>{let t=i.Z.sleepForAnimationFrame();return t.promise.then(()=>{var t;A(null!==(t=e.pageInfo.page)&&void 0!==t?t:1)}),()=>t.cancel("useEffect callback")},[]);let Z=a.useMemo(()=>{if(y<=5)return Array.from({length:y},(e,t)=>t+1);let e=1;return e=w<=3?1:w>=y-2?y-4:w-2,Array.from({length:5},(t,n)=>e+n)},[w,y]),{showLeftEllipsis:T,showRightEllipsis:E}=a.useMemo(()=>({showLeftEllipsis:y>5&&w>3,showRightEllipsis:y>5&&w<y-2}),[w,y]),I=e=>{console.log("Clicked on page ".concat(e,", current page is ").concat(w)),A(e)};return(0,o.jsxs)(l.Z,{className:(0,p.m6)("paginate-table-container",e.className),children:[(0,o.jsxs)(l.Z,{className:"paginate-wrapper w-full",children:[(0,o.jsx)("div",{className:"paginate-content w-full",ref:x,children:e.children}),(0,o.jsx)("div",{className:"h-[40px] flex justify-center items-center",children:(0,o.jsxs)(d.Z,{horizontalArrangement:c.cV.Center,verticalAlignment:c.v2.Center,className:"status-contain",children:[N||j.current.isLoading||h.isLoading?(0,o.jsx)(u.Z,{children:j.current.loadingText}):"",j.current.isLoading||h.isLoading||0!==y||!j.current.emptyText?"":(0,o.jsx)("div",{className:"paginate-table-placeholder",children:j.current.emptyText})]})})]}),y>0&&(0,o.jsx)("div",{className:"paginate-contain",children:(0,o.jsx)("div",{className:"pagination-custom",children:(0,o.jsxs)("ul",{className:"flex items-center",children:[(0,o.jsx)("li",{className:"previous ".concat(w<=1?"disabled":""),children:(0,o.jsx)("a",{onClick:()=>A(Math.max(1,w-1)),children:"<"})}),y<=5?(0,o.jsx)(o.Fragment,{children:Array.from({length:y},(e,t)=>{let n=t+1;return(0,o.jsx)("li",{className:n===w?"selected":"",children:(0,o.jsx)("a",{onClick:()=>I(n),children:n})},n)})}):Z.map(e=>(0,o.jsx)("li",{className:e===w?"selected":"",children:(0,o.jsx)("a",{onClick:()=>I(e),children:e})},e)),(0,o.jsx)("li",{className:"pagination-break ".concat(E&&y>5?"":"opacity-0"),children:(0,o.jsx)("a",{className:"pagination-break-link",children:"..."})}),(0,o.jsx)("li",{className:"next ".concat(w>=y?"disabled":""),children:(0,o.jsx)("a",{onClick:()=>A(Math.min(y,w+1)),children:">"})})]})})})]})}},41849:function(e,t,n){"use strict";var o=n(57437),a=n(2265),r=n(53335);t.Z=a.forwardRef(function(e,t){var n,a;return(0,o.jsxs)("p",{ref:t,className:(0,r.m6)("my-5 text-tip flex justify-center items-center gap-2 component-text-tip",null!==(n=e.className)&&void 0!==n?n:""),children:[null!==(a=e.text)&&void 0!==a?a:"There‘s nothing more left",e.children]})})},50544:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var o=n(2265),a=n(89769),r=n(43949),s=n(6178),i=n(21707),l=n(40366),d=n(3682),c=n(10433),u=n(95665),m=n(81939);function p(){var e,t,n,p,g,f,x,h,v,N,C,w,y,j,A,Z,T,E,I,b;let S=(0,s.T)(),{t:P,i18n:D}=(0,r.$G)(["dao"]),k=(0,s.C)(e=>e.dao),L="/images/dao/",R=new Map([[a.r.NodeType.NONE,{color1:"#000",color2:"#fff",title:P("notNode.title"),description:P("notNode.description"),image:"".concat(L,"not-node.png"),upgradeInfo:{userNodeCount:0n,requiredNodeCount:0n,ethPrice:0n}}],[a.r.NodeType.CANDIDATE,{color1:"#E700E6",color2:"#4B4BDF",title:P("candidateNode.title"),description:P("candidateNode.description",{title:P("candidateNode.title").toLocaleLowerCase(),token:k.tokenInfo.symbol,value:m.Z.wei2eth(null!==(C=null===(e=k.daoContractInfo)||void 0===e?void 0:e.applyCandidateEthAmount)&&void 0!==C?C:0n)}),image:"".concat(L,"candidate-node.png"),upgradeInfo:{userNodeCount:0n,requiredNodeCount:0n,ethPrice:null!==(w=null===(t=k.daoContractInfo)||void 0===t?void 0:t.applyCandidateEthAmount)&&void 0!==w?w:0n}}],[a.r.NodeType.MASTER,{color1:"#EA7D01",color2:"#B06D00",title:P("mainNode.title"),description:P("mainNode.description",{prevTitle:P("candidateNode.title").toLocaleLowerCase(),title:P("mainNode.title").toLocaleLowerCase(),nodeCount:String(null!==(y=null===(n=k.daoContractInfo)||void 0===n?void 0:n.votesForMaster)&&void 0!==y?y:0n)}),image:"".concat(L,"main-node.png"),upgradeInfo:{userNodeCount:null!==(j=null===(p=k.userInfo)||void 0===p?void 0:p.userInfo.sonCount)&&void 0!==j?j:0n,requiredNodeCount:null!==(A=null===(g=k.daoContractInfo)||void 0===g?void 0:g.votesForMaster)&&void 0!==A?A:0n,ethPrice:0n}}],[a.r.NodeType.SUPER,{color1:"#00E7D4",color2:"#4B4BDF",title:P("superNode.title"),description:P("superNode.description",{prevTitle:P("mainNode.title").toLocaleLowerCase(),title:P("superNode.title").toLocaleLowerCase(),token:k.tokenInfo.symbol,value:m.Z.wei2eth(null!==(Z=null===(f=k.daoContractInfo)||void 0===f?void 0:f.applySuperEthAmount)&&void 0!==Z?Z:0n),nodeCount:String(null!==(T=null===(x=k.daoContractInfo)||void 0===x?void 0:x.masterForSuper)&&void 0!==T?T:0n)}),image:"".concat(L,"super-node.png"),upgradeInfo:{userNodeCount:null!==(E=null===(h=k.userInfo)||void 0===h?void 0:h.userInfo.sonMasterNodeCount)&&void 0!==E?E:0n,requiredNodeCount:null!==(I=null===(v=k.daoContractInfo)||void 0===v?void 0:v.masterForSuper)&&void 0!==I?I:0n,ethPrice:null!==(b=null===(N=k.daoContractInfo)||void 0===N?void 0:N.applySuperEthAmount)&&void 0!==b?b:0n}}]]),F=Array.from(R.entries()),O=new Map;F.forEach((e,t)=>{let n=e[0],o=F[t+1];O.set(n,{nextKey:o?Number(o[0]):void 0,nextValue:o?o[1]:void 0})});let M=new Map(k.nodesCurrentRoundInfo.map(e=>["".concat(e.daoAddress,",").concat(e.nodeAddress),e])),_=o.useCallback(async(e,t)=>{if(0===e.length)return[];let n=new i.C(t.daoAddress,l.K),o=e.map(e=>n.promotions(t.currentRoundNO,e)),a=d.Q.getDefaultProvider(),r=new i.z(d.Q.getTargetNet().chainId,a),s=await r.all(o),u=e.map((e,n)=>({nodeAddress:e,daoAddress:t.daoAddress,promotionInfo:s[n]}));return c.Z.I("getNodeCurrentRoundSimpleInfo",u),u},[]),B=o.useCallback(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!(t=null!=t?t:k.daoContractInfo)){c.Z.I("updateNodeCurrentRoundInfoSimpleInfo skipped: daoAddress/currentRoundNO not ready");return}let n=await _([e,k.nodes.data.map(e=>e.walletAddress)].flat(),t);S(u.Z.slice.actions.updateNodesCurrentRoundInfo(n))},[S,k.daoContractInfo,k.nodes.data,_]),U=o.useCallback(async(e,t)=>{var n;let o=null!=t?t:null===(n=k.daoContractInfo)||void 0===n?void 0:n.daoAddress;if(!o)throw Error("daoAddress can't be empty");try{let t=new i.C(o,l.K),n=d.Q.getDefaultProvider(),a=new i.z(d.Q.getTargetNet().chainId,n),r=t.users(e),s=await a.all([r]),u=Number(s[0].nodeType);return c.Z.I("getNodeTypeByAddress",{nodeAddress:e,nodeType:u}),u}catch(e){return c.Z.E("getNodeTypeByAddress error",e),a.r.NodeType.NONE}},[k.daoContractInfo]);return o.useEffect(()=>{R.set(a.r.NodeType.MASTER,{...R.get(a.r.NodeType.MASTER),title:P("mainNode.title")}),R.set(a.r.NodeType.SUPER,{...R.get(a.r.NodeType.SUPER),title:P("superNode.title")})},[D.language]),{nodeMap:R,nodeToNextMap:O,getNodeCurrentRoundSimpleInfo:_,updateNodeCurrentRoundInfoSimpleInfo:B,nodeCurrentRoundSimpleInfoMap:M,getNodeTypeByAddress:U}}},53953:function(){}},function(e){e.O(0,[1283,5073,9409,4758,2784,2506,927,9481,6870,977,6764,7048,3448,1707,635,3236,4810,7072,923,344,6011,9302,2580,1240,990,2971,2117,1744],function(){return e(e.s=91083)}),_N_E=e.O()}]);