(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5717],{57679:function(e,t,n){"use strict";var a,i,s=n(94746);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}t.Z=function(e){return s.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:31,height:30,fill:"none"},e),a||(a=s.createElement("path",{fill:"url(#icon-gift_svg__a)",d:"M16.469 16.438v11.387a.243.243 0 0 1-.242.242h-1.454a.243.243 0 0 1-.242-.242V16.438H1.938v11.629c0 1.066.868 1.933 1.937 1.933h23.25a1.935 1.935 0 0 0 1.938-1.933V16.438zM27.125 5.837h-1.271a.242.242 0 0 1-.2-.378c.472-.7.702-1.471.654-2.235-.058-.912-.518-1.704-1.326-2.29C24.4.514 23.628.21 22.81.071c-1.483-.248-3.055.172-4.429 1.187q-1.11.82-2.01 2.09a.97.97 0 0 1-1.577 0c-.6-.846-1.272-1.547-2.01-2.09C11.413.243 9.842-.18 8.358.07c-.817.138-1.589.444-2.17.863-.808.583-1.269 1.375-1.326 2.29-.049.764.179 1.534.654 2.235a.24.24 0 0 1-.2.378H3.875A3.87 3.87 0 0 0 0 9.703v3.866c0 .45.309.83.727.936h29.546A.97.97 0 0 0 31 13.57V9.703a3.87 3.87 0 0 0-3.875-3.866m-9.806-.36c1.611-2.915 3.651-3.757 5.168-3.5.185.03 1.817.335 1.886 1.37.058.904-.941 2.1-2.664 2.49h-4.178a.242.242 0 0 1-.212-.36M6.793 3.347C6.86 2.313 8.492 2.01 8.68 1.978c1.52-.254 3.56.585 5.168 3.5.09.16-.027.36-.212.36H9.457c-1.72-.393-2.721-1.586-2.664-2.49"})),i||(i=s.createElement("defs",null,s.createElement("linearGradient",{id:"icon-gift_svg__a",x1:0,x2:31,y1:15,y2:15,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#E700E6"}),s.createElement("stop",{offset:1,stopColor:"#4B4BDF"})))))}},75891:function(e,t,n){"use strict";var a,i,s,r,u=n(94746);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}t.Z=function(e){return u.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:37,height:30,fill:"none"},e),a||(a=u.createElement("path",{fill:"url(#icon-member_svg__a)",d:"M20.383 15.217c4.238.915 9.168 3.896 9.168 12.49C29.551 30 26.686 30 17.406 30c-9.395 0-12.145 0-12.145-2.292 0-8.48 4.927-11.572 9.169-12.491-3.323-1.835-4.47-6.073-2.865-9.511 1.603-3.438 5.614-4.7 8.706-2.865s4.354 6.072 2.635 9.395c-.577 1.377-1.492 2.292-2.523 2.98"})),i||(i=u.createElement("path",{fill:"url(#icon-member_svg__b)",d:"M10.795 15.078a.461.461 0 0 0 .154-.807C8.288 12.232 7.472 8.44 8.93 5.314q.323-.694.77-1.266c.245-.315-.009-.773-.409-.738-1.722.146-3.35 1.208-4.18 2.988-1.161 2.489-.546 5.492 1.515 7.169.285.234.2.688-.154.8C3.293 15.259 0 17.9 0 24.143c0 .957.588 1.419 2.2 1.646a.464.464 0 0 0 .523-.412c.634-6.43 4.442-9.226 8.072-10.299m12.88 0a.461.461 0 0 1-.154-.807c2.661-2.039 3.477-5.83 2.019-8.957a6.6 6.6 0 0 0-.77-1.266c-.245-.315.009-.773.409-.738 1.722.146 3.35 1.208 4.18 2.988 1.161 2.489.546 5.492-1.515 7.169a.462.462 0 0 0 .153.8c3.181.992 6.473 3.634 6.473 9.876 0 .957-.588 1.419-2.2 1.646a.464.464 0 0 1-.523-.412c-.634-6.43-4.442-9.226-8.072-10.299"})),s||(s=u.createElement("path",{fill:"url(#icon-member_svg__c)",d:"M31 0a6 6 0 1 1 0 12 6 6 0 0 1 0-12m0 8.055a.909.909 0 1 0 0 1.817.909.909 0 0 0 0-1.817m-.026-.71c.432 0 .782-.35.782-.783V2.91a.783.783 0 0 0-1.565 0v3.652c0 .433.35.783.783.783"})),r||(r=u.createElement("defs",null,u.createElement("linearGradient",{id:"icon-member_svg__a",x1:5.261,x2:29.551,y1:16,y2:16,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#E700E6"}),u.createElement("stop",{offset:1,stopColor:"#4B4BDF"})),u.createElement("linearGradient",{id:"icon-member_svg__b",x1:-.001,x2:34.47,y1:14.55,y2:14.55,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#E700E6"}),u.createElement("stop",{offset:1,stopColor:"#4B4BDF"})),u.createElement("linearGradient",{id:"icon-member_svg__c",x1:25,x2:37,y1:6,y2:6,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#E700E6"}),u.createElement("stop",{offset:1,stopColor:"#4B4BDF"})))))}},79312:function(e,t,n){"use strict";var a,i,s,r=n(94746);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}t.Z=function(e){return r.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"7 7 39 39"},e),a||(a=r.createElement("path",{fill:"url(#icon-rocket_svg__a)",d:"M31.56 8.933c2.016-.369 4.131-.715 6.154-.22.497 1.987.164 4.072-.195 6.055-.984 4.81-3.295 9.46-7.028 12.721.1 1.137.238 2.27.318 3.408.07 1.677-.774 3.339-2.15 4.294-1.765 1.178-3.522 2.371-5.3 3.529-.928.582-2.295-.094-2.413-1.177-.165-1.829-.275-3.664-.438-5.494-1.48-.028-2.965-.546-4.075-1.54-1.297-1.125-1.993-2.826-2.05-4.524-1.263-.167-2.583-.173-3.868-.285-.61-.067-1.247.009-1.832-.205-.885-.354-1.286-1.549-.76-2.355 1.115-1.754 2.214-3.52 3.342-5.266.964-1.468 2.734-2.346 4.486-2.224.997.087 1.994.19 2.99.3.234.073.343-.191.49-.32 3.21-3.54 7.697-5.722 12.329-6.697m-3.467 5.423c-1.655.208-3.01 1.738-3.003 3.41-.09 1.866 1.557 3.585 3.425 3.574 1.373.062 2.716-.795 3.278-2.042.557-1.185.371-2.679-.471-3.684-.755-.95-2.03-1.442-3.229-1.258"})),i||(i=r.createElement("path",{fill:"url(#icon-rocket_svg__b)",d:"M11.088 28.714c.41-.435 1.228-.2 1.36.38.731 2.282 2.604 4.154 4.886 4.885.558.133.816.9.416 1.325q-1.34 1.357-2.695 2.699c-.432.445-1.291.146-1.357-.47-.031-.487-.008-.978-.017-1.467-1.164.374-2.316.782-3.48 1.151-.557.175-1.157-.42-.99-.976.369-1.169.784-2.323 1.15-3.493-.488-.004-.978.017-1.465-.013-.615-.064-.909-.927-.468-1.358.88-.894 1.772-1.777 2.66-2.663"})),s||(s=r.createElement("defs",null,r.createElement("linearGradient",{id:"icon-rocket_svg__a",x1:17.489,x2:34.969,y1:11.51,y2:28.99,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#E700E6"}),r.createElement("stop",{offset:1,stopColor:"#4B4BDF"})),r.createElement("linearGradient",{id:"icon-rocket_svg__b",x1:8.884,x2:15.517,y1:30.913,y2:37.547,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#E700E6"}),r.createElement("stop",{offset:1,stopColor:"#4B4BDF"})))))}},45050:function(e,t,n){Promise.resolve().then(n.bind(n,281))},23910:function(e,t,n){var a=n(74288).Symbol;e.exports=a},54506:function(e,t,n){var a=n(23910),i=n(4479),s=n(80910),r=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?i(e):s(e)}},55041:function(e,t,n){var a=n(5035),i=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(i,""):e}},17071:function(e,t,n){var a="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=a},4479:function(e,t,n){var a=n(23910),i=Object.prototype,s=i.hasOwnProperty,r=i.toString,u=a?a.toStringTag:void 0;e.exports=function(e){var t=s.call(e,u),n=e[u];try{e[u]=void 0;var a=!0}catch(e){}var i=r.call(e);return a&&(t?e[u]=n:delete e[u]),i}},80910:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},74288:function(e,t,n){var a=n(17071),i="object"==typeof self&&self&&self.Object===Object&&self,s=a||i||Function("return this")();e.exports=s},5035:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},64798:function(e,t,n){var a=n(28302),i=n(11121),s=n(6660),r=Math.max,u=Math.min;e.exports=function(e,t,n){var o,l,p,d,y,c,m=0,g=!1,v=!1,T=!0;if("function"!=typeof e)throw TypeError("Expected a function");function f(t){var n=o,a=l;return o=l=void 0,m=t,d=e.apply(a,n)}function b(e){var n=e-c,a=e-m;return void 0===c||n>=t||n<0||v&&a>=p}function h(){var e,n,a,s=i();if(b(s))return x(s);y=setTimeout(h,(e=s-c,n=s-m,a=t-e,v?u(a,p-n):a))}function x(e){return(y=void 0,T&&o)?f(e):(o=l=void 0,d)}function w(){var e,n=i(),a=b(n);if(o=arguments,l=this,c=n,a){if(void 0===y)return m=e=c,y=setTimeout(h,t),g?f(e):d;if(v)return clearTimeout(y),y=setTimeout(h,t),f(c)}return void 0===y&&(y=setTimeout(h,t)),d}return t=s(t)||0,a(n)&&(g=!!n.leading,p=(v="maxWait"in n)?r(s(n.maxWait)||0,t):p,T="trailing"in n?!!n.trailing:T),w.cancel=function(){void 0!==y&&clearTimeout(y),m=0,o=c=l=y=void 0},w.flush=function(){return void 0===y?d:x(i())},w}},28302:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},10303:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},78371:function(e,t,n){var a=n(54506),i=n(10303);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==a(e)}},11121:function(e,t,n){var a=n(74288);e.exports=function(){return a.Date.now()}},6660:function(e,t,n){var a=n(55041),i=n(28302),s=n(78371),r=0/0,u=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,p=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return r;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=o.test(e);return n||l.test(e)?p(e.slice(2),n?2:8):u.test(e)?r:+e}},281:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var a=n(57437),i=n(2265),s=n(72525),r=n(11340),u=n(38435),o=n(97235),l=n(68071),p=n(64037),d=n(6543),y=n(65435),c=n(6178),m=n(80149),g=n(69356),v=n(56611),T=n(13965),f=n(81939),b=n(3682);let h=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint8",name:"target",type:"uint8"},{indexed:!1,internalType:"bytes",name:"key",type:"bytes"},{indexed:!1,internalType:"bytes",name:"value",type:"bytes"},{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"FactoryDebugValueSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"dao",type:"address"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"RestartVoteCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"dao",type:"address"},{indexed:!0,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"uint256",name:"weight",type:"uint256"},{indexed:!1,internalType:"uint8",name:"choice",type:"uint8"},{indexed:!1,internalType:"uint256",name:"currentRoundNO",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"VoteCast",type:"event"},{inputs:[{internalType:"address",name:"_dao",type:"address"}],name:"createRestartVote",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"daoAddresses",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint8",name:"target",type:"uint8"},{internalType:"bytes",name:"key",type:"bytes"},{internalType:"bytes",name:"value",type:"bytes"}],name:"debugSet",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"implementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_dao",type:"address"},{internalType:"uint256",name:"startTime",type:"uint256"}],name:"startVoting",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newImplementation",type:"address"}],name:"updateDaoImplementation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"voteProxy",type:"address"}],name:"upgradeRestartVote",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"restartVotes",type:"address[]"}],name:"upgradeRestartVoteBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"dao",type:"address"},{internalType:"address",name:"voter",type:"address"},{internalType:"uint256",name:"weight",type:"uint256"},{internalType:"uint8",name:"voteOption",type:"uint8"},{internalType:"uint256",name:"currentRoundNO",type:"uint256"}],name:"voteEvent",outputs:[],stateMutability:"nonpayable",type:"function"}];var x=n(425),w=n(64943),N=n(3876),E=n(59868),R=n(1091),A=n(75186),M=n(64798),j=n.n(M),C=n(79312),D=n(57679),_=n(75891);function I(){let e=(0,c.T)(),t=(0,c.C)(e=>e.global),n=(0,c.C)(e=>e.user),{connectETHWallet:M}=i.useContext(m.Cv),[I,V]=i.useState(""),[S,O]=i.useState(null),[P,U]=i.useState(null),[Z,L]=i.useState(!1),[k,B]=i.useState(!1),[F,W]=i.useState(null),[z,J]=i.useState("now"),[Q,H]=i.useState(""),[Y,q]=i.useState(0),[G,K]=i.useState(""),[X,$]=i.useState(""),[ee,et]=i.useState(""),[en,ea]=i.useState(0),[ei,es]=i.useState(""),[er,eu]=i.useState(""),[eo,el]=i.useState(""),[ep,ed]=i.useState(""),[ey,ec]=i.useState("false"),[em,eg]=i.useState(""),[ev,eT]=i.useState("true"),[ef,eb]=i.useState("1"),[eh,ex]=i.useState(""),[ew,eN]=i.useState(""),eE="0xAafb6689aED0e6D16d6Ee9af84a1f3044a5B79E6",eR=n.ethInfo.isConnected,eA=i.useMemo(()=>new w.Z,[]),[eM,ej]=i.useState(""),eC=i.useCallback(async e=>{if(!e||!N.UJ(e)){W(null),U(null);return}try{B(!0);let t=await eA.getOverview(e);W(t),U(t.restartVotecontractAddress)}catch(e){W(null),U(null)}finally{B(!1)}},[eA]),eD=i.useMemo(()=>j()(eC,400),[eC]);async function e_(){if(!eR){e(g.Z.slice.actions.updateNeedBinding(!0)),await M(v.w3.WALLETCONNECT);return}if(!eE||!N.UJ(eE)){A.Am.error("环境变量 NEXT_PUBLIC_RESTART_FACTORY_CONTRACT_ADDRESS 缺失或无效");return}if(!I||!N.UJ(I)){A.Am.error("请输入有效的 DAO 地址");return}try{L(!0),O(null),U(null);let e=b.Q.getTargetNet(),t=T.r.getInstance(),n=f.Z.getInstance(t.getProvider(),e.chainId),a=await n.getSigner(),i=new E.CH(eE,h,a),s=await i.createRestartVote(I);O(s.hash),await s.wait();let r=await i.daoAddresses(I);U(r),A.Am.success("创建成功")}catch(e){A.Am.error((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||"交易失败")}finally{L(!1)}}async function eI(){if(!eR){e(g.Z.slice.actions.updateNeedBinding(!0)),await M(v.w3.WALLETCONNECT);return}if(!eE||!N.UJ(eE)){A.Am.error("环境变量 NEXT_PUBLIC_RESTART_FACTORY_CONTRACT_ADDRESS 缺失或无效");return}if(!I||!N.UJ(I)){A.Am.error("请输入有效的 DAO 地址");return}try{let e;L(!0);let t=b.Q.getTargetNet(),n=T.r.getInstance(),a=f.Z.getInstance(n.getProvider(),t.chainId),i=await a.getSigner(),s=new E.CH(eE,h,i);if("now"===z)e=BigInt(Math.floor(Date.now()/1e3));else{let t=Q.trim();if(!t){A.Am.error("请输入自定义开始时间（秒）"),L(!1);return}try{let n=BigInt(t);if(n<0n)throw Error("startTime cannot be negative");e=n}catch(e){A.Am.error((null==e?void 0:e.message)||"开始时间无效"),L(!1);return}}let r=await s.startVoting(I,e);O(r.hash),await r.wait(),A.Am.success("已开启投票"),await eC(I)}catch(e){A.Am.error((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||"开启投票失败")}finally{L(!1)}}async function eV(){if(!eR){e(g.Z.slice.actions.updateNeedBinding(!0)),await M(v.w3.WALLETCONNECT);return}if(!eE||!N.UJ(eE)){A.Am.error("环境变量 NEXT_PUBLIC_RESTART_FACTORY_CONTRACT_ADDRESS 缺失或无效");return}if(!N.UJ(eM)){A.Am.error("请输入有效的 implementation 地址");return}try{L(!0);let e=b.Q.getTargetNet(),t=T.r.getInstance(),n=f.Z.getInstance(t.getProvider(),e.chainId),a=await n.getSigner(),i=new E.CH(eE,h,a),s=await i.updateDaoImplementation(eM);O(s.hash),await s.wait(),A.Am.success("已更新 implementation")}catch(e){A.Am.error((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||"更新 implementation 失败")}finally{L(!1)}}async function eS(){if(!eR){e(g.Z.slice.actions.updateNeedBinding(!0)),await M(v.w3.WALLETCONNECT);return}if(!eE||!N.UJ(eE)){A.Am.error("环境变量 NEXT_PUBLIC_RESTART_FACTORY_CONTRACT_ADDRESS 缺失或无效");return}let t=(ei||P||"").trim();if(!N.UJ(t)){A.Am.error("请输入有效的 RestartVote 合约地址");return}try{L(!0);let e=b.Q.getTargetNet(),n=T.r.getInstance(),a=f.Z.getInstance(n.getProvider(),e.chainId),i=await a.getSigner(),s=new E.CH(eE,h,i),r=await s.upgradeRestartVote(t);O(r.hash),await r.wait(),A.Am.success("已升级 RestartVote"),I&&await eC(I)}catch(e){A.Am.error((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||"升级失败")}finally{L(!1)}}async function eO(){if(!eR){e(g.Z.slice.actions.updateNeedBinding(!0)),await M(v.w3.WALLETCONNECT);return}let t=(ei||P||"").trim();if(!N.UJ(t)){A.Am.error("请输入有效的 RestartVote 合约地址");return}try{L(!0);let e=b.Q.getTargetNet(),n=T.r.getInstance(),a=f.Z.getInstance(n.getProvider(),e.chainId),i=await a.getSigner(),s=new E.CH(t,x.x,i),r=await s.stopDao();O(r.hash),await r.wait(),A.Am.success("已请求停止 DAO"),await eC(I)}catch(e){A.Am.error((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||"停止失败")}finally{L(!1)}}async function eP(){if(!eR){e(g.Z.slice.actions.updateNeedBinding(!0)),await M(v.w3.WALLETCONNECT);return}let t=(ei||P||"").trim();if(!N.UJ(t)){A.Am.error("请输入有效的 RestartVote 合约地址");return}try{L(!0);let e=b.Q.getTargetNet(),n=T.r.getInstance(),a=f.Z.getInstance(n.getProvider(),e.chainId),i=await a.getSigner(),s=new E.CH(t,x.x,i),r=await s.restartDao();O(r.hash),await r.wait(),A.Am.success("已请求重启 DAO"),await eC(I)}catch(e){A.Am.error((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||"重启失败")}finally{L(!1)}}async function eU(){if(!eR){e(g.Z.slice.actions.updateNeedBinding(!0)),await M(v.w3.WALLETCONNECT);return}if(!eE||!N.UJ(eE)){A.Am.error("环境变量 NEXT_PUBLIC_RESTART_FACTORY_CONTRACT_ADDRESS 缺失或无效");return}try{L(!0);let e=b.Q.getTargetNet(),t=T.r.getInstance(),n=f.Z.getInstance(t.getProvider(),e.chainId),a=await n.getSigner(),i=new E.CH(eE,h,a),s=R.R.defaultAbiCoder(),r="0x",u="0x";if(0===Y){if(!N.UJ(G)){A.Am.error("请输入有效的 implementation 地址");return}u=s.encode(["address"],[G])}else if(1===Y){if(!N.UJ(X)||!N.UJ(ee)){A.Am.error("请输入有效的 DAO 地址与 RestartVote 地址");return}r=s.encode(["address"],[X]),u=s.encode(["address"],[ee])}else{A.Am.error("无效的 Factory 目标");return}let o=await i.debugSet(Y,r,u);O(o.hash),await o.wait(),A.Am.success("Factory.debugSet 已执行")}catch(e){A.Am.error((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||"交易失败")}finally{L(!1)}}function eZ(e,t){try{let n=e.trim();if(!n)throw Error("".concat(t," cannot be empty"));let a=BigInt(n);if(a<0n)throw Error("".concat(t," cannot be negative"));return a}catch(e){throw Error("".concat(t," invalid: ").concat((null==e?void 0:e.message)||e))}}async function eL(){if(!eR){e(g.Z.slice.actions.updateNeedBinding(!0)),await M(v.w3.WALLETCONNECT);return}let t=(ei||P||"").trim();if(!N.UJ(t)){A.Am.error("请输入有效的 RestartVote 合约地址");return}try{L(!0);let e=b.Q.getTargetNet(),n=T.r.getInstance(),a=f.Z.getInstance(n.getProvider(),e.chainId),i=await a.getSigner(),s=new E.CH(t,x.x,i),r=R.R.defaultAbiCoder(),u="0x",o="0x";if(0===en||1===en||4===en||5===en||6===en){if(0===en||1===en){let e=eZ(ep,"数值");o=r.encode(["uint256"],[e])}else{let e=eZ(er,"轮次"),t=eZ(ep,"数值");u=r.encode(["uint256"],[e]),o=r.encode(["uint256"],[t])}}else if(2===en||3===en){if(!N.UJ(em)){A.Am.error("请输入有效的地址");return}o=r.encode(["address"],[em])}else if(7===en||8===en){let e=eZ(er,"轮次");u=r.encode(["uint256"],[e]),o=r.encode(["bool"],["true"===ey])}else if(9===en){if(!N.UJ(eo)){A.Am.error("请输入有效的用户地址");return}let e=eZ(er,"轮次"),t=parseInt(ef,10);if(0!==t&&1!==t){A.Am.error("choice 只能为 0 或 1");return}let n=eZ(eh,"weight"),a=ew.trim()?eZ(ew,"timestamp"):BigInt(Math.floor(Date.now()/1e3));u=r.encode(["uint256","address"],[e,eo]),o=r.encode(["bool","uint8","uint256","uint256"],["true"===ev,t,n,a])}else{A.Am.error("无效的 RestartVote 目标");return}let l=await s.debugSet(en,u,o);O(l.hash),await l.wait(),A.Am.success("RestartVote.debugSet 已执行"),I&&await eC(I)}catch(e){A.Am.error((null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||"交易失败")}finally{L(!1)}}return i.useEffect(()=>(eD(I.trim()),()=>{eD.cancel()}),[I,eD]),i.useEffect(()=>{P&&N.UJ(P)&&es(P)},[P]),(0,a.jsxs)(s.Z,{className:"relative overflow-x-hidden bg-black",children:[(0,a.jsx)(u.Z,{}),(0,a.jsx)(o.Z,{}),(0,a.jsxs)(s.Z,{className:"relative text-secondary",horizontalAlignment:r.v2.Center,children:[(0,a.jsx)("h1",{className:"page-title",children:"RestartVoteFactory 测试"}),(0,a.jsx)(l.ZP,{autoMargin:!1,background:l.nV.Grey,className:"section-content w-full max-w-[900px]",children:(0,a.jsxs)(s.Z,{horizontalAlignment:r.v2.Stretch,className:"form text-[14px] md:text-[16px]",children:[(0,a.jsx)("div",{className:"form-row",children:(0,a.jsxs)("div",{className:"text-sm text-[#aaa] break-all",children:["工厂合约地址：",eE||"未设置"]})}),(0,a.jsx)("div",{className:"form-row",children:(0,a.jsx)("label",{className:"form-label",children:"DAO 地址"})}),(0,a.jsx)("div",{className:"form-row",children:(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"0x...",value:I,onChange:e=>V(e.currentTarget.value.trim())})}),(0,a.jsx)("div",{className:"form-row text-sm",children:k?"查询中...":P?(0,a.jsxs)("div",{className:"break-all",children:["RestartVote 地址：",P]}):I?(0,a.jsx)("div",{children:"未创建 RestartVote"}):(0,a.jsx)("div",{className:"text-[#777]",children:"请输入 DAO 地址以查询 RestartVote"})}),(0,a.jsx)("div",{className:"form-row",children:(0,a.jsx)(y.ZP,{status:y.Dv.None,size:y.qE.Customize,round:y.DB.None,className:"btn-submit",waitForClick:!0,onClick:e_,children:Z?(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"w-[16px] h-[16px]"})," 创建中..."]}):eR?(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"w-[16px] h-[16px]"})," 调用 createRestartVote"]}):(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"w-[16px] h-[16px]"})," 连接钱包"]})})}),(0,a.jsxs)("div",{className:"form-row grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsx)("div",{className:"rounded-md p-[1px] bg-gradient-to-r from-[#797575] to-[#797575]",children:(0,a.jsxs)("div",{className:"rounded-md bg-black p-3",children:[(0,a.jsx)("div",{className:"text-xs text-[#888] mb-2",children:"开始时间模式"}),(0,a.jsxs)("select",{className:"w-full bg-[#111] p-2 rounded",value:z,onChange:e=>J(e.target.value),children:[(0,a.jsx)("option",{value:"now",children:"当前时间（now）"}),(0,a.jsx)("option",{value:"custom",children:"自定义（秒）"})]})]})}),"custom"===z&&(0,a.jsx)("div",{className:"rounded-md p-[1px] bg-gradient-to-r from-[#797575] to-[#797575]",children:(0,a.jsxs)("div",{className:"rounded-md bg-black p-3",children:[(0,a.jsx)("div",{className:"text-xs text-[#888] mb-2",children:"自定义开始时间（秒）"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"".concat(Math.floor(Date.now()/1e3)),value:Q,onChange:e=>H(e.currentTarget.value.replace(/[^0-9]/g,""))})]})}),(0,a.jsx)("div",{className:"rounded-md p-[1px] bg-gradient-to-r from-[#797575] to-[#797575]",children:(0,a.jsxs)("div",{className:"rounded-md bg-black p-3",children:[(0,a.jsx)("div",{className:"text-xs text-[#888]",children:"当前轮次"}),(0,a.jsx)("div",{className:"text-sm",children:F?F.currentVotingRound:"—"})]})}),(0,a.jsx)("div",{className:"rounded-md p-[1px] bg-gradient-to-r from-[#797575] to-[#797575]",children:(0,a.jsxs)("div",{className:"rounded-md bg-black p-3",children:[(0,a.jsx)("div",{className:"text-xs text-[#888]",children:"投票状态"}),(0,a.jsx)("div",{className:"text-sm",children:F?F.isVotingActive?"进行中":"未开始/已结束":"—"})]})}),(0,a.jsx)("div",{className:"rounded-md p-[1px] bg-gradient-to-r from-[#797575] to-[#797575]",children:(0,a.jsxs)("div",{className:"rounded-md bg-black p-3",children:[(0,a.jsx)("div",{className:"text-xs text-[#888]",children:"倒计时"}),(0,a.jsx)("div",{className:"text-sm",children:F&&F.isVotingActive?function(e){if(e<=0)return"00:00:00";let t=Math.floor(e/1e3),n=String(Math.floor(t/3600)).padStart(2,"0"),a=String(Math.floor(t%3600/60)).padStart(2,"0"),i=String(t%60).padStart(2,"0");return"".concat(n,":").concat(a,":").concat(i)}(Math.max(0,F.votingEndTime-t.currentTime)):"—"})]})})]}),(0,a.jsxs)("div",{className:"form-row grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsx)("div",{className:"rounded-md p-[1px] bg-gradient-to-r from-[#797575] to-[#797575]",children:(0,a.jsxs)("div",{className:"rounded-md bg-black p-3",children:[(0,a.jsx)("div",{className:"text-xs text-[#888] mb-2",children:"设置 implementation（updateDaoImplementation）"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"implementation 地址"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"0x...",value:eM,onChange:e=>ej(e.currentTarget.value.trim())})]}),(0,a.jsx)(y.ZP,{status:y.Dv.None,size:y.qE.Customize,round:y.DB.None,className:"btn-submit",waitForClick:!0,disabled:!eR||!N.UJ(eE)||!N.UJ(eM)||Z,onClick:eV,children:"设置 implementation"})]})]})}),(0,a.jsx)("div",{className:"rounded-md p-[1px] bg-gradient-to-r from-[#797575] to-[#797575]",children:(0,a.jsxs)("div",{className:"rounded-md bg-black p-3",children:[(0,a.jsx)("div",{className:"text-xs text-[#888] mb-2",children:"升级 RestartVote（upgradeRestartVote）"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"RestartVote 地址"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"0x...",value:ei,onChange:e=>es(e.currentTarget.value.trim())})]}),(0,a.jsx)(y.ZP,{status:y.Dv.None,size:y.qE.Customize,round:y.DB.None,className:"btn-submit",waitForClick:!0,disabled:!eR||!N.UJ(eE)||!N.UJ(ei||P||"")||Z,onClick:eS,children:"升级 RestartVote"})]})]})})]}),(0,a.jsx)("div",{className:"form-row",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsx)(y.ZP,{status:y.Dv.None,size:y.qE.Customize,round:y.DB.None,className:"btn-submit",waitForClick:!0,disabled:!eR||!N.UJ(eE)||!N.UJ(I)||Z,onClick:eI,children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"w-[16px] h-[16px]"})," 开启投票"]})}),(0,a.jsx)(y.ZP,{status:y.Dv.None,size:y.qE.Customize,round:y.DB.None,className:"btn-submit",waitForClick:!0,disabled:!N.UJ(ei||P||"")||Z,onClick:eO,children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(D.Z,{className:"w-[16px] h-[16px]"})," 停止 DAO"]})}),(0,a.jsx)(y.ZP,{status:y.Dv.None,size:y.qE.Customize,round:y.DB.None,className:"btn-submit",waitForClick:!0,disabled:!N.UJ(ei||P||"")||Z,onClick:eP,children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"w-[16px] h-[16px]"})," 重启 DAO"]})})]})}),S?(0,a.jsxs)("div",{className:"form-row text-sm break-all",children:["交易哈希：",S]}):null,P?(0,a.jsxs)("div",{className:"form-row text-sm break-all",children:["RestartVote 地址：",P]}):null,(0,a.jsx)("div",{className:"form-row mt-6",children:(0,a.jsx)("div",{className:"text-sm text-[#aaa]",children:"调试设置（debugSet）"})}),(0,a.jsx)("div",{className:"form-row",children:(0,a.jsx)("div",{className:"rounded-md p-[1px] bg-gradient-to-r from-[#797575] to-[#797575] w-full",children:(0,a.jsxs)("div",{className:"rounded-md bg-black p-3 w-full",children:[(0,a.jsx)("div",{className:"text-xs text-[#888] mb-2",children:"Factory.debugSet"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"目标"}),(0,a.jsxs)("select",{className:"w-full bg-[#111] p-2 rounded",value:Y,onChange:e=>q(parseInt(e.target.value,10)),children:[(0,a.jsx)("option",{value:0,children:"0 - implementation(address)"}),(0,a.jsx)("option",{value:1,children:"1 - daoAddresses[dao] = address"})]})]}),0===Y?(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"implementation"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"0x...",value:G,onChange:e=>K(e.currentTarget.value.trim())})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"DAO 地址（key）"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"0x...",value:X,onChange:e=>$(e.currentTarget.value.trim())})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"RestartVote 地址（value）"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"0x...",value:ee,onChange:e=>et(e.currentTarget.value.trim())})]})]})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(y.ZP,{status:y.Dv.None,size:y.qE.Customize,round:y.DB.None,className:"btn-submit",waitForClick:!0,disabled:!eR||Z,onClick:eU,children:"执行 Factory.debugSet"})})]})})}),(0,a.jsx)("div",{className:"form-row",children:(0,a.jsx)("div",{className:"rounded-md p-[1px] bg-gradient-to-r from-[#797575] to-[#797575] w-full",children:(0,a.jsxs)("div",{className:"rounded-md bg-black p-3 w-full",children:[(0,a.jsx)("div",{className:"text-xs text-[#888] mb-2",children:"RestartVote.debugSet"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"RestartVote 地址"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"0x...",value:ei,onChange:e=>es(e.currentTarget.value.trim())})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"目标"}),(0,a.jsxs)("select",{className:"w-full bg-[#111] p-2 rounded",value:en,onChange:e=>ea(parseInt(e.target.value,10)),children:[(0,a.jsx)("option",{value:0,children:"0 - votingStartTime (uint256)"}),(0,a.jsx)("option",{value:1,children:"1 - currentVotingRound (uint256)"}),(0,a.jsx)("option",{value:2,children:"2 - dao (address)"}),(0,a.jsx)("option",{value:3,children:"3 - factory (address)"}),(0,a.jsx)("option",{value:4,children:"4 - continueVotes[round] (uint256)"}),(0,a.jsx)("option",{value:5,children:"5 - restartVotes[round] (uint256)"}),(0,a.jsx)("option",{value:6,children:"6 - totalVoters[round] (uint256)"}),(0,a.jsx)("option",{value:7,children:"7 - roundStop[round] (bool)"}),(0,a.jsx)("option",{value:8,children:"8 - roundRestart[round] (bool)"}),(0,a.jsx)("option",{value:9,children:"9 - votes[round][user] (VoteRecord)"})]})]}),(0===en||1===en)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"数值 (uint256)"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"数字",value:ep,onChange:e=>ed(e.currentTarget.value.replace(/[^0-9]/g,""))})]}),(4===en||5===en||6===en)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"轮次 (uint256)"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"数字",value:er,onChange:e=>eu(e.currentTarget.value.replace(/[^0-9]/g,""))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"数值 (uint256)"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"数字",value:ep,onChange:e=>ed(e.currentTarget.value.replace(/[^0-9]/g,""))})]})]}),(2===en||3===en)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"地址 (address)"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"0x...",value:em,onChange:e=>eg(e.currentTarget.value.trim())})]}),(7===en||8===en)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"轮次 (uint256)"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"数字",value:er,onChange:e=>eu(e.currentTarget.value.replace(/[^0-9]/g,""))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"值 (bool)"}),(0,a.jsxs)("select",{className:"w-full bg-[#111] p-2 rounded",value:ey,onChange:e=>ec(e.target.value),children:[(0,a.jsx)("option",{value:"true",children:"true"}),(0,a.jsx)("option",{value:"false",children:"false"})]})]})]}),9===en&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"轮次 (uint256)"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"数字",value:er,onChange:e=>eu(e.currentTarget.value.replace(/[^0-9]/g,""))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"用户 (address)"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"0x...",value:eo,onChange:e=>el(e.currentTarget.value.trim())})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"hasVoted (bool)"}),(0,a.jsxs)("select",{className:"w-full bg-[#111] p-2 rounded",value:ev,onChange:e=>eT(e.target.value),children:[(0,a.jsx)("option",{value:"true",children:"true"}),(0,a.jsx)("option",{value:"false",children:"false"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"choice (0: CONTINUE, 1: RESTART)"}),(0,a.jsxs)("select",{className:"w-full bg-[#111] p-2 rounded",value:ef,onChange:e=>eb(e.target.value),children:[(0,a.jsx)("option",{value:"0",children:"0 - CONTINUE_DAO"}),(0,a.jsx)("option",{value:"1",children:"1 - RESTART_DAO"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"weight (uint256)"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"数字",value:eh,onChange:e=>ex(e.currentTarget.value.replace(/[^0-9]/g,""))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"timestamp (uint256, 秒)"}),(0,a.jsx)(d.ZP,{autoMargin:!1,placeholder:"留空使用当前时间",value:ew,onChange:e=>eN(e.currentTarget.value.replace(/[^0-9]/g,""))})]})]})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(y.ZP,{status:y.Dv.None,size:y.qE.Customize,round:y.DB.None,className:"btn-submit",waitForClick:!0,disabled:!eR||Z,onClick:eL,children:"执行 RestartVote.debugSet"})})]})})})]})})]}),(0,a.jsx)(p.Z,{})]})}},64037:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(57437),i=n(27635);function s(){return(0,a.jsx)(i.Z,{})}n(2265)},6543:function(e,t,n){"use strict";n.d(t,{X7:function(){return u},ZP:function(){return g},n$:function(){return p}});var a,i,s,r,u,o,l,p,d=n(57437),y=n(10433);n(74401);var c=n(2265),m=n(53335);function g(e){var t,n,a,i,s,r,u,o,l;let p=null!==(n=e.inputType)&&void 0!==n?n:"text",[g,v]=c.useState(""),[T,f]=c.useState(!1),b=null!==(a=e.maxLength)&&void 0!==a?a:1/0;function h(t){var n,a;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;T||(t.target.value=(n=t.target.value).length>b?n.slice(0,b):n),y.Z.I("handleChange",t.target.value),v(t.target.value),i||null===(a=e.onChange)||void 0===a||a.call(e,t)}function x(e){f(!1);let t=e.target;h({target:t,currentTarget:t},!1)}function w(t){var n;null===(n=e.onBlur)||void 0===n||n.call(e,t)}return(null===(t=e.id)||void 0===t?void 0:t.includes("test"))&&y.Z.I("InputBox",null===(i=e.value)||void 0===i?void 0:i.length,e.value,"->",g.length,g),c.useEffect(()=>{var t,n,a;(null===(t=e.id)||void 0===t?void 0:t.includes("test"))&&y.Z.I("props.value change",null===(n=e.value)||void 0===n?void 0:n.length,e.value,"->",g.length,g),e.value!==g&&v(null!==(a=e.value)&&void 0!==a?a:"")},[e.value]),(0,d.jsxs)("div",{className:(0,m.m6)("input-box grid grid-cols-[1fr_auto] justify-between items-center text-secondary","".concat(null!==(s=e.status)&&void 0!==s?s:"normal-status"," ").concat(null===(r=e.autoPadding)||void 0===r||r?"with-padding":"no-padding"," ").concat(null===(u=e.autoMargin)||void 0===u||u?"with-margin":"no-margin"," ").concat(null!==(o=e.border)&&void 0!==o?o:"with-border"," ").concat(null!==(l=e.round)&&void 0!==l?l:"middle-round"),e.className),children:[(0,d.jsxs)("div",{className:"flex justify-center items-center gap-2 start",children:[e.title?(0,d.jsx)("label",{className:"input-box-title",children:e.title}):"",e.icon?(0,d.jsx)("img",{src:e.icon,alt:"",className:"input-box-icon"}):"",e.IconElement?(0,d.jsx)(e.IconElement,{className:(0,m.m6)("input-box-icon",e.iconClassName)}):null,"text"===p?(0,d.jsx)("input",{className:(0,m.m6)("input-box-input",e.inputClassName),type:"text",placeholder:e.placeholder,value:g,onChange:h,onBlur:w,onCompositionStart:()=>f(!0),onCompositionEnd:x,maxLength:e.maxLength,readOnly:e.readOnly}):null,"textarea"===p?(0,d.jsx)("textarea",{className:(0,m.m6)("input-box-input resize-none",e.inputClassName),placeholder:e.placeholder,value:g,onChange:h,onBlur:w,onCompositionStart:()=>f(!0),onCompositionEnd:x,maxLength:e.maxLength}):null]}),(0,d.jsxs)("div",{className:"flex items-center end",children:[void 0!==e.isChecked?(0,d.jsx)("span",{className:"checker ".concat(e.isChecked?"checked":"no-check")}):"",e.children]})]})}(a=u||(u={})).Normal="normal-status",a.Simple="simple-status",(i=o||(o={})).ON="with-border",i.OFF="no-border",(s=l||(l={})).Big="big-round",s.Middle="middle-round",s.Small="small-round",s.None="no-round",(r=p||(p={})).Text="text",r.TextArea="textarea"},40366:function(e,t,n){"use strict";n.d(t,{K:function(){return a}});let a=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"AIRDROP_DURATION_CALC",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"AIRDROP_DURATION_GET_LIMIT",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"AIRDROP_DURATION_GET_MAX",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"AIRDROP_POOL_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"CANDIDATE_TOKEN_AMOUNT",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"COMMUNITY_DURATION",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"COMMUNITY_POOL_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"COMMUNITY_REWARD_EXPIRE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"COMMUNITY_REWARD_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"CREATOR_FEE_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"DAILY_REWARD_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEVELOPER_FEE_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"FIRST_LUCKY_REWARD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"FIRST_PLACE_REWARD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"FUND_POOL_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"LOSER_POOL_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"LOSER_POOL_REWARD_TIME_LIMIT",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"LUCKY_POOL_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MASTER_FOR_SUPER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MASTER_LINK_REWARD_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"MASTER_NODE_REWARD_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ONE_DAY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"PARENT_NODE_REWARD_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"QUITE_DURATION",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"QUIT_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"REWARD_LIMIT_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROUND_DURATION_ADD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROUND_DURATION_MAX",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"SECOND_LUCKY_REWARD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"SECOND_PLACE_REWARD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"SUPER_LINK_REWARD_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"SUPER_NODE_REWARD_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"SUPER_TOKEN_AMOUNT",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"SWAP_LIMIT",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"THIRD_LUCKY_REWARD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"THIRD_PLACE_REWARD",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTES_FOR_MASTER",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTE_DURATION",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTE_PRICE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTE_RANK_POOL_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTE_RANK_REWARD_RATE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"applyCandidateNode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"applySuperNode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"},{internalType:"uint256",name:"curDay",type:"uint256"}],name:"calcEffectiveAirDrop",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"},{internalType:"uint256",name:"curDay",type:"uint256"}],name:"calcEffectiveReinvest",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"ceilReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimLoserReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimLuckyReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimTop3NodeReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimTop3VotedReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimVoteAndAirDropReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"createTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"creator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentRoundNO",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"daoFactory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLastInvestors",outputs:[{internalType:"address[33]",name:"",type:"address[33]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"getLoserRewardTokenValue",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"getLuckyReward",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"getQuiteAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"getTop3NodeReward",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"getTop3VotedReward",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"addr",type:"address"}],name:"getVoteAndAirDropReward",outputs:[{components:[{internalType:"uint256",name:"nodeReward",type:"uint256"},{internalType:"uint256",name:"airdropReward",type:"uint256"},{internalType:"uint256",name:"airdropLinkReward",type:"uint256"},{internalType:"uint256",name:"reinvestReward",type:"uint256"},{internalType:"uint256",name:"totalReward",type:"uint256"},{internalType:"uint256",name:"clairReward",type:"uint256"}],internalType:"struct IDao.RewardData",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"trinitySwap",type:"address"},{internalType:"address",name:"pair",type:"address"},{internalType:"address",name:"weth",type:"address"},{internalType:"address",name:"priceConsumerV3",type:"address"},{internalType:"address",name:"creator",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"address",name:"developer",type:"address"}],internalType:"struct IDao.InitParams",name:"params",type:"tuple"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"lastInvestors",outputs:[{internalType:"uint8",name:"currentIndex",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"pair",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"pools",outputs:[{internalType:"uint256",name:"airdropPool",type:"uint256"},{internalType:"uint256",name:"voteRankPool",type:"uint256"},{internalType:"uint256",name:"communityPool",type:"uint256"},{internalType:"uint256",name:"luckyPool",type:"uint256"},{internalType:"uint256",name:"luckyPoolBalance",type:"uint256"},{internalType:"uint256",name:"fundPool",type:"uint256"},{internalType:"uint256",name:"loserPool",type:"uint256"},{internalType:"uint256",name:"loserPoolBalance",type:"uint256"},{internalType:"uint256",name:"loserPoolETH",type:"uint256"},{internalType:"uint256",name:"loserPoolETHBalance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceConsumerV3",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"promotions",outputs:[{internalType:"uint256",name:"sonVotedAmountToday",type:"uint256"},{internalType:"uint256",name:"sonVotedAmountWeek",type:"uint256"},{internalType:"uint256",name:"sonVotedDate",type:"uint256"},{internalType:"uint256",name:"sonVotedWeek",type:"uint256"},{internalType:"uint256",name:"airdropLinkReward",type:"uint256"},{internalType:"uint256",name:"nodeReward",type:"uint256"},{internalType:"uint256",name:"totalSonVotedAmount",type:"uint256"},{internalType:"uint256",name:"totalSonEthDone",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"quit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],name:"quitAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"restart",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"restartByVote",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"restartFactory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"roundExpire",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_loserPoolBalance",type:"uint256"}],name:"setLoserPoolBalance",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_creator",type:"address"},{internalType:"address",name:"_developer",type:"address"},{internalType:"uint256",name:"_voteDuration",type:"uint256"}],name:"setParams",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startByVote",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"stop",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"top3Node",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"top3NodeDate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"top3NodePoolPre",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"top3NodePre",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"top3NodeWithdraw",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"top3Voted",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"top3VotedDate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"top3VotedPoolPre",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"top3VotedPre",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"top3VotedWithdraw",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"totalEthDone",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"totalVoteAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"trinitySwap",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"}],name:"upgradeTo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"users",outputs:[{internalType:"uint256",name:"firstJoinTime",type:"uint256"},{internalType:"uint256",name:"roundNo",type:"uint256"},{internalType:"address",name:"parent",type:"address"},{internalType:"uint256",name:"sonCount",type:"uint256"},{internalType:"uint256",name:"sonCandidateCount",type:"uint256"},{internalType:"uint256",name:"sonMasterNodeCount",type:"uint256"},{internalType:"uint256",name:"sonSuperNodeCount",type:"uint256"},{internalType:"enum DaoLibrary.NodeType",name:"nodeType",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_node",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"vote",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"voteDuration",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"votes",outputs:[{internalType:"uint256",name:"votedAmount",type:"uint256"},{internalType:"uint256",name:"ethDone",type:"uint256"},{internalType:"uint256",name:"roundFirstVotedDate",type:"uint256"},{internalType:"uint256",name:"claimedVotedLastTime",type:"uint256"},{internalType:"uint256",name:"votedDatePre",type:"uint256"},{internalType:"bool",name:"quited",type:"bool"},{internalType:"bool",name:"luckyReward",type:"bool"},{internalType:"bool",name:"loserReward",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"weth",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}]},425:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});let a=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint8",name:"target",type:"uint8"},{indexed:!1,internalType:"bytes",name:"key",type:"bytes"},{indexed:!1,internalType:"bytes",name:"value",type:"bytes"},{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"DebugValueSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"VOTING_DURATION",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"continueVotes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentVotingRound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"dao",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint8",name:"target",type:"uint8"},{internalType:"bytes",name:"key",type:"bytes"},{internalType:"bytes",name:"value",type:"bytes"}],name:"debugSet",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentStatus",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getVotingWeight",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint8",name:"nodeType",type:"uint8"}],name:"getWeightByNodeType",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_dao",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"isEligibleToVote",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isVotingActive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isVotingFinished",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isVotingPassed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"restartDao",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"restartVotes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"roundRestart",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"roundStop",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"startTime",type:"uint256"}],name:"startVoting",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"stopDao",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"totalVoters",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"}],name:"upgradeTo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"enum RestartVote.VoteOption",name:"choice",type:"uint8"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"votes",outputs:[{internalType:"bool",name:"hasVoted",type:"bool"},{internalType:"enum RestartVote.VoteOption",name:"choice",type:"uint8"},{internalType:"uint256",name:"weight",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"votingStartTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}]},63671:function(e,t,n){"use strict";n.d(t,{bQ:function(){return u},ki:function(){return r}});var a=n(59201),i=n(2156),s=n(344);function r(e){return{total:0,pageIndex:0,pageSize:10,isLoading:!1,isEnd:!1,isError:!1,data:[],...e}}class u{buildConfigure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.M;return function(e){let t=new Headers;return t.set("Authorization",e.getAuthorization()),new s.VKt({basePath:i.v,headers:Object.fromEntries(t)})}(e)}}},64943:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var a=n(5853),i=n(8113),s=n(63671),r=n(3682),u=n(21707),o=n(425),l=n(81939),p=n(13965),d=n(10433),y=n(59868);let c=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"dao",type:"address"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"RestartVoteCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"dao",type:"address"},{indexed:!0,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"uint256",name:"weight",type:"uint256"},{indexed:!1,internalType:"uint8",name:"choice",type:"uint8"},{indexed:!1,internalType:"uint256",name:"currentRoundNO",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"VoteCast",type:"event"},{inputs:[{internalType:"address",name:"_dao",type:"address"}],name:"createRestartVote",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_dao",type:"address"}],name:"daoAddresses",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_dao",type:"address"},{internalType:"uint256",name:"startTime",type:"uint256"}],name:"startVoting",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newImplementation",type:"address"}],name:"updateDaoImplementation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"daoProxy",type:"address"}],name:"upgradeRestartVote",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"restartVotes",type:"address[]"}],name:"upgradeRestartVoteBatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"dao",type:"address"},{internalType:"address",name:"voter",type:"address"},{internalType:"uint256",name:"weight",type:"uint256"},{internalType:"uint8",name:"voteOption",type:"uint8"},{internalType:"uint256",name:"currentRoundNO",type:"uint256"}],name:"voteEvent",outputs:[],stateMutability:"nonpayable",type:"function"}];var m=n(40366);class g extends s.bQ{async getRestartVoteAddress(e){let t="0xAafb6689aED0e6D16d6Ee9af84a1f3044a5B79E6";if(!t)return null;let n=r.Q.getDefaultProvider(),a=r.Q.getTargetNet().chainId,i=new u.z(a,n),s=new u.C(t,c);try{let t=await i.all([s.daoAddresses(e)]).then(e=>{let[t]=e;return t});if(!t||"0x0000000000000000000000000000000000000000"===t)return null;return t}catch(e){return null}}async getOverview(e){let t="0xAafb6689aED0e6D16d6Ee9af84a1f3044a5B79E6",n=await this.getRestartVoteAddress(e);if(!n)return{restartVotecontractAddress:"",restartVoteFactoryContractAddress:t,daoAddress:e,isVotingActive:!1,votingStartTime:0,votingEndTime:0,votingDurationSeconds:0,currentVotingRound:0,continueVotes:0n,restartVotes:0n,totalVoters:0n,currentStatus:1,roundExpire:0,stopResumeTime:0};let a=r.Q.getDefaultProvider(),i=r.Q.getTargetNet().chainId,s=new u.z(i,a),l=new u.C(n,o.x),[p,d,y,c,g,v]=await s.all([l.currentVotingRound(),l.isVotingActive(),l.votingStartTime(),l.VOTING_DURATION(),l.dao(),l.getCurrentStatus()]),T=Number(p),[f,b,h]=await s.all([l.continueVotes(p),l.restartVotes(p),l.totalVoters(p)]),x=1e3*Number(y),w=1e3*Number(c),N=0,E=0;try{if(5===Number(v)||6===Number(v)){let e=new u.C(g,m.K),t=await s.all([e.roundExpire(p)]).then(e=>{let[t]=e;return t});E=(N=1e3*Number(t))+1728e5}}catch(e){}return{restartVotecontractAddress:n,restartVoteFactoryContractAddress:t,daoAddress:g,isVotingActive:d,votingStartTime:x,votingEndTime:x+w,votingDurationSeconds:Number(c),currentVotingRound:T,continueVotes:f,restartVotes:b,totalVoters:h,currentStatus:Number(v),roundExpire:N,stopResumeTime:E}}async getMyInfo(e,t){let n=await this.getRestartVoteAddress(t);if(!n)return{restartVotecontractAddress:"",currentVotingRound:0,isEligibleToVote:!1,votingWeight:0n,hasVoted:!1,choice:0,weight:0n,timestamp:0};let a=r.Q.getDefaultProvider(),i=r.Q.getTargetNet().chainId,s=new u.z(i,a),l=new u.C(n,o.x),[p,d,y]=await s.all([l.currentVotingRound(),l.isEligibleToVote(e),l.getVotingWeight(e)]),c=Number(p),[m,g,v,T]=await s.all([l.votes(p,e)]).then(e=>{let[t]=e;return t});return{restartVotecontractAddress:n,currentVotingRound:c,isEligibleToVote:d,votingWeight:y,hasVoted:m,choice:Number(g),weight:v,timestamp:1e3*Number(T)}}async castVote(e,t){let n=await this.getRestartVoteAddress(e);if(!n)throw Error("RestartVote contract address not found");let a=r.Q.getTargetNet(),i=p.r.getInstance().getProvider();if(!i)throw Error("Wallet not connected");let s=l.Z.getInstance(i,a.chainId),u=await s.getSigner(),d=new y.CH(n,o.x,u),c=await d.vote(t);return await c.wait(),c.hash}async getCurrentStatus(e){let t=await this.getRestartVoteAddress(e);if(!t)return 1;let n=r.Q.getDefaultProvider(),a=r.Q.getTargetNet().chainId,i=new u.z(a,n),s=new u.C(t,o.x);return Number(await i.all([s.getCurrentStatus()]).then(e=>{let[t]=e;return t}))}async stopDao(e){let t=await this.getRestartVoteAddress(e);if(!t)throw Error("RestartVote contract address not found");let n=r.Q.getTargetNet(),a=p.r.getInstance().getProvider();if(!a)throw Error("Wallet not connected");let i=l.Z.getInstance(a,n.chainId),s=await i.getSigner(),u=new y.CH(t,o.x,s),d=await u.stopDao();return await d.wait(),d.hash}async restartDao(e){let t=await this.getRestartVoteAddress(e);if(!t)throw Error("RestartVote contract address not found");let n=r.Q.getTargetNet(),a=p.r.getInstance().getProvider();if(!a)throw Error("Wallet not connected");let i=l.Z.getInstance(a,n.chainId),s=await i.getSigner(),u=new y.CH(t,o.x,s),d=await u.restartDao();return await d.wait(),d.hash}async stopDaoByAddress(e){if(!e)throw Error("Missing RestartVote contract address");d.Z.L("\uD83D\uDD0D [stopDaoByAddress] 开始执行停止DAO操作",{restartVoteContractAddress:e,timestamp:new Date().toISOString()});let t=r.Q.getTargetNet(),n=p.r.getInstance().getProvider();if(!n)throw Error("Wallet not connected");d.Z.L("\uD83D\uDD0D [stopDaoByAddress] 钱包连接状态检查通过",{chainId:t.chainId,providerExists:!!n});let a=l.Z.getInstance(n,t.chainId),i=await a.getSigner(),s=await i.getAddress();d.Z.L("\uD83D\uDD0D [stopDaoByAddress] 获取签名者信息",{signerAddress:s,chainId:t.chainId});let u=new y.CH(e,o.x,i);try{let e=await u.currentVotingRound(),[t,n,a,i,s]=await Promise.all([u.isVotingActive(),u.continueVotes(e),u.restartVotes(e),u.roundStop(e),u.isVotingPassed()]);if(d.Z.L("\uD83D\uDD0D [stopDaoByAddress] 合约状态检查",{currentVotingRound:e.toString(),isVotingActive:t,continueVotes:n.toString(),restartVotes:a.toString(),roundStop:i,isVotingPassed:s,isRestartWinning:a>n}),i)throw d.Z.E("❌ [stopDaoByAddress] 当前轮次已经停止",{currentVotingRound:e.toString()}),Error("Current round already stopped");if(!s)throw d.Z.E("❌ [stopDaoByAddress] 投票未通过",{isVotingPassed:s,restartVotes:a.toString(),continueVotes:n.toString(),isRestartWinning:a>n}),Error("Voting not passed. Cannot stop DAO")}catch(e){throw d.Z.E("❌ [stopDaoByAddress] 预检查失败",{error:e.message,stack:e.stack}),e}d.Z.L("\uD83D\uDE80 [stopDaoByAddress] 开始发送交易");try{var c,m,g;let e=await u.stopDao();d.Z.L("✅ [stopDaoByAddress] 交易已发送",{txHash:e.hash,nonce:e.nonce,gasLimit:null===(c=e.gasLimit)||void 0===c?void 0:c.toString(),gasPrice:null===(m=e.gasPrice)||void 0===m?void 0:m.toString()}),d.Z.L("⏳ [stopDaoByAddress] 等待交易确认...");let t=await e.wait();return d.Z.L("✅ [stopDaoByAddress] 交易已确认",{txHash:e.hash,blockNumber:t.blockNumber,gasUsed:null===(g=t.gasUsed)||void 0===g?void 0:g.toString(),status:t.status}),e.hash}catch(e){throw d.Z.E("❌ [stopDaoByAddress] 交易执行失败",{error:e.message,code:e.code,data:e.data,reason:e.reason,stack:e.stack}),e}}async restartDaoByAddress(e){if(!e)throw Error("Missing RestartVote contract address");let t=r.Q.getTargetNet(),n=p.r.getInstance().getProvider();if(!n)throw Error("Wallet not connected");let a=l.Z.getInstance(n,t.chainId),i=await a.getSigner(),s=new y.CH(e,o.x,i),u=await s.restartDao();return await u.wait(),u.hash}}g=(0,a.gn)([i.ZP.Singleton],g)},74401:function(){}},function(e){e.O(0,[1283,5073,287,6764,8575,5138,3448,1707,923,344,6011,2971,2117,1744],function(){return e(e.s=45050)}),_N_E=e.O()}]);